import{_ as O,u as j,a as x,b as R,r as I,c as A,d as u,e,t as n,w as G,f as k,g as V,v as J,h as l,i as _,j as K,k as p,F as Q,l as W,m as h,o as i,p as X,n as Y,q as Z,s as ss}from"./index-VvwCHRy_.js";import{u as es,r as L,m as ts}from"./i18n-validators-iXaO_C5g.js";import{r as as,u as os}from"./generic.services-v9zpRyzJ.js";const rs="/assets/logo-b--53z4u.svg",ns=o=>as({url:"account/Login",method:"POST",body:o}),ls=o=>(X("data-v-ff4b8db4"),o=o(),Y(),o),us={class:"auth"},is={class:"container"},cs={class:"auth__inner"},ds={class:"auth__wrapper"},_s=ls(()=>e("div",{class:"auth__logo"},[e("img",{src:rs,alt:"logo",width:"200",height:"65",loading:"lazy"})],-1)),ps={class:"auth__title"},hs={class:"auth__label"},ms=["placeholder"],vs={key:0,class:"error-white"},gs={class:"auth__label"},ws={class:"auth__label-wrapper"},fs=["type","placeholder"],bs={key:0,class:"error-white"},$s={class:"auth__submit",type:"submit"},Ss={key:0,class:"loading"},ys={__name:"auth",setup(o){const M=W(),T=j(),{t:U}=x(),B=R(),{setUser:D}=B,c=I(!1),t=I({userName:"",password:""}),F=A(()=>({userName:{required:L},password:{required:L,minLength:ts}})),a=es(F,t),{status:q,mutate:C}=os({mutationFn:s=>ns(s),onSuccess:s=>{s!=null&&s.success&&(D(s==null?void 0:s.data),t.value=Z(t.value),a.value.$reset(),M.push(ss.HOME.path),setTimeout(()=>T.success(U("signInToast")),150))}}),P=()=>{a.value.$validate(),!a.value.$errors.length&&C(t.value)};return(s,r)=>{var m,v,g,w,f,b,$,S,y,N;const z=h("Icon"),E=h("SwitcherLang"),H=h("Spinner");return i(),u(Q,null,[e("section",us,[e("div",is,[e("div",cs,[e("div",ds,[_s,e("h2",ps,n(s.$t("login")),1),e("form",{class:"auth__form",onSubmit:G(P,["prevent"])},[e("label",hs,[k(n(s.$t("loginLabel"))+" ",1),V(e("input",{class:"auth__input",type:"text","onUpdate:modelValue":r[0]||(r[0]=d=>t.value.userName=d),placeholder:s.$t("loginPlaceholder")},null,8,ms),[[J,t.value.userName,void 0,{trim:!0}]]),(v=(m=l(a))==null?void 0:m.userName)!=null&&v.$error?(i(),u("span",vs,n((f=(w=(g=l(a))==null?void 0:g.userName)==null?void 0:w.$errors[0])==null?void 0:f.$message),1)):_("",!0)]),e("label",gs,[k(n(s.$t("passwordLabel"))+" ",1),e("span",ws,[V(e("input",{class:"auth__input",type:c.value?"text":"password","onUpdate:modelValue":r[1]||(r[1]=d=>t.value.password=d),placeholder:s.$t("passwordPlaceholder")},null,8,fs),[[K,t.value.password,void 0,{trim:!0}]]),e("span",{class:"auth__label-icon",onClick:r[2]||(r[2]=()=>c.value=!c.value)},[p(z,{name:"eye"})])]),($=(b=l(a))==null?void 0:b.password)!=null&&$.$error?(i(),u("span",bs,n((N=(y=(S=l(a))==null?void 0:S.password)==null?void 0:y.$errors[0])==null?void 0:N.$message),1)):_("",!0)]),e("button",$s,n(s.$t("loginButton")),1)],32),p(E)])])])]),l(q)==="pending"?(i(),u("div",Ss,[p(H)])):_("",!0)],64)}}},Vs=O(ys,[["__scopeId","data-v-ff4b8db4"]]);export{Vs as default};
