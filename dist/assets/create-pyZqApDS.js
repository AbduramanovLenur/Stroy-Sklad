import{u as M,a as K,r as s,c as q,b as _,d as g,f as h,k as r,w as H,F as P,e as T,B as v,g as L,h as n,o as l,A as N,z as Q,i as $,t as E}from"./index-rVcEkfs7.js";import{u as U,r as y}from"./i18n-validators-9lIM3i5c.js";import{a as X,u as A}from"./generic.services-VYFQaCza.js";import{c as D}from"./crud.services-eAS52g5X.js";const R={class:"manage section-height shadowed"},j={class:"manage__inner section-padding"},ee={__name:"create",setup(G){const B=X(),I=L();M(),K();const S=s(localStorage.getItem("organizationId")),t=s({fullName:"",organizationId:S.value}),V=q(()=>({fullName:{required:y},organizationId:{required:y}})),a=U(V,t),b=s([{id:1,model:"fullName",label:"nameExpensesLabel",placeholder:"nameExpensesPlaceholder",icon:"input-company",errorKey:"fullName"}]),{mutate:x}=A({mutationFn:o=>D("cost",o),onSuccess:()=>{B.invalidateQueries({queryKey:["expenses"]}),I.push(N.EXPENSES.path)}}),w=()=>{a.value.$validate(),!a.value.$errors.length&&(x(t.value),a.value.$reset())};return(o,J)=>{var u,m;const C=n("ManageHead"),k=n("FormInput"),z=n("CustomButton");return l(),_("section",R,[g("div",j,[h(C,{title:"addNewExpensesTitle",to:r(N).EXPENSES.path},null,8,["to"]),g("form",{class:"manage__form form-manage",onSubmit:H(w,["prevent"])},[(l(!0),_(P,null,T(b.value,e=>{var c,d,i,p,f;return l(),Q(k,{key:e.id,modelValue:t.value[e.model],"onUpdate:modelValue":F=>t.value[e.model]=F,width:500,placeholder:o.$t(e.placeholder),name:e.icon,error:(d=(c=r(a))==null?void 0:c[e.errorKey])==null?void 0:d.$error,textError:(f=(p=(i=r(a))==null?void 0:i[e.errorKey])==null?void 0:p.$errors[0])==null?void 0:f.$message},{default:v(()=>[$(E(o.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),h(z,{className:`form__submit ${(m=(u=r(a))==null?void 0:u.fullName.$errors[0])!=null&&m.$message?"centered":""}`},{default:v(()=>[$(E(o.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{ee as default};
//# sourceMappingURL=create-pyZqApDS.js.map
