import{q as V,s as x,r as u,x as z,y as H,z as F,d as T,e as J,k as B,h as e,A as C,i as d,t as M,m as a,o as n,B as k}from"./index-8f2nY-tA.js";import{a as R,u as U}from"./generic.services-2-3LJT-B.js";import{u as W}from"./useQuery-eGcy0OjN.js";import{g as $,d as G}from"./crud.services-swolhUoO.js";import{r as X}from"./index-N_tz-29j.js";const Y={class:"object"},Z={class:"object__inner section-padding"},ee={key:2,class:"empty-table shadowed"},ie={__name:"index",async setup(te){let o,b;const c=R(),m=V(),{setSearchValue:_,setPagePagination:q}=m,{page:i,limit:r,search:p}=x(m),A=u(localStorage.getItem("organizationId"));z(()=>{_("")}),H(p,()=>{q(1)});const y=u(""),g=X(p,500),E=u([{id:1,label:"objectName",width:495},{id:3,label:"objectAddress",width:270},{id:4,label:"objectState"},{id:5,label:"objectAction"}]),{data:s,isLoading:P,isSuccess:l,isError:w}=([o,b]=F(()=>W({queryKey:["objects",{page:i,limit:r,debouncedSearch:g,organizationId:A}],queryFn:()=>$("building_object",i.value,r.value,g.value)})),o=await o,b(),o),{mutate:I}=U({mutationFn:t=>G("building_object",t),onSuccess:()=>{c.invalidateQueries({queryKey:["objects"]}),c.invalidateQueries({queryKey:["objectById",y]}),c.invalidateQueries({queryKey:["objectsList"]})}}),O=async t=>{y.value=t,I(t)};return(t,j)=>{var h,S,f,v;const D=a("HeadPage"),Q=a("Table"),K=a("Pagination"),L=a("Spinner");return n(),T("section",Y,[J("div",Z,[B(D,{title:"objectTitle",to:e(k).CREATE_OBJECTS.path,onOnSearch:j[0]||(j[0]=N=>e(_)(N))},null,8,["to"]),e(l)&&((h=e(s))!=null&&h.count)?(n(),C(Q,{key:0,headers:E.value,table:(S=e(s))==null?void 0:S.objects,to:e(k).UPDATE_OBJECTS.name,options:{page:e(i),limit:e(r)},onOnActionDelete:O},null,8,["headers","table","to","options"])):d("",!0),B(K,{count:(f=e(s))==null?void 0:f.count,isSucces:e(l)},null,8,["count","isSucces"]),e(P)?(n(),C(L,{key:1})):d("",!0),e(l)&&!((v=e(s))!=null&&v.count)||e(w)?(n(),T("div",ee,M(t.$t("emptyTableTitle")),1)):d("",!0)])])}}};export{ie as default};
//# sourceMappingURL=index-jaIxBI0z.js.map
