import{n as V,s as x,q as H,x as K,r as f,y as L,b as v,d as R,j as C,g as e,z as P,h as l,t as F,l as n,o as i,A}from"./index-LIAghTzt.js";import{a as j,u as U}from"./generic.services-g7-190gM.js";import{u as W}from"./useQuery-lbUIVZoa.js";import{g as $,d as G}from"./crud.services-v10L7FpB.js";import{r as J}from"./index-YHyICAjd.js";const X={class:"company section-height"},Y={class:"company__inner section-padding"},Z={key:2,class:"empty-table shadowed"},se={__name:"index",async setup(ee){let a,d;const u=j(),m=V(),{setSearchValue:p,setPagePagination:T}=m,{page:s,limit:r,search:g}=x(m);H(()=>{p("")}),K(g,()=>{T(1)});const _=f(""),h=J(g,500),D=f([{id:1,label:"organizationName",width:220},{id:2,label:"organizationInn",width:115},{id:3,label:"organizationRegion",width:200},{id:4,label:"organizationDistrict",width:155},{id:5,label:"organizationAddress",width:200},{id:6,label:"organizationPhone",width:170},{id:7,label:"organizationDirector",width:230},{id:7,label:"organizationState"},{id:8,label:"organizationAction"}]),{data:o,isLoading:E,isSuccess:c,isError:k}=([a,d]=L(()=>W({queryKey:["companies",{page:s,limit:r,debouncedSearch:h}],queryFn:()=>$("organization",s.value,r.value,h.value)})),a=await a,d(),a),{mutate:q}=U({mutationFn:t=>G("organization",t),onSuccess:async()=>{await u.invalidateQueries({queryKey:["companies"]}),await u.invalidateQueries({queryKey:["companiesById",_]})}}),I=t=>{_.value=t,q(t)};return(t,y)=>{var b,S,w,z;const N=n("HeadPage"),B=n("Table"),M=n("Pagination"),O=n("Spinner");return i(),v("section",X,[R("div",Y,[C(N,{title:"comapnyTitle",to:e(A).CREATE_COMPANIES.path,onOnSearch:y[0]||(y[0]=Q=>e(p)(Q))},null,8,["to"]),e(c)&&((b=e(o))!=null&&b.count)?(i(),P(B,{key:0,headers:D.value,table:(S=e(o))==null?void 0:S.organizations,to:e(A).UPDATE_COMPANIES.name,options:{page:e(s),limit:e(r)},onOnActionDelete:I},null,8,["headers","table","to","options"])):l("",!0),C(M,{count:(w=e(o))==null?void 0:w.count,isSucces:e(c)},null,8,["count","isSucces"]),e(E)?(i(),P(O,{key:1})):l("",!0),e(c)&&!((z=e(o))!=null&&z.count)||e(k)?(i(),v("div",Z,F(t.$t("emptyTableTitle")),1)):l("",!0)])])}}};export{se as default};
//# sourceMappingURL=index-gggJ4mso.js.map
