import{n as R,s as V,r as c,q as x,x as K,y as L,b as T,d as U,j as E,g as e,z as A,h as l,t as F,l as s,o as n,A as P}from"./index-LIAghTzt.js";import{a as M,u as j}from"./generic.services-g7-190gM.js";import{u as $}from"./useQuery-lbUIVZoa.js";import{g as G,d as J}from"./crud.services-v10L7FpB.js";import{r as X}from"./index-YHyICAjd.js";const Y={class:"warehouse"},Z={class:"warehouse__inner section-padding"},ee={key:2,class:"empty-table shadowed"},ie={__name:"index",async setup(te){let a,d;const h=M(),m=R(),{setSearchValue:p,setPagePagination:k}=m,{page:r,limit:i,search:_}=V(m),q=c(localStorage.getItem("organizationId"));x(()=>{p("")}),K(_,()=>{k(1)});const w=c(""),y=X(_,500),C=c([{id:1,label:"warehouseName",width:340},{id:2,label:"warehouseQuantity",width:345},{id:3,label:"warehouseQuantityType",width:160},{id:4,label:"warehouseOrganization",width:345},{id:5,label:"warehouseState"},{id:6,label:"warehouseAction"}]),{data:o,isLoading:I,isSuccess:u,isError:Q}=([a,d]=L(()=>$({queryKey:["warehouse",{page:r,limit:i,debouncedSearch:y,organizationId:q}],queryFn:()=>G("warehouse",r.value,i.value,y.value)})),a=await a,d(),a),{mutate:B}=j({mutationFn:t=>J("warehouse",t),onSuccess:()=>{h.invalidateQueries({queryKey:["warehouse"]}),h.invalidateQueries({queryKey:["warehouseById",w]})}}),D=async t=>{w.value=t,B(t)};return(t,g)=>{var b,S,f,v;const H=s("HeadPage"),O=s("Table"),W=s("Pagination"),z=s("Spinner");return n(),T("section",Y,[U("div",Z,[E(H,{title:"warehouseTitle",to:e(P).CREATE_WAREHOUSE.path,onOnSearch:g[0]||(g[0]=N=>e(p)(N))},null,8,["to"]),e(u)&&((b=e(o))!=null&&b.count)?(n(),A(O,{key:0,headers:C.value,table:(S=e(o))==null?void 0:S.warehouse,to:e(P).UPDATE_WAREHOUSE.name,options:{page:e(r),limit:e(i)},onOnActionDelete:D},null,8,["headers","table","to","options"])):l("",!0),E(W,{count:(f=e(o))==null?void 0:f.count,isSucces:e(u)},null,8,["count","isSucces"]),e(I)?(n(),A(z,{key:1})):l("",!0),e(u)&&!((v=e(o))!=null&&v.count)||e(Q)?(n(),T("div",ee,F(t.$t("emptyTableTitle")),1)):l("",!0)])])}}};export{ie as default};
//# sourceMappingURL=index-pZRqOWRu.js.map
