import{u as ae,a as te,r as c,y as g,c as se,x as oe,b as S,d as F,f as K,B as h,w as re,F as L,e as C,k as y,g as ne,C as ue,h as I,o as p,i as _,t as q,z as E,A as z}from"./index-TqTqIbHh.js";import{u as ie,r as n}from"./i18n-validators-zAZPYeBJ.js";import{a as le,u as de}from"./generic.services-wmG985Iz.js";import{u as v}from"./useQuery-ZuTrOc-G.js";import{a as me,u as ce}from"./crud.services-ChiVIUDS.js";import{f as ye,g as pe,b as ge}from"./manual.services-2IlJk8n9.js";const he={class:"manage section-height shadowed"},Ie={class:"manage__inner section-padding"},Te={__name:"update",async setup(_e){let a,o;const b=le(),T=ne(),M=ue();ae(),te();const f=c(M.params.id),$=c(localStorage.getItem("organizationId")),{data:Q,isSuccess:W,isLoading:k}=([a,o]=g(()=>v({queryKey:["types"],queryFn:()=>ye()})),a=await a,o(),a),{data:x,isSuccess:N,isLoading:U}=([a,o]=g(()=>v({queryKey:["materials",{organizationId:$}],queryFn:()=>pe($.value)})),a=await a,o(),a),{data:A,isSuccess:H,isLoading:R}=([a,o]=g(()=>v({queryKey:["states"],queryFn:()=>ge()})),a=await a,o(),a),s=c({id:"",materialId:"",quantity:"",quantityTypeId:"",organizationId:"",stateId:""}),O=se(()=>({id:{required:n},materialId:{required:n},quantity:{required:n},quantityTypeId:{required:n},organizationId:{required:n},stateId:{required:n}})),r=ie(O,s),P=c([{id:1,model:"quantity",label:"quantityWarehouseLabel",placeholder:"quantityWarehousePlaceholder",icon:"list",errorKey:"quantity"}]),D=c([{id:1,model:"materialId",label:"materialsWarehouseLabel",options:x,success:N,loading:U},{id:2,model:"quantityTypeId",label:"qunatityTypesWarehouseLabel",options:Q,success:W,loading:k},{id:3,model:"stateId",label:"stateWarehouseLabel",options:A,success:H,loading:R}]),{isError:G}=([a,o]=g(()=>v({queryKey:["warehouseById",f],queryFn:()=>me("warehouse",f.value),select:t=>{s.value.id=t.id,s.value.materialId=t.materialId,s.value.quantity=t.quantity,s.value.quantityTypeId=t.quantityTypeId,s.value.organizationId=t.organizationId,s.value.stateId=t.stateId}})),a=await a,o(),a);oe(G,t=>{t&&T.push(z.HOME.path)});const{mutate:j}=de({mutationFn:t=>ce("warehouse",t),onSuccess:()=>{b.invalidateQueries({queryKey:["warehouse"]}),b.invalidateQueries({queryKey:["warehouseById",f]}),T.push(z.WAREHOUSE.path)}}),J=async()=>{s.value.organizationId=$.value,r.value.$validate(),!r.value.$errors.length&&(j(s.value),r.value.$reset())};return(t,qe)=>{var V,B;const X=I("Title"),Y=I("FormInput"),Z=I("FormSelect"),ee=I("CustomButton");return p(),S("section",he,[F("div",Ie,[K(X,null,{default:h(()=>[_(`\r
                `+q(t.$t("editProductTitle"))+`\r
            `,1)]),_:1}),F("form",{class:"manage__form form-manage",onSubmit:re(J,["prevent"])},[(p(!0),S(L,null,C(P.value,e=>{var u,i,l,d,m;return p(),E(Y,{key:e.id,modelValue:s.value[e.model],"onUpdate:modelValue":w=>s.value[e.model]=w,width:500,placeholder:t.$t(e.placeholder),name:e.icon,error:(i=(u=y(r))==null?void 0:u[e==null?void 0:e.errorKey])==null?void 0:i.$error,textError:(m=(d=(l=y(r))==null?void 0:l[e==null?void 0:e.errorKey])==null?void 0:d.$errors[0])==null?void 0:m.$message},{default:h(()=>[_(q(t.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),(p(!0),S(L,null,C(D.value,e=>{var u,i,l,d,m;return p(),E(Z,{key:e.id,modelValue:s.value[e.model],"onUpdate:modelValue":w=>s.value[e.model]=w,width:500,options:e.options,error:(i=(u=y(r))==null?void 0:u[e==null?void 0:e.errorKey])==null?void 0:i.$error,textError:(m=(d=(l=y(r))==null?void 0:l[e==null?void 0:e.errorKey])==null?void 0:d.$errors[0])==null?void 0:m.$message,success:e.success,loading:e.loading},{default:h(()=>[_(q(t.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","options","error","textError","success","loading"])}),128)),K(ee,{className:`form__submit ${(B=(V=y(r))==null?void 0:V.stateId.$errors[0])!=null&&B.$message?"centered":""}`},{default:h(()=>[_(q(t.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{Te as default};
//# sourceMappingURL=update-edMrqk7b.js.map
