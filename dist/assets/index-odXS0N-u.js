import{n as V,s as x,q as F,r as f,x as H,b as v,d as I,f as w,k as e,y as B,l as c,t as R,h as a,o as n,z as T}from"./index-LmWVe-1R.js";import{a as j,u as z}from"./generic.services-SMByNSgc.js";import{u as M}from"./useQuery-y4IjI6tz.js";import{g as U,d as W}from"./crud.services-Lk4iElC7.js";import{r as $}from"./index-aZPhR5F5.js";const G={class:"blocks section-height"},J={class:"blocks__inner section-padding"},X={key:2,class:"empty-table"},ae={__name:"index",async setup(Y){let s,i;const r=j(),u=V(),{setSearchValue:C}=u,{page:d,limit:b,search:m}=x(u);F(()=>{C("")});const _=f(""),k=$(m,500),E=f([{id:1,label:"blockName",width:185},{id:2,label:"blockObject",width:205},{id:3,label:"blockOrganization",width:260},{id:4,label:"blockFloors",width:230},{id:5,label:"blockRooms",width:235},{id:6,label:"blockAddress",width:150},{id:7,label:"blockState",width:140},{id:8,label:"blockAction",width:125}]),{data:o,isLoading:q,isSuccess:l,isError:A}=([s,i]=H(()=>M({queryKey:["blocks",{page:d,limit:b,debouncedSearch:k}],queryFn:()=>U("building_block",d.value,b.value,k.value)})),s=await s,i(),s),{mutate:O}=z({mutationFn:t=>W("building_block",t),onSuccess:()=>{r.invalidateQueries({queryKey:["blocks"]}),r.invalidateQueries({queryKey:["blocksById",_]})}}),D=async t=>{_.value=t,O(t)};return(t,p)=>{var h,y,S,g;const K=a("HeadPage"),L=a("Table"),P=a("Pagination"),N=a("Spinner");return n(),v("section",G,[I("div",J,[w(K,{title:"blockTitle",to:e(T).CREATE_BLOCKS.path,onOnSearch:p[0]||(p[0]=Q=>m.value=Q)},null,8,["to"]),e(l)&&((h=e(o))!=null&&h.count)?(n(),B(L,{key:0,headers:E.value,table:(y=e(o))==null?void 0:y.objects,to:e(T).UPDATE_BLOCKS.name,onOnActionDelete:D},null,8,["headers","table","to"])):c("",!0),w(P,{count:(S=e(o))==null?void 0:S.count,isSucces:e(l),isEmpty:!!((g=e(o))!=null&&g.count)},null,8,["count","isSucces","isEmpty"]),e(q)?(n(),B(N,{key:1})):c("",!0),e(l)&&!e(o).count||e(A)?(n(),v("div",X,R(t.$t("emptyTableTitle")),1)):c("",!0)])])}}};export{ae as default};
//# sourceMappingURL=index-odXS0N-u.js.map
