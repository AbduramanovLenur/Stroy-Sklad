import{u as j,a as D,y as v,r as y,c as J,b as _,d as I,j as L,g as l,w as W,F as z,B as K,C as f,k as X,l as g,o as c,A as E,z as P,e as N,t as b}from"./index-90cmhfpq.js";import{u as Z,r as n,m as ee}from"./i18n-validators-82Vw9KIo.js";import{a as oe,u as ae}from"./generic.services-UXrdyhxI.js";import{u as V}from"./useQuery-7_07upSr.js";import{c as re}from"./crud.services-IxzF5w0J.js";import{c as se,d as le}from"./manual.services-nOcwN5Y4.js";const ne={class:"manage section-height shadowed"},te={class:"manage__inner section-padding"},ye={__name:"create",async setup(de){let a,p;const F=oe(),S=X();j(),D();const{data:B,isSuccess:C,isLoading:M}=([a,p]=v(()=>V({queryKey:["organizations"],queryFn:()=>se()})),a=await a,p(),a),{data:q,isSuccess:O,isLoading:k}=([a,p]=v(()=>V({queryKey:["roles"],queryFn:()=>le()})),a=await a,p(),a),s=y({fullName:"",userName:"",password:"",phoneNumber:"",organizationId:[],roleId:[]}),R=J(()=>({fullName:{required:n},userName:{required:n},password:{required:n,minLength:ee},phoneNumber:{required:n},organizationId:{required:n},roleId:{required:n}})),r=Z(R,s),x=y([{id:1,model:"fullName",label:"employeesFullNameLabel",placeholder:"employeesFullNamePlaceholder",icon:"person",errorKey:"fullName"},{id:2,model:"userName",label:"employeesLoginLabel",placeholder:"employeesLoginPlaceholder",icon:"login",errorKey:"userName"},{id:3,model:"password",label:"employeesPasswordLabel",placeholder:"employeesPasswordPlaceholder",icon:"password",errorKey:"password"},{id:4,model:"phoneNumber",label:"employeesPhoneLabel",placeholder:"employeesPhonePlaceholder",icon:"phone",errorKey:"phoneNumber"}]),U=y([{id:1,model:"organizationId",label:"employeesOrganizationLabel",placeholder:"employeesOrganizationPlaceholder",errorKey:"organizationId",options:B,success:C,loading:M},{id:2,model:"roleId",label:"employeesRoleLabel",placeholder:"employeesRolePlaceholder",errorKey:"roleId",options:q,success:O,loading:k}]),{mutate:H}=ae({onMutate:o=>{o.organizationId=o.organizationId[0],o.roleId=o.roleId[0]},mutationFn:o=>re("user",o),onSuccess:()=>{F.invalidateQueries({queryKey:["employees"]}),S.push(E.EMPLOYEES.path)}}),Q=()=>{r.value.$validate(),!r.value.$errors.length&&(H(s.value),r.value.$reset())};return(o,ie)=>{var w,$;const T=g("ManageHead"),A=g("FormInput"),G=g("FormSelect"),Y=g("CustomButton");return c(),_("section",ne,[I("div",te,[L(T,{title:"addNewEmployeesTitle",to:l(E).EMPLOYEES.path},null,8,["to"]),I("form",{class:"manage__form form-manage",onSubmit:W(Q,["prevent"])},[(c(!0),_(z,null,K(x.value,e=>{var t,d,i,m,u;return c(),P(A,{key:e.id,modelValue:s.value[e.model],"onUpdate:modelValue":h=>s.value[e.model]=h,width:500,placeholder:o.$t(e.placeholder),name:e.icon,error:(d=(t=l(r))==null?void 0:t[e.errorKey])==null?void 0:d.$error,textError:(u=(m=(i=l(r))==null?void 0:i[e.errorKey])==null?void 0:m.$errors[0])==null?void 0:u.$message},{default:f(()=>[N(b(o.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),(c(!0),_(z,null,K(U.value,e=>{var t,d,i,m,u;return c(),P(G,{key:e.id,modelValue:s.value[e.model],"onUpdate:modelValue":h=>s.value[e.model]=h,width:500,options:e.options,error:(d=(t=l(r))==null?void 0:t[e==null?void 0:e.errorKey])==null?void 0:d.$error,placeholder:e==null?void 0:e.placeholder,textError:(u=(m=(i=l(r))==null?void 0:i[e==null?void 0:e.errorKey])==null?void 0:m.$errors[0])==null?void 0:u.$message,success:e.success,loading:e.loading},{default:f(()=>[N(b(o.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","options","error","placeholder","textError","success","loading"])}),128)),L(Y,{className:`form__submit ${($=(w=l(r))==null?void 0:w.roleId.$errors[0])!=null&&$.$message?"centered":""}`},{default:f(()=>[N(b(o.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{ye as default};
//# sourceMappingURL=create-qqygpvOL.js.map
