import{n as x,s as F,q as H,r as f,x as I,b as v,d as w,f as B,k as e,y as T,l,t as R,h as a,o as n,z as C}from"./index-F4UHGcq2.js";import{a as z,u as M}from"./generic.services-wQ89JmWC.js";import{u as j}from"./useQuery-ccCSBUF5.js";import{g as U,d as W}from"./crud.services-rreQBCQx.js";import{r as $}from"./index-V-M1nI8H.js";const G={class:"blocks section-height"},J={class:"blocks__inner section-padding"},X={class:"shadowed"},Y={key:2,class:"empty-table"},ne={__name:"index",async setup(Z){let s,i;const r=z(),d=x(),{setSearchValue:u}=d,{page:b,limit:m,search:E}=F(d);H(()=>{u("")});const _=f(""),k=$(E,500),q=f([{id:1,label:"blockName",width:185},{id:2,label:"blockObject",width:205},{id:3,label:"blockOrganization",width:260},{id:4,label:"blockFloors",width:230},{id:5,label:"blockRooms",width:235},{id:6,label:"blockAddress",width:150},{id:7,label:"blockState",width:140},{id:8,label:"blockAction",width:125}]),{data:o,isLoading:A,isSuccess:c,isError:O}=([s,i]=I(()=>j({queryKey:["blocks",{page:b,limit:m,debouncedSearch:k}],queryFn:()=>U("building_block",b.value,m.value,k.value)})),s=await s,i(),s),{mutate:D}=M({mutationFn:t=>W("building_block",t),onSuccess:()=>{r.invalidateQueries({queryKey:["blocks"]}),r.invalidateQueries({queryKey:["blocksById",_]})}}),K=async t=>{_.value=t,D(t)};return(t,p)=>{var h,y,S,g;const L=a("HeadPage"),P=a("Table"),N=a("Pagination"),Q=a("Spinner");return n(),v("section",G,[w("div",J,[B(L,{title:"blockTitle",to:e(C).CREATE_BLOCKS.path,onOnSearch:p[0]||(p[0]=V=>e(u)(V))},null,8,["to"]),w("div",X,[e(c)&&((h=e(o))!=null&&h.count)?(n(),T(P,{key:0,headers:q.value,table:(y=e(o))==null?void 0:y.blocks,to:e(C).UPDATE_BLOCKS.name,onOnActionDelete:K},null,8,["headers","table","to"])):l("",!0),B(N,{count:(S=e(o))==null?void 0:S.count,isSucces:e(c),isEmpty:!!((g=e(o))!=null&&g.count)},null,8,["count","isSucces","isEmpty"]),e(A)?(n(),T(Q,{key:1})):l("",!0),e(c)&&!e(o).count||e(O)?(n(),v("div",Y,R(t.$t("emptyTableTitle")),1)):l("",!0)])])])}}};export{ne as default};
//# sourceMappingURL=index-FPeA7dpG.js.map
