import{a as T,u as A}from"./generic.services-IUo_5k7Q.js";import{u as O}from"./useQuery-yKTXc9P8.js";import{g as q,d as E}from"./crud.services-E23_VVYO.js";import{r as l,x as K,b as k,d as L,f as D,k as e,y as _,l as n,t as N,h as i,o as s,z as m}from"./index-X9jUMaLK.js";const Q={class:"blocks section-height"},x={class:"blocks__inner section-padding"},F={key:2,class:"empty-table"},R={__name:"index",async setup(H){let o,c;const r=T(),h=l(""),d=l(""),p=l([{id:1,label:"blockName",width:185},{id:2,label:"blockObject",width:205},{id:3,label:"blockOrganization",width:260},{id:4,label:"blockFloors",width:230},{id:5,label:"blockRooms",width:235},{id:6,label:"blockAddress",width:150},{id:7,label:"blockState",width:140},{id:8,label:"blockAction",width:125}]),{data:a,isLoading:y,isSuccess:u,isError:g}=([o,c]=K(()=>O({queryKey:["blocks"],queryFn:()=>q("building_block")})),o=await o,c(),o),{mutate:w}=A({mutationFn:t=>E("building_block",t),onSuccess:()=>{r.invalidateQueries({queryKey:["blocks"]}),r.invalidateQueries({queryKey:["blocksById",d]})}}),S=async t=>{d.value=t,w(t)};return(t,b)=>{const f=i("HeadPage"),B=i("Table"),v=i("Spinner");return s(),k("section",Q,[L("div",x,[D(f,{title:"blockTitle",to:e(m).CREATE_BLOCKS.path,onOnSearch:b[0]||(b[0]=C=>h.value=C)},null,8,["to"]),e(u)&&e(a).length?(s(),_(B,{key:0,headers:p.value,table:e(a),to:e(m).UPDATE_BLOCKS.name,onOnActionDelete:S},null,8,["headers","table","to"])):n("",!0),e(y)?(s(),_(v,{key:1})):n("",!0),e(u)&&!e(a).length||e(g)?(s(),k("div",F,N(t.$t("emptyTableTitle")),1)):n("",!0)])])}}};export{R as default};
//# sourceMappingURL=index-um3eW4PT.js.map
