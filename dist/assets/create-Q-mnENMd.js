import{u as K,a as M,r as f,c as T,b as g,d as h,f as v,k as r,w as q,F as U,e as x,B as $,g as D,h as s,o as n,A as y,z as E,i as I,t as B}from"./index-xEhNh2bJ.js";import{u as H,r as C}from"./i18n-validators-6dxtFobU.js";import{a as Q,u as R}from"./generic.services-cTEduup6.js";import{c as L}from"./crud.services-QxvbF8R1.js";const O={class:"manage section-height shadowed"},A={class:"manage__inner section-padding"},Z={__name:"create",setup(j){const l=Q(),V=D();K(),M();const o=f({fullname:"",organizationId:""}),b=T(()=>({fullname:{required:C},organizationId:{required:C}})),t=H(b,o),w=f([{id:1,model:"fullname",label:"nameProductsLabel",placeholder:"nameProductsPlaceholder",icon:"pen",errorKey:"fullname"}]),{mutate:z}=R({mutationFn:a=>L("construction_material",a),onSuccess:()=>{l.invalidateQueries({queryKey:["products"]}),l.invalidateQueries({queryKey:["materials"]}),V.push(y.PRODUCTS.path)}}),N=()=>{const a=localStorage.getItem("organizationId");o.value.organizationId=a,t.value.$validate(),!t.value.$errors.length&&(z(o.value),t.value.$reset())};return(a,G)=>{var u,c;const P=s("ManageHead"),S=s("FormInput"),k=s("CustomButton");return n(),g("section",O,[h("div",A,[v(P,{title:"addNewProductTitle",to:r(y).PRODUCTS.path},null,8,["to"]),h("form",{class:"manage__form form-manage",onSubmit:q(N,["prevent"])},[(n(!0),g(U,null,x(w.value,e=>{var m,d,i,p,_;return n(),E(S,{key:e.id,modelValue:o.value[e.model],"onUpdate:modelValue":F=>o.value[e.model]=F,width:500,placeholder:a.$t(e.placeholder),name:e.icon,error:(d=(m=r(t))==null?void 0:m[e.errorKey])==null?void 0:d.$error,textError:(_=(p=(i=r(t))==null?void 0:i[e.errorKey])==null?void 0:p.$errors[0])==null?void 0:_.$message},{default:$(()=>[I(B(a.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),v(k,{className:`form__submit ${(c=(u=r(t))==null?void 0:u.fullname.$errors[0])!=null&&c.$message?"centered":""}`},{default:$(()=>[I(B(a.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{Z as default};
//# sourceMappingURL=create-Q-mnENMd.js.map
