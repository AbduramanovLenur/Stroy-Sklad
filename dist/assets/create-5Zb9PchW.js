import{u as P,a as D,b as I,y as L,c as v,r as E,d as N,e as y,k as g,h as o,w as Q,F as R,C as U,D as $,i as X,l as A,m as l,o as u,s as S,A as j,f as C,t as V,H as z,E as G}from"./index-LDvRrg0d.js";import{u as J,r as O}from"./i18n-validators-6o0ua4sm.js";import{a as W,u as Y}from"./generic.services-jYyLWUuf.js";import{c as Z}from"./crud.services-mTGUrJGu.js";const ee={key:0,class:"manage section-height shadowed"},ae={class:"manage__inner section-padding"},le={__name:"create",setup(se){const c=W(),b=A();P(),D();const w=I(),{user:r}=L(w),x=v(()=>{var e,n;return!!((n=(e=r==null?void 0:r.value.user)==null?void 0:e.modules)!=null&&n.includes(z.EXPENS.CREATE))}),s=E({fullName:""}),B=v(()=>({fullName:{required:O}})),t=J(B,s),k=E([{id:1,model:"fullName",label:"nameExpensesLabel",placeholder:"nameExpensesPlaceholder",icon:"input-company",errorKey:"fullName"}]),{mutate:M}=Y({mutationFn:e=>Z("cost",e),onSuccess:e=>{s.value=G(s.value),c.invalidateQueries({queryKey:["expenses"]}),c.invalidateQueries({queryKey:["costsList"]}),b.push(S.EXPENS.path)}}),F=()=>{if(t.value.$validate(),t.value.$errors.length)return;const e={...s.value};M(e),t.value.$reset()};return(e,n)=>{var m,d;const K=l("ManageHead"),T=l("FormInput"),q=l("CustomButton");return x.value?(u(),N("section",ee,[y("div",ae,[g(K,{title:"addNewExpensesTitle",to:o(S).EXPENS.path},null,8,["to"]),y("form",{class:"manage__form form-manage",onSubmit:Q(F,["prevent"])},[(u(!0),N(R,null,U(k.value,a=>{var i,p,f,_,h;return u(),j(T,{key:a.id,modelValue:s.value[a.model],"onUpdate:modelValue":H=>s.value[a.model]=H,width:500,placeholder:e.$t(a.placeholder),name:a.icon,error:(p=(i=o(t))==null?void 0:i[a.errorKey])==null?void 0:p.$error,textError:(h=(_=(f=o(t))==null?void 0:f[a.errorKey])==null?void 0:_.$errors[0])==null?void 0:h.$message},{default:$(()=>[C(V(e.$t(a.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),g(q,{className:`form__submit ${(d=(m=o(t))==null?void 0:m.fullName.$errors[0])!=null&&d.$message?"centered":""}`},{default:$(()=>[C(V(e.$t("formButton")),1)]),_:1},8,["className"])],32)])])):X("",!0)}}};export{le as default};
