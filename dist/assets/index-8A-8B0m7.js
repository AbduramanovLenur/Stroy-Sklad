import{n as E,s as N,r as c,q as O,x as Q,y as R,b as v,d as V,f as x,k as e,z as T,l as i,t as H,h as u,o as n,A as P}from"./index-qu9jH8U4.js";import{a as K,u as L}from"./generic.services-TvKn_bvi.js";import{u as U}from"./useQuery-HXp8dDXQ.js";import{g as F,d as M}from"./crud.services-RAdlH-I4.js";import{r as W}from"./index-r1nzloiF.js";const $={class:"products"},j={class:"products__inner section-padding"},G={key:2,class:"empty-table"},oe={__name:"index",async setup(J){let o,l;const d=K(),p=E(),{setSearchValue:m,setPagePagination:C}=p,{page:_,limit:y,search:g}=N(p),h=c(localStorage.getItem("organizationId"));O(()=>{m("")}),Q(g,()=>{C(1)});const S=c(""),b=W(g,500),k=c([{id:1,label:"productsName",width:725},{id:4,label:"productsState",width:365},{id:5,label:"productsAction",width:440}]),{data:r,isLoading:D,isSuccess:f,isError:I}=([o,l]=R(()=>U({queryKey:["products",{page:_,limit:y,debouncedSearch:b,organizationId:h}],queryFn:()=>F("construction_material",_.value,y.value,b.value,{organizationId:h.value}),select:t=>t.map(a=>{const s={...a};return delete s.organizationName,s})})),o=await o,l(),o),{mutate:q}=L({mutationFn:t=>M("construction_material",t),onSuccess:()=>{d.invalidateQueries({queryKey:["products"]}),d.invalidateQueries({queryKey:["productsById",S]})}}),w=async t=>{S.value=t,q(t)};return(t,a)=>{const s=u("HeadPage"),A=u("Table"),z=u("Spinner");return n(),v("section",$,[V("div",j,[x(s,{title:"productsTitle",to:e(P).CREATE_PRODUCTS.path,onOnSearch:a[0]||(a[0]=B=>e(m)(B))},null,8,["to"]),e(f)&&e(r).length?(n(),T(A,{key:0,headers:k.value,table:e(r),to:e(P).UPDATE_PRODUCTS.name,onOnActionDelete:w},null,8,["headers","table","to"])):i("",!0),e(D)?(n(),T(z,{key:1})):i("",!0),e(f)&&!e(r).length||e(I)?(n(),v("div",G,H(t.$t("emptyTableTitle")),1)):i("",!0)])])}}};export{oe as default};
//# sourceMappingURL=index-8A-8B0m7.js.map
