import{_ as I,u as N,a as C,b as E,y as V,c as x,z,d as w,e as o,k as y,A,t as c,h as e,B as b,i as r,m as n,o as l,f as D,H as L}from"./index-Bee0eIFu.js";import{j as $}from"./crud.services-wQgdXoj4.js";import{u as q}from"./useQuery-wCvH6pxH.js";import"./generic.services-G3ATixRD.js";const F={key:0,class:"reports"},M={class:"reports__inner"},O={class:"reports__head shadowed"},Q={class:"reports__download",href:"#"},U={class:"reports__download-icon"},j={class:"reports__download-value"},H={key:2,class:"empty-table shadowed"},K={__name:"reports",async setup(P){let a,p;N(),C();const f=E(),{user:t}=V(f),_=x(()=>{var s,d;return!!((d=(s=t==null?void 0:t.value.user)==null?void 0:s.modules)!=null&&d.includes(L.REPORTS.READ))}),S=[{id:1,label:"reportsMaterial",width:30},{id:2,label:"reportsQuantity",width:10},{id:3,label:"reportsObyekt",width:20},{id:4,label:"reportsBlock",width:20},{id:5,label:"reportsFloor",width:10},{id:6,label:"reportsBudget",width:10}],{data:i,isLoading:k,isSuccess:u,isError:T}=([a,p]=z(()=>q({queryKey:["reports",{organizationId:t.value.user.organizationId,name:t.value.user.fullName}],queryFn:()=>$(),enabled:_})),a=await a,p(),a);return(s,d)=>{var h,m;const g=n("Title"),v=n("Icon"),B=n("Table"),R=n("Spinner");return _.value?(l(),w("section",F,[o("div",M,[o("div",O,[y(g,null,{default:A(()=>[D(`\r
                    `+c(s.$t("reportsTitle"))+`\r
                `,1)]),_:1}),o("a",Q,[o("span",U,[y(v,{name:"download"})]),o("span",j,c(s.$t("downloadLink")),1)])]),e(u)&&((h=e(i))!=null&&h.length)?(l(),b(B,{key:0,headers:S,table:e(i),options:{page:1,limit:10},isShowUpdate:!1,isShowDelete:!1,isShowState:!1},null,8,["table"])):r("",!0),e(k)?(l(),b(R,{key:1})):r("",!0),e(u)&&!((m=e(i))!=null&&m.length)||e(T)?(l(),w("div",H,c(s.$t("emptyTableTitle")),1)):r("",!0)])])):r("",!0)}}},Y=I(K,[["__scopeId","data-v-d0e12e50"]]);export{Y as default};
