import{u as H,a as j,y as N,r as _,c as J,b as f,d as z,f as K,B as p,w as W,F as I,e as O,k as d,g as X,h as g,o as u,i as h,t as y,z as L,A as Y}from"./index-qu9jH8U4.js";import{u as Z,r as n}from"./i18n-validators-18WrXdQ3.js";import{a as ee,u as re}from"./generic.services-TvKn_bvi.js";import{u as V}from"./useQuery-HXp8dDXQ.js";import{c as oe}from"./crud.services-RAdlH-I4.js";import{m as ae,a as ne}from"./manual.services-HqI37590.js";const se={class:"manage section-height shadowed"},te={class:"manage__inner section-padding"},he={__name:"create",async setup(ie){let r,c;const w=ee(),S=X();H(),j();const{data:C,isSuccess:F,isLoading:B}=([r,c]=N(()=>V({queryKey:["regions"],queryFn:()=>ae()})),r=await r,c(),r),{data:q,isSuccess:k,isLoading:E}=([r,c]=N(()=>V({queryKey:["districts"],queryFn:()=>ne()})),r=await r,c(),r),s=_({fullName:"",inn:"",address:"",phoneNumber:"",director:"",regionId:"",districtId:""}),P=J(()=>({fullName:{required:n},inn:{required:n},address:{required:n},phoneNumber:{required:n},director:{required:n},regionId:{required:n},districtId:{required:n}})),o=Z(P,s),T=_([{id:1,model:"fullName",label:"nameOrganizationLabel",placeholder:"nameOrganizationPlaceholder",icon:"input-company",errorKey:"fullName"},{id:2,model:"inn",label:"innOrganizationLabel",placeholder:"innOrganizationPlaceholder",icon:"tin",errorKey:"inn"},{id:3,model:"address",label:"addressOrganizationLabel",placeholder:"addressOrganizationPlaceholder",icon:"address",errorKey:"address"},{id:4,model:"phoneNumber",label:"phoneOrganizationLabel",placeholder:"phoneOrganizationPlaceholder",icon:"phone",errorKey:"phoneNumber"},{id:5,model:"director",label:"directorOrganizationLabel",placeholder:"directorOrganizationPlaceholder",icon:"person",errorKey:"director"}]),x=_([{id:1,model:"regionId",label:"regionOrganizationLabel",options:C,success:F,loading:B,errorKey:"regionId"},{id:2,model:"districtId",label:"districtOrganizationLabel",options:q,success:k,loading:E,errorKey:"districtId"}]),{mutate:D}=re({mutationFn:a=>oe("organization",a),onSuccess:()=>{w.invalidateQueries({queryKey:["companies"]}),S.push(Y.COMPANIES.path)}}),M=()=>{o.value.$validate(),!o.value.$errors.length&&(D(s.value),o.value.$reset())};return(a,le)=>{var b,$;const R=g("Title"),U=g("FormInput"),A=g("FormSelect"),Q=g("CustomButton");return u(),f("section",se,[z("div",te,[K(R,null,{default:p(()=>[h(`\r
                `+y(a.$t("addNewCompanyTitle"))+`\r
            `,1)]),_:1}),z("form",{class:"manage__form form-manage",onSubmit:W(M,["prevent"])},[(u(!0),f(I,null,O(T.value,e=>{var t,i,l;return u(),L(U,{key:e.id,modelValue:s.value[e.model],"onUpdate:modelValue":m=>s.value[e.model]=m,width:500,placeholder:a.$t(e.placeholder),name:e.icon,error:(t=d(o))==null?void 0:t[e.errorKey].$error,textError:(l=(i=d(o))==null?void 0:i[e.errorKey].$errors[0])==null?void 0:l.$message},{default:p(()=>[h(y(a.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),(u(!0),f(I,null,O(x.value,e=>{var t,i,l,m,v;return u(),L(A,{key:e.id,modelValue:s.value[e.model],"onUpdate:modelValue":G=>s.value[e.model]=G,width:500,options:e.options,error:(i=(t=d(o))==null?void 0:t[e==null?void 0:e.errorKey])==null?void 0:i.$error,textError:(v=(m=(l=d(o))==null?void 0:l[e==null?void 0:e.errorKey])==null?void 0:m.$errors[0])==null?void 0:v.$message,success:e.success,loading:e.loading},{default:p(()=>[h(y(a.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","options","error","textError","success","loading"])}),128)),K(Q,{className:`form__submit ${($=(b=d(o))==null?void 0:b.districtId.$errors[0])!=null&&$.$message?"centered":""}`},{default:p(()=>[h(y(a.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{he as default};
//# sourceMappingURL=create-AND2iQiW.js.map
