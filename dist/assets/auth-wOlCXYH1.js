import{_ as N,u as k,a as L,r as g,c as V,b as i,d as a,t as u,w as z,F as D,e as B,f as F,g as K,h as M,o as m,i as T,j as P,v as U,k as v,l as q,p as C,m as H}from"./index-x0me4eeV.js";import{u as O,r as f,m as j}from"./i18n-validators-N3krClQx.js";import{r as x,u as E}from"./generic.services-3OPQu4nG.js";const R="/assets/logo-auth-H25DvOh-.svg",A=o=>{const r={...o};for(const _ in r)r[_]="";return r},G=o=>x({url:"account/Login",method:"POST",body:o}),J=o=>(C("data-v-dac5398e"),o=o(),H(),o),Q={class:"auth"},W={class:"container"},X={class:"auth__inner"},Y={class:"auth__wrapper"},Z=J(()=>a("div",{class:"auth__logo"},[a("img",{src:R,alt:"logo",width:"415",height:"80",loading:"lazy"})],-1)),ee={class:"auth__title"},ae=["type","onUpdate:modelValue","name","placeholder"],oe={key:0,class:"error-white"},se={class:"auth__submit",type:"submit"},te={__name:"auth",setup(o){const r=K(),_=k(),{t:w}=L(),t=g({userName:"",password:""}),y=V(()=>({userName:{required:f},password:{required:f,minLength:j}})),l=O(y,t),I=g([{id:1,label:"loginLabel",type:"text",model:"userName",name:"login",placeholder:"loginPlaceholder",errorKey:"userName"},{id:2,label:"passwordLabel",type:"password",model:"password",name:"password",placeholder:"passwordPlaceholder",errorKey:"password"}]),{mutate:S}=E({mutationFn:s=>G(s),onSuccess:s=>{const{token:p,user:{role:h,fullName:e,organizationName:n,organizationId:c,roleId:d}}=s;localStorage.setItem("token",p),localStorage.setItem("name",e),localStorage.setItem("role",h),localStorage.setItem("organization",n),localStorage.setItem("organizationId",c),localStorage.setItem("roleId",d),r.push("/"),_.success(w("signInToast")),t.value=A(t.value),l.value.$reset()}}),b=()=>{l.value.$validate(),!l.value.$errors.length&&S(t.value)};return(s,p)=>{const h=M("SwitcherLang");return m(),i("section",Q,[a("div",W,[a("div",X,[a("div",Y,[Z,a("h2",ee,u(s.$t("login")),1),a("form",{class:"auth__form",onSubmit:z(b,["prevent"])},[(m(!0),i(D,null,B(I.value,e=>{var n,c,d;return m(),i("label",{key:e.id,class:"auth__label"},[T(u(s.$t(e.label))+" ",1),P(a("input",{class:"auth__input",type:e.type,"onUpdate:modelValue":$=>t.value[e.model]=$,name:e.name,placeholder:s.$t(e.placeholder)},null,8,ae),[[U,t.value[e.model]]]),(n=v(l))!=null&&n[e.errorKey].$error?(m(),i("span",oe,u((d=(c=v(l))==null?void 0:c[e.errorKey].$errors[0])==null?void 0:d.$message),1)):q("",!0)])}),128)),a("button",se,u(s.$t("loginButton")),1)],32),F(h)])])])])}}},ce=N(te,[["__scopeId","data-v-dac5398e"]]);export{ce as default};
//# sourceMappingURL=auth-wOlCXYH1.js.map
