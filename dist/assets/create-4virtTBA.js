import{u as G,a as J,r as y,z as T,c as X,d as _,e as w,k as S,h as s,w as Y,F as V,C as K,D as g,l as Z,m as p,o as m,B as C,A as E,f as q,t as f}from"./index-8f2nY-tA.js";import{u as ee,r as I}from"./i18n-validators-fCwa1ZSs.js";import{a as ae,u as te}from"./generic.services-2-3LJT-B.js";import{u as F}from"./useQuery-eGcy0OjN.js";import{c as re}from"./crud.services-swolhUoO.js";import{g as oe,h as se}from"./manual.services-mSBZeXJB.js";const ne={class:"manage section-height shadowed"},ue={class:"manage__inner section-padding"},_e={__name:"create",async setup(le){let t,c;const M=ae(),b=Z();G(),J();const B=y(localStorage.getItem("organizationId")),{data:L,isSuccess:W,isLoading:k}=([t,c]=T(()=>F({queryKey:["types"],queryFn:()=>oe()})),t=await t,c(),t),{data:N,isSuccess:Q,isLoading:U}=([t,c]=T(()=>F({queryKey:["materials",{organizationId:B}],queryFn:()=>se()})),t=await t,c(),t),o=y({materialId:[],quantity:"",quantityTypeId:[]}),x=X(()=>({materialId:{required:I},quantity:{required:I},quantityTypeId:{required:I}})),r=ee(x,o),H=y([{id:1,model:"quantity",label:"quantityWarehouseLabel",placeholder:"quantityWarehousePlaceholder",icon:"list",errorKey:"quantity"}]),A=y([{id:1,model:"materialId",label:"materialsWarehouseLabel",placeholder:"materialsWarehousePlaceholder",errorKey:"materialId",options:N,success:Q,loading:U},{id:2,model:"quantityTypeId",label:"qunatityTypesWarehouseLabel",placeholder:"qunatityTypesWarehousePlaceholder",errorKey:"quantityTypeId",options:L,success:W,loading:k}]),{mutate:P}=te({onMutate:a=>{a.materialId=a.materialId[0],a.quantityTypeId=a.quantityTypeId[0]},mutationFn:a=>re("warehouse",a),onSuccess:()=>{M.invalidateQueries({queryKey:["warehouse"]}),b.push(C.WAREHOUSE.path)}}),z=()=>{r.value.$validate(),!r.value.$errors.length&&(P(o.value),r.value.$reset())};return(a,ie)=>{var $,v;const R=p("ManageHead"),D=p("FormInput"),O=p("FormSelect"),j=p("CustomButton");return m(),_("section",ne,[w("div",ue,[S(R,{title:"addNewProductTitle",to:s(C).WAREHOUSE.path},null,8,["to"]),w("form",{class:"manage__form form-manage",onSubmit:Y(z,["prevent"])},[(m(!0),_(V,null,K(H.value,e=>{var n,u,l,i,d;return m(),E(D,{key:e.id,modelValue:o.value[e.model],"onUpdate:modelValue":h=>o.value[e.model]=h,width:500,placeholder:a.$t(e.placeholder),name:e.icon,error:(u=(n=s(r))==null?void 0:n[e.errorKey])==null?void 0:u.$error,textError:(d=(i=(l=s(r))==null?void 0:l[e.errorKey])==null?void 0:i.$errors[0])==null?void 0:d.$message},{default:g(()=>[q(f(a.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),(m(!0),_(V,null,K(A.value,e=>{var n,u,l,i,d;return m(),E(O,{key:e.id,modelValue:o.value[e.model],"onUpdate:modelValue":h=>o.value[e.model]=h,width:500,options:e.options,error:(u=(n=s(r))==null?void 0:n[e==null?void 0:e.errorKey])==null?void 0:u.$error,placeholder:e==null?void 0:e.placeholder,textError:(d=(i=(l=s(r))==null?void 0:l[e==null?void 0:e.errorKey])==null?void 0:i.$errors[0])==null?void 0:d.$message,success:e.success,loading:e.loading},{default:g(()=>[q(f(a.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","options","error","placeholder","textError","success","loading"])}),128)),S(j,{className:`form__submit ${(v=($=s(r))==null?void 0:$.quantityTypeId.$errors[0])!=null&&v.$message?"centered":""}`},{default:g(()=>[q(f(a.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{_e as default};
//# sourceMappingURL=create-4virtTBA.js.map
