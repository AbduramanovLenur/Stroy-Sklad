import{q as G,s as W,b as J,c as X,r as k,x as Y,d as O,e as Z,k as q,h as e,y as P,i as n,t as ee,m as r,o as u,z as Q,E as i}from"./index-YWoyi3P5.js";import{a as se,u as te}from"./generic.services-k4FTnzsm.js";import{u as oe}from"./useQuery-cUByw4Jp.js";import{g as ae,d as ne}from"./crud.services-lAAT8oXP.js";import{r as re}from"./index-SwZqc-vw.js";const ue={key:0,class:"warehouse"},ie={class:"warehouse__inner section-padding"},ce={key:2,class:"empty-table shadowed"},we={__name:"index",async setup(le){let o,m;const p=se(),B=G(),{page:c,limit:l,search:I}=W(B),L=J(),{user:t}=W(L),_=X(()=>{var s,h;return!!((h=(s=t==null?void 0:t.value.user)==null?void 0:s.modules)!=null&&h.includes(i.WAREHOUSE.READ))}),w=k(""),S=re(I,500),N=k([{id:1,label:"warehouseName",width:440},{id:2,label:"warehouseQuantity",width:445},{id:3,label:"warehouseQuantityType",width:205}]),{data:a,isLoading:x,isSuccess:d,isError:z}=([o,m]=Y(()=>oe({queryKey:["warehouse",{page:c,limit:l,debouncedSearch:S,organizationId:t.value.user.organizationId}],queryFn:()=>ae("warehouse",c.value,l.value,S.value),enabled:_})),o=await o,m(),o),{mutate:K}=te({mutationFn:s=>ne("warehouse",s),onSuccess:()=>{p.invalidateQueries({queryKey:["warehouse"]}),p.invalidateQueries({queryKey:["warehouseById",w]})}}),V=async s=>{w.value=s,K(s)};return(s,h)=>{var y,E,b,g,v,A,T,f,U,D,R,C,H;const F=r("HeadPage"),M=r("Table"),$=r("Pagination"),j=r("Spinner");return _.value?(u(),O("section",ue,[Z("div",ie,[q(F,{title:"warehouseTitle",to:e(Q).CREATE_WAREHOUSE.path,isShowCreate:(b=(E=(y=e(t))==null?void 0:y.user)==null?void 0:E.modules)==null?void 0:b.includes(e(i).WAREHOUSE.CREATE)},null,8,["to","isShowCreate"]),e(d)&&((g=e(a))!=null&&g.count)?(u(),P(M,{key:0,headers:N.value,table:(v=e(a))==null?void 0:v.warehouse,to:e(Q).UPDATE_WAREHOUSE.name,options:{page:e(c),limit:e(l)},isShowUpdate:(f=(T=(A=e(t))==null?void 0:A.user)==null?void 0:T.modules)==null?void 0:f.includes(e(i).WAREHOUSE.UPDATE),isShowDelete:(R=(D=(U=e(t))==null?void 0:U.user)==null?void 0:D.modules)==null?void 0:R.includes(e(i).WAREHOUSE.DELETE),onOnActionDelete:V},null,8,["headers","table","to","options","isShowUpdate","isShowDelete"])):n("",!0),q($,{count:(C=e(a))==null?void 0:C.count,isSucces:e(d)},null,8,["count","isSucces"]),e(x)?(u(),P(j,{key:1})):n("",!0),e(d)&&!((H=e(a))!=null&&H.count)||e(z)?(u(),O("div",ce,ee(s.$t("emptyTableTitle")),1)):n("",!0)])])):n("",!0)}}};export{we as default};
//# sourceMappingURL=index-8d7YdTkk.js.map
