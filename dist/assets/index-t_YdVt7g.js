import{n as R,s as V,r as c,q as x,x as K,y as L,b as E,d as U,f as A,k as e,z as k,l,t as F,h as s,o as n,A as I}from"./index-TSEQ-eOA.js";import{a as M,u as $}from"./generic.services-DL6v4nvc.js";import{u as j}from"./useQuery-LbR7akY7.js";import{g as G,d as J}from"./crud.services-TcfslZre.js";import{r as X}from"./index-iqNYHYNl.js";const Y={class:"warehouse"},Z={class:"warehouse__inner section-padding"},ee={key:2,class:"empty-table shadowed"},ie={__name:"index",async setup(te){let a,d;const h=M(),m=R(),{setSearchValue:p,setPagePagination:P}=m,{page:r,limit:i,search:_}=V(m),w=c(localStorage.getItem("organizationId"));x(()=>{p("")}),K(_,()=>{P(1)});const y=c(""),g=X(_,500),q=c([{id:1,label:"warehouseName",width:340},{id:2,label:"warehouseQuantity",width:345},{id:3,label:"warehouseQuantityType",width:160},{id:4,label:"warehouseOrganization",width:345},{id:5,label:"warehouseState"},{id:6,label:"warehouseAction"}]),{data:o,isLoading:C,isSuccess:u,isError:Q}=([a,d]=L(()=>j({queryKey:["warehouse",{page:r,limit:i,debouncedSearch:g,organizationId:w}],queryFn:()=>G("warehouse",r.value,i.value,g.value,{organizationId:w.value})})),a=await a,d(),a),{mutate:z}=$({mutationFn:t=>J("warehouse",t),onSuccess:()=>{h.invalidateQueries({queryKey:["warehouse"]}),h.invalidateQueries({queryKey:["warehouseById",y]})}}),B=async t=>{y.value=t,z(t)};return(t,b)=>{var S,f,v,T;const D=s("HeadPage"),H=s("Table"),O=s("Pagination"),W=s("Spinner");return n(),E("section",Y,[U("div",Z,[A(D,{title:"warehouseTitle",to:e(I).CREATE_WAREHOUSE.path,onOnSearch:b[0]||(b[0]=N=>e(p)(N))},null,8,["to"]),e(u)&&((S=e(o))!=null&&S.count)?(n(),k(H,{key:0,headers:q.value,table:(f=e(o))==null?void 0:f.warehouse,to:e(I).UPDATE_WAREHOUSE.name,options:{page:e(r),limit:e(i)},onOnActionDelete:B},null,8,["headers","table","to","options"])):l("",!0),A(O,{count:(v=e(o))==null?void 0:v.count,isSucces:e(u)},null,8,["count","isSucces"]),e(C)?(n(),k(W,{key:1})):l("",!0),e(u)&&!((T=e(o))!=null&&T.count)||e(Q)?(n(),E("div",ee,F(t.$t("emptyTableTitle")),1)):l("",!0)])])}}};export{ie as default};
//# sourceMappingURL=index-t_YdVt7g.js.map
