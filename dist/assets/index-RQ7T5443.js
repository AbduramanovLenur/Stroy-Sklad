import{n as B,s as E,r as c,q as N,x as O,b as f,d as Q,f as R,k as e,y as v,l as i,t as V,h as u,o as n,z as T}from"./index-4J3DJU33.js";import{a as x,u as H}from"./generic.services-g-yxowqL.js";import{u as K}from"./useQuery-vRA_EPsL.js";import{g as L,d as U}from"./crud.services-6dsbqkZk.js";import{r as F}from"./index-SHLDJmel.js";const M={class:"products section-height"},W={class:"products__inner section-padding"},$={key:2,class:"empty-table"},ee={__name:"index",async setup(j){let o,l;const d=x(),p=B(),{setSearchValue:m}=p,{page:_,limit:y,search:C}=E(p),h=c(localStorage.getItem("organizationId"));N(()=>{m("")});const g=c(""),S=F(C,500),k=c([{id:1,label:"productsName",width:725},{id:4,label:"productsState",width:365},{id:5,label:"productsAction",width:440}]),{data:r,isLoading:D,isSuccess:b,isError:I}=([o,l]=O(()=>K({queryKey:["products",{page:_,limit:y,debouncedSearch:S,organizationId:h}],queryFn:()=>L("construction_material",_.value,y.value,S.value,{organizationId:h.value}),select:t=>t.map(s=>{const a={...s};return delete a.organizationName,a})})),o=await o,l(),o),{mutate:P}=H({mutationFn:t=>U("construction_material",t),onSuccess:()=>{d.invalidateQueries({queryKey:["products"]}),d.invalidateQueries({queryKey:["productsById",g]})}}),q=async t=>{g.value=t,P(t)};return(t,s)=>{const a=u("HeadPage"),w=u("Table"),z=u("Spinner");return n(),f("section",M,[Q("div",W,[R(a,{title:"productsTitle",to:e(T).CREATE_PRODUCTS.path,onOnSearch:s[0]||(s[0]=A=>e(m)(A))},null,8,["to"]),e(b)&&e(r).length?(n(),v(w,{key:0,headers:k.value,table:e(r),to:e(T).UPDATE_PRODUCTS.name,onOnActionDelete:q},null,8,["headers","table","to"])):i("",!0),e(D)?(n(),v(z,{key:1})):i("",!0),e(b)&&!e(r).length||e(I)?(n(),f("div",$,V(t.$t("emptyTableTitle")),1)):i("",!0)])])}}};export{ee as default};
//# sourceMappingURL=index-RQ7T5443.js.map
