import{n as N,s as O,q as Q,r as S,x as R,b as g,d as f,f as V,k as e,y as v,l as c,t as x,h as i,o as n,z as T}from"./index-F4UHGcq2.js";import{a as H,u as I}from"./generic.services-wQ89JmWC.js";import{u as K}from"./useQuery-ccCSBUF5.js";import{g as L,d as U}from"./crud.services-rreQBCQx.js";import{r as z}from"./index-V-M1nI8H.js";const F={class:"products section-height"},M={class:"products__inner section-padding"},W={class:"shadowed"},$={key:2,class:"empty-table"},ee={__name:"index",async setup(j){let s,u;const d=H(),l=N(),{setSearchValue:p}=l,{page:m,limit:_,search:C}=O(l);Q(()=>{p("")});const h=S(""),y=z(C,500),k=S([{id:1,label:"productsName",width:725},{id:4,label:"productsState",width:365},{id:5,label:"productsAction",width:440}]),{data:r,isLoading:D,isSuccess:b,isError:P}=([s,u]=R(()=>K({queryKey:["products",{page:m,limit:_,debouncedSearch:y}],queryFn:()=>L("construction_material",m.value,_.value,y.value),select:t=>t.map(o=>{const a={...o};return delete a.organizationName,a})})),s=await s,u(),s),{mutate:q}=I({mutationFn:t=>U("construction_material",t),onSuccess:()=>{d.invalidateQueries({queryKey:["products"]}),d.invalidateQueries({queryKey:["productsById",h]})}}),w=async t=>{h.value=t,q(t)};return(t,o)=>{const a=i("HeadPage"),A=i("Table"),B=i("Spinner");return n(),g("section",F,[f("div",M,[V(a,{title:"productsTitle",to:e(T).CREATE_PRODUCTS.path,onOnSearch:o[0]||(o[0]=E=>e(p)(E))},null,8,["to"]),f("div",W,[e(b)&&e(r).length?(n(),v(A,{key:0,headers:k.value,table:e(r),to:e(T).UPDATE_PRODUCTS.name,onOnActionDelete:w},null,8,["headers","table","to"])):c("",!0),e(D)?(n(),v(B,{key:1})):c("",!0),e(b)&&!e(r).length||e(P)?(n(),g("div",$,x(t.$t("emptyTableTitle")),1)):c("",!0)])])])}}};export{ee as default};
//# sourceMappingURL=index-tdmC9DPC.js.map
