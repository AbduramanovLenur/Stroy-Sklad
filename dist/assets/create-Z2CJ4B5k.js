import{u as M,a as T,r as s,c as q,b as g,d as h,f as v,k as r,w as U,F as x,e as D,B as $,g as E,h as n,o as l,A as y,z as H,i as B,t as C}from"./index-rVcEkfs7.js";import{u as Q,r as I}from"./i18n-validators-9lIM3i5c.js";import{a as R,u as L}from"./generic.services-VYFQaCza.js";import{c as O}from"./crud.services-eAS52g5X.js";const A={class:"manage section-height shadowed"},j={class:"manage__inner section-padding"},ee={__name:"create",setup(G){const u=R(),V=E();M(),T();const b=s(localStorage.getItem("organizationId")),o=s({fullname:"",organizationId:b.value}),w=q(()=>({fullname:{required:I},organizationId:{required:I}})),a=Q(w,o),N=s([{id:1,model:"fullname",label:"nameProductsLabel",placeholder:"nameProductsPlaceholder",icon:"pen",errorKey:"fullname"}]),{mutate:P}=L({mutationFn:t=>O("construction_material",t),onSuccess:()=>{u.invalidateQueries({queryKey:["products"]}),u.invalidateQueries({queryKey:["materials"]}),V.push(y.PRODUCTS.path)}}),S=()=>{a.value.$validate(),!a.value.$errors.length&&(P(o.value),a.value.$reset())};return(t,J)=>{var c,m;const k=n("ManageHead"),z=n("FormInput"),F=n("CustomButton");return l(),g("section",A,[h("div",j,[v(k,{title:"addNewProductTitle",to:r(y).PRODUCTS.path},null,8,["to"]),h("form",{class:"manage__form form-manage",onSubmit:U(S,["prevent"])},[(l(!0),g(x,null,D(N.value,e=>{var d,i,p,_,f;return l(),H(z,{key:e.id,modelValue:o.value[e.model],"onUpdate:modelValue":K=>o.value[e.model]=K,width:500,placeholder:t.$t(e.placeholder),name:e.icon,error:(i=(d=r(a))==null?void 0:d[e.errorKey])==null?void 0:i.$error,textError:(f=(_=(p=r(a))==null?void 0:p[e.errorKey])==null?void 0:_.$errors[0])==null?void 0:f.$message},{default:$(()=>[B(C(t.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),v(F,{className:`form__submit ${(m=(c=r(a))==null?void 0:c.fullname.$errors[0])!=null&&m.$message?"centered":""}`},{default:$(()=>[B(C(t.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{ee as default};
//# sourceMappingURL=create-Z2CJ4B5k.js.map
