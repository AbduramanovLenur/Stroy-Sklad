import{a as T,u as q}from"./generic.services-zAUdS-UM.js";import{u as A,g as O,d as E}from"./crud.services-AVFHJS4I.js";import{r as l,n as K,b as _,d as L,f as D,k as e,q as k,l as n,t as N,h as i,o as s,s as m}from"./index-uEOOChHm.js";const Q={class:"blocks section-height"},F={class:"blocks__inner section-padding"},H={key:2,class:"empty-table"},R={__name:"index",async setup(I){let o,c;const r=T(),h=l(""),d=l(""),p=l([{id:1,label:"blockName",width:185},{id:2,label:"blockObject",width:205},{id:3,label:"blockOrganization",width:260},{id:4,label:"blockFloors",width:230},{id:5,label:"blockRooms",width:235},{id:6,label:"blockAddress",width:150},{id:7,label:"blockState",width:140},{id:8,label:"blockAction",width:125}]),{data:a,isLoading:y,isSuccess:u,isError:g}=([o,c]=K(()=>A({queryKey:["blocks"],queryFn:()=>O("building_block")})),o=await o,c(),o),{mutate:w}=q({mutationFn:t=>E("building_block",t),onSuccess:()=>{r.invalidateQueries({queryKey:["blocks"]}),r.invalidateQueries({queryKey:["blocksById",d]})}}),S=async t=>{d.value=t,w(t)};return(t,b)=>{const B=i("HeadPage"),f=i("Table"),v=i("Spinner");return s(),_("section",Q,[L("div",F,[D(B,{title:"blockTitle",to:e(m).CREATE_BLOCKS.path,onOnSearch:b[0]||(b[0]=C=>h.value=C)},null,8,["to"]),e(u)&&e(a).length?(s(),k(f,{key:0,headers:p.value,table:e(a),to:e(m).UPDATE_BLOCKS.name,onOnActionDelete:S},null,8,["headers","table","to"])):n("",!0),e(y)?(s(),k(v,{key:1})):n("",!0),e(u)&&!e(a).length||e(g)?(s(),_("div",H,N(t.$t("emptyTableTitle")),1)):n("",!0)])])}}};export{R as default};
//# sourceMappingURL=index-SeMSaHtg.js.map
