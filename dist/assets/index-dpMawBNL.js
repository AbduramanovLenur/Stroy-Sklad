import{q as V,s as x,r as c,x as z,y as K,z as L,d as T,e as U,k as E,h as e,A,i as l,t as F,m as s,o as n,B as k}from"./index-qZ69CyC7.js";import{a as M,u as $}from"./generic.services-34GP1Yc8.js";import{u as j}from"./useQuery-IZNqF3Xo.js";import{g as G,d as J}from"./crud.services-qYEmjzHd.js";import{r as X}from"./index-hYdXxYyx.js";const Y={class:"warehouse"},Z={class:"warehouse__inner section-padding"},ee={key:2,class:"empty-table shadowed"},ie={__name:"index",async setup(te){let a,d;const h=M(),m=V(),{setSearchValue:p,setPagePagination:P}=m,{page:r,limit:i,search:_}=x(m),q=c(localStorage.getItem("organizationId"));z(()=>{p("")}),K(_,()=>{P(1)});const y=c(""),w=X(_,500),B=c([{id:1,label:"warehouseName",width:440},{id:2,label:"warehouseQuantity",width:445},{id:3,label:"warehouseQuantityType",width:205},{id:5,label:"warehouseState"},{id:6,label:"warehouseAction"}]),{data:o,isLoading:C,isSuccess:u,isError:I}=([a,d]=L(()=>j({queryKey:["warehouse",{page:r,limit:i,debouncedSearch:w,organizationId:q}],queryFn:()=>G("warehouse",r.value,i.value,w.value)})),a=await a,d(),a),{mutate:Q}=$({mutationFn:t=>J("warehouse",t),onSuccess:()=>{h.invalidateQueries({queryKey:["warehouse"]}),h.invalidateQueries({queryKey:["warehouseById",y]})}}),D=async t=>{y.value=t,Q(t)};return(t,g)=>{var S,b,f,v;const H=s("HeadPage"),W=s("Table"),N=s("Pagination"),O=s("Spinner");return n(),T("section",Y,[U("div",Z,[E(H,{title:"warehouseTitle",to:e(k).CREATE_WAREHOUSE.path,onOnSearch:g[0]||(g[0]=R=>e(p)(R))},null,8,["to"]),e(u)&&((S=e(o))!=null&&S.count)?(n(),A(W,{key:0,headers:B.value,table:(b=e(o))==null?void 0:b.warehouse,to:e(k).UPDATE_WAREHOUSE.name,options:{page:e(r),limit:e(i)},onOnActionDelete:D},null,8,["headers","table","to","options"])):l("",!0),E(N,{count:(f=e(o))==null?void 0:f.count,isSucces:e(u)},null,8,["count","isSucces"]),e(C)?(n(),A(O,{key:1})):l("",!0),e(u)&&!((v=e(o))!=null&&v.count)||e(I)?(n(),T("div",ee,F(t.$t("emptyTableTitle")),1)):l("",!0)])])}}};export{ie as default};
//# sourceMappingURL=index-dpMawBNL.js.map
