import{u as P,a as K,r as h,c as S,b as v,d as $,f as y,A as r,w as q,F as E,e as M,k as s,g as U,h as n,o as l,i as u,t as c,y as x,z as D}from"./index-F4UHGcq2.js";import{u as L,r as I}from"./i18n-validators-75GrrNwC.js";import{a as Q,u as R}from"./generic.services-wQ89JmWC.js";import{c as A}from"./crud.services-rreQBCQx.js";const H={class:"manage section-height"},O={class:"manage__inner section-padding"},Z={__name:"create",setup(j){const V=Q(),b=U();P(),K();const t=h({fullname:"",organizationId:""}),B=S(()=>({fullname:{required:I},organizationId:{required:I}})),o=L(B,t),C=h([{id:1,model:"fullname",label:"nameProductsLabel",placeholder:"nameProductsPlaceholder",icon:"pen",errorKey:"fullname"}]),{mutate:z}=R({mutationFn:a=>A("construction_material",a),onSuccess:()=>{V.invalidateQueries({queryKey:["products"]}),b.push(D.PRODUCTS.path)}}),N=()=>{t.value.organizationId=1,o.value.$validate(),!o.value.$errors.length&&(z(t.value),o.value.$reset())};return(a,G)=>{var m,d;const T=n("Title"),k=n("FormInput"),w=n("CustomButton");return l(),v("section",H,[$("div",O,[y(T,null,{default:r(()=>[u(`\r
                `+c(a.$t("addNewProductTitle"))+`\r
            `,1)]),_:1}),$("form",{class:"manage__form form-manage",onSubmit:q(N,["prevent"])},[(l(!0),v(E,null,M(C.value,e=>{var i,f,_,p,g;return l(),x(k,{key:e.id,modelValue:t.value[e.model],"onUpdate:modelValue":F=>t.value[e.model]=F,width:500,placeholder:a.$t(e.placeholder),name:e.icon,error:(f=(i=s(o))==null?void 0:i[e.errorKey])==null?void 0:f.$error,textError:(g=(p=(_=s(o))==null?void 0:_[e.errorKey])==null?void 0:p.$errors[0])==null?void 0:g.$message},{default:r(()=>[u(c(a.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),y(w,{className:`form__submit ${(d=(m=s(o))==null?void 0:m.fullname.$errors[0])!=null&&d.$message?"centered":""}`},{default:r(()=>[u(c(a.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{Z as default};
//# sourceMappingURL=create-iBgxUTgG.js.map
