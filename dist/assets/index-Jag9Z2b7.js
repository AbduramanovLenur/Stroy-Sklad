import{n as I,s as K,q as L,r as f,x as F,b as g,d as M,f as v,k as e,y as T,l as i,t as O,h as o,o as a,z as k}from"./index-Kdp4Ja2s.js";import{a as R,u as X}from"./generic.services-j9j2iuBQ.js";import{u as z}from"./useQuery-KjX1rjns.js";import{g as U,d as W}from"./crud.services-h2az_8FO.js";import{r as $}from"./index-DwBxBh0d.js";const j={class:"expenses section-height"},G={class:"expenses__inner section-padding"},J={key:2,class:"empty-table"},oe={__name:"index",async setup(Y){let n,r;const l=R(),u=I(),{setSearchValue:d}=u,{page:p,limit:m,search:P}=K(u);L(()=>{d("")});const _=f(""),y=$(P,500),q=f([{id:1,label:"expensesName",width:635},{id:7,label:"expensesState",width:440},{id:8,label:"expensesAction",width:455}]),{data:t,isLoading:C,isSuccess:c,isError:N}=([n,r]=F(()=>z({queryKey:["expenses",{page:p,limit:m,debouncedSearch:y}],queryFn:()=>U("cost",p.value,m.value,y.value)})),n=await n,r(),n),{mutate:w}=X({mutationFn:s=>W("cost",s),onSuccess:()=>{l.invalidateQueries({queryKey:["expenses"]}),l.invalidateQueries({queryKey:["expensesById",_]})}}),A=async s=>{_.value=s,w(s)};return(s,h)=>{var S,x,E,b;const B=o("HeadPage"),D=o("Table"),Q=o("Pagination"),V=o("Spinner");return a(),g("section",j,[M("div",G,[v(B,{title:"expensesTitle",to:e(k).CREATE_EXPENSES.path,onOnSearch:h[0]||(h[0]=H=>e(d)(H))},null,8,["to"]),e(c)&&((S=e(t))!=null&&S.count)?(a(),T(D,{key:0,headers:q.value,table:(x=e(t))==null?void 0:x.cost,to:e(k).UPDATE_EXPENSES.name,onOnActionDelete:A},null,8,["headers","table","to"])):i("",!0),v(Q,{count:(E=e(t))==null?void 0:E.count,isSucces:e(c),isEmpty:!!((b=e(t))!=null&&b.count)},null,8,["count","isSucces","isEmpty"]),e(C)?(a(),T(V,{key:1})):i("",!0),e(c)&&!e(t).count||e(N)?(a(),g("div",J,O(s.$t("emptyTableTitle")),1)):i("",!0)])])}}};export{oe as default};
//# sourceMappingURL=index-Jag9Z2b7.js.map
