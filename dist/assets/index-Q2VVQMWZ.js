import{_ as L,n as N,s as V,r,q as H,x as F,b as E,d as J,f as C,k as e,y as I,l,t as M,h as a,o as n,z as k}from"./index-4J3DJU33.js";import{a as R,u as U}from"./generic.services-g-yxowqL.js";import{u as W}from"./useQuery-vRA_EPsL.js";import{g as $,d as G}from"./crud.services-6dsbqkZk.js";import{r as X}from"./index-SHLDJmel.js";const Y={class:"object section-height"},Z={class:"object__inner section-padding"},ee={key:2,class:"empty-table"},te={__name:"index",async setup(oe){let s,u;const c=R(),d=N(),{setSearchValue:b}=d,{page:_,limit:m,search:q}=V(d),p=r(localStorage.getItem("organizationId"));H(()=>{b("")});const y=r(""),g=X(q,500),w=r([{id:1,label:"objectName",width:385},{id:2,label:"objectOrganization",width:480},{id:3,label:"objectAddress",width:185},{id:4,label:"objectState",width:255},{id:5,label:"objectAction",width:255}]),{data:o,isLoading:B,isSuccess:i,isError:O}=([s,u]=F(()=>W({queryKey:["objects",{page:_,limit:m,debouncedSearch:g,organizationId:p}],queryFn:()=>$("building_object",_.value,m.value,g.value,{organizationId:p.value})})),s=await s,u(),s),{mutate:A}=U({mutationFn:t=>G("building_object",t),onSuccess:()=>{c.invalidateQueries({queryKey:["objects"]}),c.invalidateQueries({queryKey:["objectById",y]}),c.invalidateQueries({queryKey:["objectsList"]})}}),x=async t=>{y.value=t,A(t)};return(t,h)=>{var j,S,f,v,T;const z=a("HeadPage"),D=a("Table"),P=a("Pagination"),Q=a("Spinner");return n(),E("section",Y,[J("div",Z,[C(z,{title:"objectTitle",to:e(k).CREATE_OBJECTS.path,onOnSearch:h[0]||(h[0]=K=>e(b)(K))},null,8,["to"]),e(i)&&((j=e(o))!=null&&j.count)?(n(),I(D,{key:0,headers:w.value,table:(S=e(o))==null?void 0:S.objects,to:e(k).UPDATE_OBJECTS.name,onOnActionDelete:x},null,8,["headers","table","to"])):l("",!0),C(P,{count:(f=e(o))==null?void 0:f.count,isSucces:e(i),isEmpty:!!((v=e(o))!=null&&v.count)},null,8,["count","isSucces","isEmpty"]),e(B)?(n(),I(Q,{key:1})):l("",!0),e(i)&&!((T=e(o))!=null&&T.count)||e(O)?(n(),E("div",ee,M(t.$t("emptyTableTitle")),1)):l("",!0)])])}}},re=L(te,[["__scopeId","data-v-490aa2b3"]]);export{re as default};
//# sourceMappingURL=index-Q2VVQMWZ.js.map
