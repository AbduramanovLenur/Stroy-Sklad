import{n as N,s as V,r as u,q as x,x as H,y as F,b as C,d as J,f as k,k as e,z as q,l as d,t as M,h as s,o as n,A as w}from"./index-lJf7jXP7.js";import{a as R,u as U}from"./generic.services-Aa1SKJf_.js";import{u as W}from"./useQuery-aSnCbYw0.js";import{g as $,d as G}from"./crud.services-puo1KH10.js";import{r as X}from"./index-X2DhGbTM.js";const Y={class:"object"},Z={class:"object__inner section-padding"},ee={key:2,class:"empty-table shadowed"},ce={__name:"index",async setup(te){let o,b;const i=R(),m=N(),{setSearchValue:_,setPagePagination:A}=m,{page:c,limit:r,search:p}=V(m),y=u(localStorage.getItem("organizationId"));x(()=>{_("")}),H(p,()=>{A(1)});const g=u(""),j=X(p,500),B=u([{id:1,label:"objectName",width:385},{id:2,label:"objectOrganization",width:480},{id:3,label:"objectAddress",width:185},{id:4,label:"objectState"},{id:5,label:"objectAction"}]),{data:a,isLoading:E,isSuccess:l,isError:I}=([o,b]=F(()=>W({queryKey:["objects",{page:c,limit:r,debouncedSearch:j,organizationId:y}],queryFn:()=>$("building_object",c.value,r.value,j.value,{organizationId:y.value})})),o=await o,b(),o),{mutate:O}=U({mutationFn:t=>G("building_object",t),onSuccess:()=>{i.invalidateQueries({queryKey:["objects"]}),i.invalidateQueries({queryKey:["objectById",g]}),i.invalidateQueries({queryKey:["objectsList"]})}}),P=async t=>{g.value=t,O(t)};return(t,h)=>{var S,f,v,T;const z=s("HeadPage"),D=s("Table"),Q=s("Pagination"),K=s("Spinner");return n(),C("section",Y,[J("div",Z,[k(z,{title:"objectTitle",to:e(w).CREATE_OBJECTS.path,onOnSearch:h[0]||(h[0]=L=>e(_)(L))},null,8,["to"]),e(l)&&((S=e(a))!=null&&S.count)?(n(),q(D,{key:0,headers:B.value,table:(f=e(a))==null?void 0:f.objects,to:e(w).UPDATE_OBJECTS.name,options:{page:e(c),limit:e(r)},onOnActionDelete:P},null,8,["headers","table","to","options"])):d("",!0),k(Q,{count:(v=e(a))==null?void 0:v.count,isSucces:e(l)},null,8,["count","isSucces"]),e(E)?(n(),q(K,{key:1})):d("",!0),e(l)&&!((T=e(a))!=null&&T.count)||e(I)?(n(),C("div",ee,M(t.$t("emptyTableTitle")),1)):d("",!0)])])}}};export{ce as default};
//# sourceMappingURL=index-_A-TNPIQ.js.map
