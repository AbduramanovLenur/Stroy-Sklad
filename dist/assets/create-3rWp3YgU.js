import{u as K,a as P,r as v,c as S,b as $,d as y,f as I,B as r,w as q,F as E,e as M,k as s,g as Q,h as n,o as l,i as u,t as m,z as U,A as x}from"./index-TqTqIbHh.js";import{u as D,r as B}from"./i18n-validators-zAZPYeBJ.js";import{a as L,u as R}from"./generic.services-wmG985Iz.js";import{c as A}from"./crud.services-ChiVIUDS.js";const H={class:"manage section-height shadowed"},O={class:"manage__inner section-padding"},Z={__name:"create",setup(j){const c=L(),V=Q();K(),P();const o=v({fullname:"",organizationId:""}),b=S(()=>({fullname:{required:B},organizationId:{required:B}})),t=D(b,o),C=v([{id:1,model:"fullname",label:"nameProductsLabel",placeholder:"nameProductsPlaceholder",icon:"pen",errorKey:"fullname"}]),{mutate:w}=R({mutationFn:e=>A("construction_material",e),onSuccess:()=>{c.invalidateQueries({queryKey:["products"]}),c.invalidateQueries({queryKey:["materials"]}),V.push(x.PRODUCTS.path)}}),z=()=>{const e=localStorage.getItem("organizationId");o.value.organizationId=e,t.value.$validate(),!t.value.$errors.length&&(w(o.value),t.value.$reset())};return(e,G)=>{var i,d;const N=n("Title"),T=n("FormInput"),k=n("CustomButton");return l(),$("section",H,[y("div",O,[I(N,null,{default:r(()=>[u(`\r
                `+m(e.$t("addNewProductTitle"))+`\r
            `,1)]),_:1}),y("form",{class:"manage__form form-manage",onSubmit:q(z,["prevent"])},[(l(!0),$(E,null,M(C.value,a=>{var f,_,p,g,h;return l(),U(T,{key:a.id,modelValue:o.value[a.model],"onUpdate:modelValue":F=>o.value[a.model]=F,width:500,placeholder:e.$t(a.placeholder),name:a.icon,error:(_=(f=s(t))==null?void 0:f[a.errorKey])==null?void 0:_.$error,textError:(h=(g=(p=s(t))==null?void 0:p[a.errorKey])==null?void 0:g.$errors[0])==null?void 0:h.$message},{default:r(()=>[u(m(e.$t(a.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),I(k,{className:`form__submit ${(d=(i=s(t))==null?void 0:i.fullname.$errors[0])!=null&&d.$message?"centered":""}`},{default:r(()=>[u(m(e.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{Z as default};
//# sourceMappingURL=create-3rWp3YgU.js.map
