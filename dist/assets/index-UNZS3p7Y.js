import{n as V,s as x,q as H,r as z,x as K,b as f,d as L,f as v,k as e,y as C,l as r,t as R,h as o,o as i,z as E}from"./index-TXMqmpIt.js";import{a as F,u as U}from"./generic.services-7m30tS8d.js";import{u as W}from"./useQuery-AF2H1NfV.js";import{g as $,d as j}from"./crud.services-Elnq-5Yr.js";import{r as G}from"./index-eA3acznt.js";const J={class:"company section-height"},X={class:"company__inner section-padding"},Y={key:2,class:"empty-table"},ie={__name:"index",async setup(Z){let n,c;const l=F(),d=V(),{setSearchValue:u}=d,{page:m,limit:p,search:T}=x(d);H(()=>{u("")});const A=z(""),y=G(T,500),P=z([{id:1,label:"organizationName",width:220},{id:2,label:"organizationInn",width:115},{id:3,label:"organizationRegion",width:215},{id:4,label:"organizationDistrict",width:155},{id:5,label:"organizationAddress",width:200},{id:6,label:"organizationPhone",width:170},{id:7,label:"organizationDirector",width:245},{id:7,label:"organizationState",width:100},{id:8,label:"organizationAction",width:130}]),{data:a,isLoading:k,isSuccess:s,isError:D}=([n,c]=K(()=>W({queryKey:["companies",{page:m,limit:p,debouncedSearch:y}],queryFn:()=>$("organization",m.value,p.value,y.value)})),n=await n,c(),n),{mutate:q}=U({mutationFn:t=>j("organization",t),onSuccess:async()=>{await l.invalidateQueries({queryKey:["companies"]}),await l.invalidateQueries({queryKey:["companiesById"]})}}),I=t=>{A.value=t,q(t)};return(t,_)=>{var g,h,b,S,w;const N=o("HeadPage"),B=o("Table"),M=o("Pagination"),O=o("Spinner");return i(),f("section",J,[L("div",X,[v(N,{title:"comapnyTitle",to:e(E).CREATE_COMPANIES.path,onOnSearch:_[0]||(_[0]=Q=>e(u)(Q))},null,8,["to"]),e(s)&&((g=e(a))!=null&&g.count)?(i(),C(B,{key:0,headers:P.value,table:(h=e(a))==null?void 0:h.organizations,to:e(E).UPDATE_COMPANIES.name,onOnActionDelete:I},null,8,["headers","table","to"])):r("",!0),v(M,{count:(b=e(a))==null?void 0:b.count,isSucces:e(s),isEmpty:!!((S=e(a))!=null&&S.count)},null,8,["count","isSucces","isEmpty"]),e(k)?(i(),C(O,{key:1})):r("",!0),e(s)&&!((w=e(a))!=null&&w.count)||e(D)?(i(),f("div",Y,R(t.$t("emptyTableTitle")),1)):r("",!0)])])}}};export{ie as default};
//# sourceMappingURL=index-UNZS3p7Y.js.map
