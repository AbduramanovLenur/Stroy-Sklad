import{_ as C,u as U,a as q,r as v,c as x,b as w,d as e,t as l,w as F,e as k,f as L,v as H,g as _,h as V,i as K,j as z,k as O,l as D,o as f,p as j,m as E}from"./index-u_2KKI46.js";import{u as R,r as M,m as A}from"./i18n-validators-SGtCpuoI.js";import{r as G,u as J}from"./generic.services-Zkt5ZkSV.js";const Q="/assets/logo-auth-H25DvOh-.svg",W=o=>{const n={...o};for(const i in n)n[i]="";return n},X=o=>G({url:"account/Login",method:"POST",body:o}),Y=o=>(j("data-v-0c757816"),o=o(),E(),o),Z={class:"auth"},ee={class:"container"},se={class:"auth__inner"},oe={class:"auth__wrapper"},ae=Y(()=>e("div",{class:"auth__logo"},[e("img",{src:Q,alt:"logo",width:"415",height:"80",loading:"lazy"})],-1)),te={class:"auth__title"},re={class:"auth__label"},le=["placeholder"],ne={key:0,class:"error-white"},ie={class:"auth__label"},ue={class:"auth__label-wrapper"},ce=["type","placeholder"],de={key:0,class:"error-white"},pe={class:"auth__submit",type:"submit"},_e={__name:"auth",setup(o){const n=O();U(),q();const i=v(!1),a=v({userName:"",password:""}),P=x(()=>({userName:{required:M},password:{required:M,minLength:A}})),r=R(P,a);v([{id:1,label:"loginLabel",type:"text",model:"userName",name:"login",placeholder:"loginPlaceholder",errorKey:"userName"},{id:2,label:"passwordLabel",type:"password",model:"password",name:"password",placeholder:"passwordPlaceholder",errorKey:"password"}]);const{mutate:B}=J({mutationFn:s=>X(s),onSuccess:s=>{const{token:t,user:{id:m,role:h,fullName:u,organizationName:c,organizationId:d,roleId:p}}=s;localStorage.setItem("id",m),localStorage.setItem("token",t),localStorage.setItem("name",u),localStorage.setItem("role",h),localStorage.setItem("organization",c),localStorage.setItem("organizationId",d),localStorage.setItem("roleId",p),n.push("/"),a.value=W(a.value),r.value.$reset()}}),T=()=>{r.value.$validate(),!r.value.$errors.length&&B(a.value)};return(s,t)=>{var u,c,d,p,I,b,S,$,y,N;const m=D("Icon"),h=D("SwitcherLang");return f(),w("section",Z,[e("div",ee,[e("div",se,[e("div",oe,[ae,e("h2",te,l(s.$t("login")),1),e("form",{class:"auth__form",onSubmit:F(T,["prevent"])},[e("label",re,[k(l(s.$t("loginLabel"))+" ",1),L(e("input",{class:"auth__input",type:"text","onUpdate:modelValue":t[0]||(t[0]=g=>a.value.userName=g),placeholder:s.$t("loginPlaceholder")},null,8,le),[[H,a.value.userName]]),(c=(u=_(r))==null?void 0:u.userName)!=null&&c.$error?(f(),w("span",ne,l((I=(p=(d=_(r))==null?void 0:d.userName)==null?void 0:p.$errors[0])==null?void 0:I.$message),1)):V("",!0)]),e("label",ie,[k(l(s.$t("passwordLabel"))+" ",1),e("span",ue,[L(e("input",{class:"auth__input",type:i.value?"text":"password","onUpdate:modelValue":t[1]||(t[1]=g=>a.value.password=g),placeholder:s.$t("passwordPlaceholder")},null,8,ce),[[K,a.value.password]]),e("span",{class:"auth__label-icon",onClick:t[2]||(t[2]=()=>i.value=!i.value)},[z(m,{name:"eye"})])]),(S=(b=_(r))==null?void 0:b.password)!=null&&S.$error?(f(),w("span",de,l((N=(y=($=_(r))==null?void 0:$.password)==null?void 0:y.$errors[0])==null?void 0:N.$message),1)):V("",!0)]),e("button",pe,l(s.$t("loginButton")),1)],32),z(h)])])])])}}},ve=C(_e,[["__scopeId","data-v-0c757816"]]);export{ve as default};
//# sourceMappingURL=auth-8IBZy9uq.js.map
