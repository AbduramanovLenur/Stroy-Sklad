import{n as H,s as K,r as c,q as L,x as F,b as v,d as M,f as T,k as e,y as k,l as r,t as O,h as o,o as a,z as I}from"./index-4J3DJU33.js";import{a as R,u as X}from"./generic.services-g-yxowqL.js";import{u as U}from"./useQuery-vRA_EPsL.js";import{g as W,d as $}from"./crud.services-6dsbqkZk.js";import{r as j}from"./index-SHLDJmel.js";const G={class:"expenses section-height"},J={class:"expenses__inner section-padding"},Y={key:2,class:"empty-table"},ae={__name:"index",async setup(Z){let n,l;const u=R(),d=H(),{setSearchValue:p}=d,{page:m,limit:_,search:P}=K(d),y=c(localStorage.getItem("organizationId"));L(()=>{p("")});const S=c(""),h=j(P,500),q=c([{id:1,label:"expensesName",width:635},{id:7,label:"expensesState",width:440},{id:8,label:"expensesAction",width:455}]),{data:s,isLoading:C,isSuccess:i,isError:N}=([n,l]=F(()=>U({queryKey:["expenses",{page:m,limit:_,debouncedSearch:h,organizationId:y}],queryFn:()=>W("cost",m.value,_.value,h.value,{organizationId:y.value})})),n=await n,l(),n),{mutate:w}=X({mutationFn:t=>$("cost",t),onSuccess:()=>{u.invalidateQueries({queryKey:["expenses"]}),u.invalidateQueries({queryKey:["expensesById",S]})}}),A=async t=>{S.value=t,w(t)};return(t,g)=>{var x,E,b,f;const B=o("HeadPage"),D=o("Table"),z=o("Pagination"),Q=o("Spinner");return a(),v("section",G,[M("div",J,[T(B,{title:"expensesTitle",to:e(I).CREATE_EXPENSES.path,onOnSearch:g[0]||(g[0]=V=>e(p)(V))},null,8,["to"]),e(i)&&((x=e(s))!=null&&x.count)?(a(),k(D,{key:0,headers:q.value,table:(E=e(s))==null?void 0:E.cost,to:e(I).UPDATE_EXPENSES.name,onOnActionDelete:A},null,8,["headers","table","to"])):r("",!0),T(z,{count:(b=e(s))==null?void 0:b.count,isSucces:e(i),isEmpty:!!((f=e(s))!=null&&f.count)},null,8,["count","isSucces","isEmpty"]),e(C)?(a(),k(Q,{key:1})):r("",!0),e(i)&&!e(s).count||e(N)?(a(),v("div",Y,O(t.$t("emptyTableTitle")),1)):r("",!0)])])}}};export{ae as default};
//# sourceMappingURL=index-Mj1liWzS.js.map
