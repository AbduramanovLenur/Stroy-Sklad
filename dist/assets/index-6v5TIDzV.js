import{n as E,s as N,q as O,r as S,x as Q,b as g,d as R,f as V,k as e,y as f,l as c,t as x,h as i,o as n,z as T}from"./index-zT54aL9e.js";import{a as H,u as I}from"./generic.services-n35efQMQ.js";import{u as K}from"./useQuery-sYQ1vWUH.js";import{g as L,d as U}from"./crud.services-9ETkeD4Q.js";import{r as z}from"./index-Z2pyjMVz.js";const F={class:"products section-height"},M={class:"products__inner section-padding"},W={key:2,class:"empty-table"},Z={__name:"index",async setup($){let s,u;const l=H(),d=E(),{setSearchValue:p}=d,{page:m,limit:_,search:v}=N(d);O(()=>{p("")});const y=S(""),h=z(v,500),C=S([{id:1,label:"productsName",width:725},{id:4,label:"productsState",width:365},{id:5,label:"productsAction",width:440}]),{data:r,isLoading:k,isSuccess:b,isError:D}=([s,u]=Q(()=>K({queryKey:["products",{page:m,limit:_,debouncedSearch:h}],queryFn:()=>L("construction_material",m.value,_.value,h.value),select:t=>t.map(o=>{const a={...o};return delete a.organizationName,a})})),s=await s,u(),s),{mutate:P}=I({mutationFn:t=>U("construction_material",t),onSuccess:()=>{l.invalidateQueries({queryKey:["products"]}),l.invalidateQueries({queryKey:["productsById",y]})}}),q=async t=>{y.value=t,P(t)};return(t,o)=>{const a=i("HeadPage"),w=i("Table"),A=i("Spinner");return n(),g("section",F,[R("div",M,[V(a,{title:"productsTitle",to:e(T).CREATE_PRODUCTS.path,onOnSearch:o[0]||(o[0]=B=>e(p)(B))},null,8,["to"]),e(b)&&e(r).length?(n(),f(w,{key:0,headers:C.value,table:e(r),to:e(T).UPDATE_PRODUCTS.name,onOnActionDelete:q},null,8,["headers","table","to"])):c("",!0),e(k)?(n(),f(A,{key:1})):c("",!0),e(b)&&!e(r).length||e(D)?(n(),g("div",W,x(t.$t("emptyTableTitle")),1)):c("",!0)])])}}};export{Z as default};
//# sourceMappingURL=index-6v5TIDzV.js.map
