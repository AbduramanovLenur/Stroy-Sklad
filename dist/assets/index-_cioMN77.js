import{n as V,s as x,q as H,x as K,r as f,y as L,b as v,d as R,f as C,k as e,z as P,l,t as F,h as n,o as i,A}from"./index-xEhNh2bJ.js";import{a as U,u as W}from"./generic.services-cTEduup6.js";import{u as $}from"./useQuery-9UwmWmpU.js";import{g as j,d as G}from"./crud.services-QxvbF8R1.js";import{r as J}from"./index-TAQZG_9n.js";const X={class:"company section-height"},Y={class:"company__inner section-padding"},Z={key:2,class:"empty-table shadowed"},se={__name:"index",async setup(ee){let a,d;const u=U(),m=V(),{setSearchValue:p,setPagePagination:T}=m,{page:s,limit:r,search:g}=x(m);H(()=>{p("")}),K(g,()=>{T(1)});const _=f(""),h=J(g,500),k=f([{id:1,label:"organizationName",width:220},{id:2,label:"organizationInn",width:115},{id:3,label:"organizationRegion",width:200},{id:4,label:"organizationDistrict",width:155},{id:5,label:"organizationAddress",width:200},{id:6,label:"organizationPhone",width:170},{id:7,label:"organizationDirector",width:230},{id:7,label:"organizationState"},{id:8,label:"organizationAction"}]),{data:o,isLoading:D,isSuccess:c,isError:E}=([a,d]=L(()=>$({queryKey:["companies",{page:s,limit:r,debouncedSearch:h}],queryFn:()=>j("organization",s.value,r.value,h.value)})),a=await a,d(),a),{mutate:q}=W({mutationFn:t=>G("organization",t),onSuccess:async()=>{await u.invalidateQueries({queryKey:["companies"]}),await u.invalidateQueries({queryKey:["companiesById",_]})}}),I=t=>{_.value=t,q(t)};return(t,y)=>{var b,S,w,z;const N=n("HeadPage"),B=n("Table"),M=n("Pagination"),O=n("Spinner");return i(),v("section",X,[R("div",Y,[C(N,{title:"comapnyTitle",to:e(A).CREATE_COMPANIES.path,onOnSearch:y[0]||(y[0]=Q=>e(p)(Q))},null,8,["to"]),e(c)&&((b=e(o))!=null&&b.count)?(i(),P(B,{key:0,headers:k.value,table:(S=e(o))==null?void 0:S.organizations,to:e(A).UPDATE_COMPANIES.name,options:{page:e(s),limit:e(r)},onOnActionDelete:I},null,8,["headers","table","to","options"])):l("",!0),C(M,{count:(w=e(o))==null?void 0:w.count,isSucces:e(c)},null,8,["count","isSucces"]),e(D)?(i(),P(O,{key:1})):l("",!0),e(c)&&!((z=e(o))!=null&&z.count)||e(E)?(i(),v("div",Z,F(t.$t("emptyTableTitle")),1)):l("",!0)])])}}};export{se as default};
//# sourceMappingURL=index-_cioMN77.js.map
