import{n as K,s as L,r as c,q as F,x as M,y as O,b as P,d as R,f as T,k as e,z as k,l as r,t as X,h as a,o,A as I}from"./index-qu9jH8U4.js";import{a as U,u as W}from"./generic.services-TvKn_bvi.js";import{u as $}from"./useQuery-HXp8dDXQ.js";import{g as j,d as G}from"./crud.services-RAdlH-I4.js";import{r as J}from"./index-r1nzloiF.js";const Y={class:"expenses"},Z={class:"expenses__inner section-padding"},ee={key:2,class:"empty-table"},ce={__name:"index",async setup(te){let n,l;const u=U(),d=K(),{setSearchValue:p,setPagePagination:q}=d,{page:m,limit:_,search:y}=L(d),S=c(localStorage.getItem("organizationId"));F(()=>{p("")}),M(y,()=>{q(1)});const g=c(""),h=J(y,500),w=c([{id:1,label:"expensesName",width:635},{id:7,label:"expensesState",width:440},{id:8,label:"expensesAction",width:455}]),{data:s,isLoading:A,isSuccess:i,isError:C}=([n,l]=O(()=>$({queryKey:["expenses",{page:m,limit:_,debouncedSearch:h,organizationId:S}],queryFn:()=>j("cost",m.value,_.value,h.value,{organizationId:S.value})})),n=await n,l(),n),{mutate:N}=W({mutationFn:t=>G("cost",t),onSuccess:()=>{u.invalidateQueries({queryKey:["expenses"]}),u.invalidateQueries({queryKey:["expensesById",g]})}}),B=async t=>{g.value=t,N(t)};return(t,x)=>{var E,b,f,v;const D=a("HeadPage"),z=a("Table"),Q=a("Pagination"),V=a("Spinner");return o(),P("section",Y,[R("div",Z,[T(D,{title:"expensesTitle",to:e(I).CREATE_EXPENSES.path,onOnSearch:x[0]||(x[0]=H=>e(p)(H))},null,8,["to"]),e(i)&&((E=e(s))!=null&&E.count)?(o(),k(z,{key:0,headers:w.value,table:(b=e(s))==null?void 0:b.cost,to:e(I).UPDATE_EXPENSES.name,onOnActionDelete:B},null,8,["headers","table","to"])):r("",!0),T(Q,{count:(f=e(s))==null?void 0:f.count,isSucces:e(i),isEmpty:!!((v=e(s))!=null&&v.count)},null,8,["count","isSucces","isEmpty"]),e(A)?(o(),k(V,{key:1})):r("",!0),e(i)&&!e(s).count||e(C)?(o(),P("div",ee,X(t.$t("emptyTableTitle")),1)):r("",!0)])])}}};export{ce as default};
//# sourceMappingURL=index-O7HwAcOd.js.map
