{"version":3,"file":"EstimateForm-hQHzffDy.js","sources":["../../src/components/EstimateForm.vue"],"sourcesContent":["<template>\r\n    <div class=\"estimate-form\">\r\n        <h4 class=\"estimate-form__title\">\r\n            {{ $t(\"estimateInfo\") }}\r\n        </h4>\r\n        <div class=\"estimate-form__overlay form-manage\">\r\n            <FormSelect \r\n                v-for=\"select in selects\"\r\n                :key=\"select.id\"\r\n                v-model=\"formData[select.model]\" \r\n                :width=\"500\" \r\n                :options=\"select.options\"\r\n                :placeholder=\"select?.placeholder\"\r\n                :success=\"select.success\"\r\n                :loading=\"select.loading\"\r\n                :isMultiSelect=\"select?.multiple\"\r\n            >\r\n                {{ $t(select.label) }}\r\n            </FormSelect>\r\n            <FormInput \r\n                v-for=\"input in inputs\"\r\n                :key=\"input.id\"\r\n                v-model=\"formData[input.model]\"\r\n                :width=\"500\" \r\n                :placeholder=\"$t(input.placeholder)\"\r\n                :name=\"input.icon\"\r\n                :type=\"input?.type\"\r\n            >\r\n                {{ $t(input.label) }}\r\n            </FormInput>\r\n            <CustomButton \r\n                className=\"form__submit\"\r\n                type=\"button\"\r\n                @click=\"addHandler\"\r\n            >\r\n                {{ $t(\"addButtonForm\") }}\r\n            </CustomButton>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, watch } from \"vue\";\r\nimport { clearForm, isFormDataEmpty } from \"@/utils/secondary-functions.js\";\r\nimport { useToast } from \"vue-toastification\";\r\nimport { useI18n } from \"vue-i18n\";\r\n\r\nconst toast = useToast();\r\nconst { t } = useI18n();\r\n\r\nconst props = defineProps([\"selects\", \"blockId\"]);\r\n\r\nconst emit = defineEmits([\"onAddTable\", \"onChangeBlock\"]);\r\n\r\nconst valueBlock = computed(() => props.blockId);\r\n\r\nconst formData = ref({\r\n    buildingBlockId: valueBlock.value || \"\",\r\n    floorId: [],\r\n    costId: [],\r\n    constructionMaterailIds: [],\r\n    price: \"\"\r\n});\r\n\r\nwatch(valueBlock, (value) => {\r\n    formData.value.buildingBlockId = value;\r\n    formData.value.floorId = [];\r\n});\r\n\r\nconst inputs = ref([\r\n    { \r\n        id: 1, \r\n        model: \"price\", \r\n        label: \"priceEstimateLabel\", \r\n        placeholder: \"priceEstimatePlaceholder\", \r\n        icon: \"money\"\r\n    }\r\n]);\r\n\r\nconst addHandler = () => {\r\n    const isEmpty = isFormDataEmpty(formData.value);\r\n\r\n    if (!isEmpty && !formData.value.buildingBlockId) {\r\n        formData.value.buildingBlockId = valueBlock.value;\r\n    }\r\n\r\n    if (!isEmpty) {\r\n        toast.error(t(\"isEmptyModal\"));\r\n        return;\r\n    }\r\n\r\n    formData.value = { \r\n        buildingBlockId: formData.value.buildingBlockId,\r\n        floorId: formData.value.floorId[0],\r\n        costId: formData.value.costId[0],\r\n        constructionMaterailIds: formData.value.constructionMaterailIds,\r\n        price: formData.value.price\r\n    }\r\n\r\n    emit(\"onAddTable\", formData.value);\r\n\r\n    formData.value = clearForm(formData.value, [\"buildingBlockId\"]);\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.estimate-form {\r\n    margin-top: 30px;\r\n    margin-bottom: 30px;\r\n    &__title {\r\n        font-size: 20px;\r\n        margin-bottom: 10px;\r\n    }\r\n}\r\n</style>"],"names":["toast","useToast","t","useI18n","props","__props","emit","__emit","valueBlock","computed","formData","ref","watch","value","inputs","addHandler","isEmpty","isFormDataEmpty","clearForm"],"mappings":"6XA+CA,MAAMA,EAAQC,EAAQ,EAChB,CAAE,EAAAC,CAAC,EAAKC,IAERC,EAAQC,EAERC,EAAOC,EAEPC,EAAaC,EAAS,IAAML,EAAM,OAAO,EAEzCM,EAAWC,EAAI,CACjB,gBAAiBH,EAAW,OAAS,GACrC,QAAS,CAAE,EACX,OAAQ,CAAE,EACV,wBAAyB,CAAE,EAC3B,MAAO,EACX,CAAC,EAEDI,EAAMJ,EAAaK,GAAU,CACzBH,EAAS,MAAM,gBAAkBG,EACjCH,EAAS,MAAM,QAAU,EAC7B,CAAC,EAED,MAAMI,EAASH,EAAI,CACf,CACI,GAAI,EACJ,MAAO,QACP,MAAO,qBACP,YAAa,2BACb,KAAM,OACT,CACL,CAAC,EAEKI,EAAa,IAAM,CACrB,MAAMC,EAAUC,EAAgBP,EAAS,KAAK,EAM9C,GAJI,CAACM,GAAW,CAACN,EAAS,MAAM,kBAC5BA,EAAS,MAAM,gBAAkBF,EAAW,OAG5C,CAACQ,EAAS,CACVhB,EAAM,MAAME,EAAE,cAAc,CAAC,EAC7B,MACH,CAEDQ,EAAS,MAAQ,CACb,gBAAiBA,EAAS,MAAM,gBAChC,QAASA,EAAS,MAAM,QAAQ,CAAC,EACjC,OAAQA,EAAS,MAAM,OAAO,CAAC,EAC/B,wBAAyBA,EAAS,MAAM,wBACxC,MAAOA,EAAS,MAAM,KACzB,EAEDJ,EAAK,aAAcI,EAAS,KAAK,EAEjCA,EAAS,MAAQQ,EAAUR,EAAS,MAAO,CAAC,iBAAiB,CAAC,CAClE"}