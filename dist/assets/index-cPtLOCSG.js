import{_ as N,n as V,s as H,r,q as F,x as J,y as M,b as E,d as R,f as C,k as e,z as I,l,t as U,h as s,o as n,A as k}from"./index-qu9jH8U4.js";import{a as W,u as $}from"./generic.services-TvKn_bvi.js";import{u as G}from"./useQuery-HXp8dDXQ.js";import{g as X,d as Y}from"./crud.services-RAdlH-I4.js";import{r as Z}from"./index-r1nzloiF.js";const ee={class:"object shadowed"},te={class:"object__inner section-padding"},oe={key:2,class:"empty-table shadowed"},ae={__name:"index",async setup(se){let a,d;const c=W(),u=V(),{setSearchValue:b,setPagePagination:q}=u,{page:_,limit:m,search:p}=H(u),y=r(localStorage.getItem("organizationId"));F(()=>{b("")}),J(p,()=>{q(1)});const g=r(""),h=Z(p,500),A=r([{id:1,label:"objectName",width:385},{id:2,label:"objectOrganization",width:480},{id:3,label:"objectAddress",width:185},{id:4,label:"objectState",width:255},{id:5,label:"objectAction",width:255}]),{data:o,isLoading:B,isSuccess:i,isError:O}=([a,d]=M(()=>G({queryKey:["objects",{page:_,limit:m,debouncedSearch:h,organizationId:y}],queryFn:()=>X("building_object",_.value,m.value,h.value,{organizationId:y.value})})),a=await a,d(),a),{mutate:P}=$({mutationFn:t=>Y("building_object",t),onSuccess:()=>{c.invalidateQueries({queryKey:["objects"]}),c.invalidateQueries({queryKey:["objectById",g]}),c.invalidateQueries({queryKey:["objectsList"]})}}),x=async t=>{g.value=t,P(t)};return(t,j)=>{var S,f,v,T,w;const z=s("HeadPage"),D=s("Table"),Q=s("Pagination"),K=s("Spinner");return n(),E("section",ee,[R("div",te,[C(z,{title:"objectTitle",to:e(k).CREATE_OBJECTS.path,onOnSearch:j[0]||(j[0]=L=>e(b)(L))},null,8,["to"]),e(i)&&((S=e(o))!=null&&S.count)?(n(),I(D,{key:0,headers:A.value,table:(f=e(o))==null?void 0:f.objects,to:e(k).UPDATE_OBJECTS.name,onOnActionDelete:x},null,8,["headers","table","to"])):l("",!0),C(Q,{count:(v=e(o))==null?void 0:v.count,isSucces:e(i),isEmpty:!!((T=e(o))!=null&&T.count)},null,8,["count","isSucces","isEmpty"]),e(B)?(n(),I(K,{key:1})):l("",!0),e(i)&&!((w=e(o))!=null&&w.count)||e(O)?(n(),E("div",oe,U(t.$t("emptyTableTitle")),1)):l("",!0)])])}}},de=N(ae,[["__scopeId","data-v-11f01eb5"]]);export{de as default};
//# sourceMappingURL=index-cPtLOCSG.js.map
