import{n as N,s as V,r as u,q as x,x as H,y as F,b as C,d as J,j as q,g as e,z as w,h as d,t as M,l as s,o as n,A}from"./index-90cmhfpq.js";import{a as R,u as U}from"./generic.services-UXrdyhxI.js";import{u as W}from"./useQuery-7_07upSr.js";import{g as $,d as G}from"./crud.services-IxzF5w0J.js";import{r as X}from"./index-fOfPrRnA.js";const Y={class:"object"},Z={class:"object__inner section-padding"},ee={key:2,class:"empty-table shadowed"},ce={__name:"index",async setup(te){let o,b;const i=R(),m=N(),{setSearchValue:_,setPagePagination:B}=m,{page:c,limit:r,search:p}=V(m),g=u(localStorage.getItem("organizationId"));x(()=>{_("")}),H(p,()=>{B(1)});const y=u(""),j=X(p,500),E=u([{id:1,label:"objectName",width:385},{id:2,label:"objectOrganization",width:480},{id:3,label:"objectAddress",width:185},{id:4,label:"objectState"},{id:5,label:"objectAction"}]),{data:a,isLoading:I,isSuccess:l,isError:O}=([o,b]=F(()=>W({queryKey:["objects",{page:c,limit:r,debouncedSearch:j,organizationId:g}],queryFn:()=>$("building_object",c.value,r.value,j.value,{organizationId:g.value})})),o=await o,b(),o),{mutate:P}=U({mutationFn:t=>G("building_object",t),onSuccess:()=>{i.invalidateQueries({queryKey:["objects"]}),i.invalidateQueries({queryKey:["objectById",y]}),i.invalidateQueries({queryKey:["objectsList"]})}}),k=async t=>{y.value=t,P(t)};return(t,h)=>{var S,v,f,T;const z=s("HeadPage"),D=s("Table"),Q=s("Pagination"),K=s("Spinner");return n(),C("section",Y,[J("div",Z,[q(z,{title:"objectTitle",to:e(A).CREATE_OBJECTS.path,onOnSearch:h[0]||(h[0]=L=>e(_)(L))},null,8,["to"]),e(l)&&((S=e(a))!=null&&S.count)?(n(),w(D,{key:0,headers:E.value,table:(v=e(a))==null?void 0:v.objects,to:e(A).UPDATE_OBJECTS.name,options:{page:e(c),limit:e(r)},onOnActionDelete:k},null,8,["headers","table","to","options"])):d("",!0),q(Q,{count:(f=e(a))==null?void 0:f.count,isSucces:e(l)},null,8,["count","isSucces"]),e(I)?(n(),w(K,{key:1})):d("",!0),e(l)&&!((T=e(a))!=null&&T.count)||e(O)?(n(),C("div",ee,M(t.$t("emptyTableTitle")),1)):d("",!0)])])}}};export{ce as default};
//# sourceMappingURL=index-VDO5ihVx.js.map
