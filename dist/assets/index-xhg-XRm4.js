import{n as x,s as H,q as K,r as f,x as L,b as v,d as C,f as E,k as e,y as T,l as r,t as R,h as n,o as i,z as A}from"./index-F4UHGcq2.js";import{a as F,u as U}from"./generic.services-wQ89JmWC.js";import{u as W}from"./useQuery-ccCSBUF5.js";import{g as $,d as j}from"./crud.services-rreQBCQx.js";import{r as G}from"./index-V-M1nI8H.js";const J={class:"company section-height"},X={class:"company__inner section-padding"},Y={class:"shadowed"},Z={key:2,class:"empty-table"},se={__name:"index",async setup(ee){let o,c;const l=F(),d=x(),{setSearchValue:u}=d,{page:m,limit:p,search:P}=H(d);K(()=>{u("")});const _=f(""),h=G(P,500),k=f([{id:1,label:"organizationName",width:220},{id:2,label:"organizationInn",width:115},{id:3,label:"organizationRegion",width:215},{id:4,label:"organizationDistrict",width:155},{id:5,label:"organizationAddress",width:200},{id:6,label:"organizationPhone",width:170},{id:7,label:"organizationDirector",width:245},{id:7,label:"organizationState",width:100},{id:8,label:"organizationAction",width:130}]),{data:a,isLoading:D,isSuccess:s,isError:q}=([o,c]=L(()=>W({queryKey:["companies",{page:m,limit:p,debouncedSearch:h}],queryFn:()=>$("organization",m.value,p.value,h.value)})),o=await o,c(),o),{mutate:I}=U({mutationFn:t=>j("organization",t),onSuccess:async()=>{await l.invalidateQueries({queryKey:["companies"]}),await l.invalidateQueries({queryKey:["companiesById",_]})}}),N=t=>{_.value=t,I(t)};return(t,y)=>{var g,b,S,w,z;const B=n("HeadPage"),M=n("Table"),O=n("Pagination"),Q=n("Spinner");return i(),v("section",J,[C("div",X,[E(B,{title:"comapnyTitle",to:e(A).CREATE_COMPANIES.path,onOnSearch:y[0]||(y[0]=V=>e(u)(V))},null,8,["to"]),C("div",Y,[e(s)&&((g=e(a))!=null&&g.count)?(i(),T(M,{key:0,headers:k.value,table:(b=e(a))==null?void 0:b.organizations,to:e(A).UPDATE_COMPANIES.name,onOnActionDelete:N},null,8,["headers","table","to"])):r("",!0),E(O,{count:(S=e(a))==null?void 0:S.count,isSucces:e(s),isEmpty:!!((w=e(a))!=null&&w.count)},null,8,["count","isSucces","isEmpty"]),e(D)?(i(),T(Q,{key:1})):r("",!0),e(s)&&!((z=e(a))!=null&&z.count)||e(q)?(i(),v("div",Z,R(t.$t("emptyTableTitle")),1)):r("",!0)])])])}}};export{se as default};
//# sourceMappingURL=index-xhg-XRm4.js.map
