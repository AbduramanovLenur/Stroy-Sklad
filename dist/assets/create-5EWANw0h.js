import{u as U,a as D,z as O,r as v,c as P,d as M,e as $,k as z,h as o,w as G,F as j,C as J,A as u,i as m,D as V,l as W,m as l,o as s,B as b,f as C,t as R}from"./index-8f2nY-tA.js";import{u as X,r as S}from"./i18n-validators-fCwa1ZSs.js";import{a as Y,u as Z}from"./generic.services-2-3LJT-B.js";import{u as ee}from"./useQuery-eGcy0OjN.js";import{c as oe}from"./crud.services-swolhUoO.js";import{e as ae}from"./manual.services-mSBZeXJB.js";const te={class:"manage section-height shadowed"},se={class:"manage__inner section-padding"},ie={__name:"create",async setup(re){let n,d;const k=Y(),w=W();U(),D();const{data:B,isLoading:L,isSuccess:c}=([n,d]=O(()=>ee({queryKey:["modules"],queryFn:()=>ae()})),n=await n,d(),n),a=v({shortName:"",fullName:"",roleModules:[]}),F=P(()=>({shortName:{required:S},fullName:{required:S}})),t=X(F,a),K=v([{id:1,model:"fullName",label:"fullNameRoleLabel",placeholder:"fullNameRolePlaceholder",icon:"role",errorKey:"fullName"},{id:2,model:"shortName",label:"shortNameRoleLabel",placeholder:"shortNameRolePlaceholder",icon:"role",errorKey:"shortName"}]),{mutate:q}=Z({mutationFn:r=>oe("Role",r),onSuccess:()=>{k.invalidateQueries({queryKey:["roles"]}),w.push(b.ROLES.path)}}),E=()=>{t.value.$validate(),!t.value.$errors.length&&(q(a.value),t.value.$reset())};return(r,i)=>{var p,_;const x=l("ManageHead"),A=l("FormInput"),H=l("ActionsModules"),I=l("CustomButton"),Q=l("Spinner");return s(),M("section",te,[$("div",se,[z(x,{title:"addNewRolesTitle",to:o(b).ROLES.path},null,8,["to"]),$("form",{class:"manage__form form-manage",onSubmit:G(E,["prevent"])},[(s(!0),M(j,null,J(K.value,e=>{var f,h,N,y,g;return s(),u(A,{key:e.id,modelValue:a.value[e.model],"onUpdate:modelValue":T=>a.value[e.model]=T,width:500,placeholder:r.$t(e.placeholder),name:e.icon,error:(h=(f=o(t))==null?void 0:f[e.errorKey])==null?void 0:h.$error,textError:(g=(y=(N=o(t))==null?void 0:N[e.errorKey])==null?void 0:y.$errors[0])==null?void 0:g.$message},{default:V(()=>[C(R(r.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),o(c)?(s(),u(H,{key:0,modelValue:a.value.roleModules,"onUpdate:modelValue":i[0]||(i[0]=e=>a.value.roleModules=e),actions:o(B)},null,8,["modelValue","actions"])):m("",!0),o(c)?(s(),u(I,{key:1,className:`form__submit manage__submit ${(_=(p=o(t))==null?void 0:p.fullName.$errors[0])!=null&&_.$message?"centered":""}`},{default:V(()=>[C(R(r.$t("formButton")),1)]),_:1},8,["className"])):m("",!0)],32),o(L)?(s(),u(Q,{key:0})):m("",!0)])])}}};export{ie as default};
//# sourceMappingURL=create-5EWANw0h.js.map
