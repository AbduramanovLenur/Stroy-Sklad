import{_ as N,u as k,a as L,r as v,c as V,b as d,d as a,t as u,w as z,F as D,e as B,f as F,g as K,h as M,o as m,i as T,j as P,v as U,k as f,l as q,p as C,m as H}from"./index-rVcEkfs7.js";import{u as O,r as w,m as j}from"./i18n-validators-9lIM3i5c.js";import{r as x,u as E}from"./generic.services-VYFQaCza.js";const R="/assets/logo-auth-H25DvOh-.svg",A=o=>{const r={...o};for(const _ in r)r[_]="";return r},G=o=>x({url:"account/Login",method:"POST",body:o}),J=o=>(C("data-v-8ae6c491"),o=o(),H(),o),Q={class:"auth"},W={class:"container"},X={class:"auth__inner"},Y={class:"auth__wrapper"},Z=J(()=>a("div",{class:"auth__logo"},[a("img",{src:R,alt:"logo",width:"415",height:"80",loading:"lazy"})],-1)),ee={class:"auth__title"},ae=["type","onUpdate:modelValue","name","placeholder"],oe={key:0,class:"error-white"},te={class:"auth__submit",type:"submit"},se={__name:"auth",setup(o){const r=K(),_=k(),{t:I}=L(),s=v({userName:"",password:""}),y=V(()=>({userName:{required:w},password:{required:w,minLength:j}})),l=O(y,s),S=v([{id:1,label:"loginLabel",type:"text",model:"userName",name:"login",placeholder:"loginPlaceholder",errorKey:"userName"},{id:2,label:"passwordLabel",type:"password",model:"password",name:"password",placeholder:"passwordPlaceholder",errorKey:"password"}]),{mutate:b}=E({mutationFn:t=>G(t),onSuccess:t=>{const{token:g,user:{id:h,role:e,fullName:n,organizationName:c,organizationId:i,roleId:p}}=t;localStorage.setItem("id",h),localStorage.setItem("token",g),localStorage.setItem("name",n),localStorage.setItem("role",e),localStorage.setItem("organization",c),localStorage.setItem("organizationId",i),localStorage.setItem("roleId",p),r.push("/"),_.success(I("signInToast")),s.value=A(s.value),l.value.$reset()}}),$=()=>{l.value.$validate(),!l.value.$errors.length&&b(s.value)};return(t,g)=>{const h=M("SwitcherLang");return m(),d("section",Q,[a("div",W,[a("div",X,[a("div",Y,[Z,a("h2",ee,u(t.$t("login")),1),a("form",{class:"auth__form",onSubmit:z($,["prevent"])},[(m(!0),d(D,null,B(S.value,e=>{var n,c,i;return m(),d("label",{key:e.id,class:"auth__label"},[T(u(t.$t(e.label))+" ",1),P(a("input",{class:"auth__input",type:e.type,"onUpdate:modelValue":p=>s.value[e.model]=p,name:e.name,placeholder:t.$t(e.placeholder)},null,8,ae),[[U,s.value[e.model]]]),(n=f(l))!=null&&n[e.errorKey].$error?(m(),d("span",oe,u((i=(c=f(l))==null?void 0:c[e.errorKey].$errors[0])==null?void 0:i.$message),1)):q("",!0)])}),128)),a("button",te,u(t.$t("loginButton")),1)],32),F(h)])])])])}}},ce=N(se,[["__scopeId","data-v-8ae6c491"]]);export{ce as default};
//# sourceMappingURL=auth-78wKatAP.js.map
