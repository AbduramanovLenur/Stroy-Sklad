import{n as Q,s as V,r as c,q as x,x as F,b as w,d as H,f as B,k as e,y as T,l as i,t as R,h as a,o as n,z as C}from"./index-4J3DJU33.js";import{a as M,u as j}from"./generic.services-g-yxowqL.js";import{u as U}from"./useQuery-vRA_EPsL.js";import{g as W,d as $}from"./crud.services-6dsbqkZk.js";import{r as G}from"./index-SHLDJmel.js";const J={class:"blocks section-height"},X={class:"blocks__inner section-padding"},Y={key:2,class:"empty-table"},ne={__name:"index",async setup(Z){let s,r;const d=M(),u=Q(),{setSearchValue:b}=u,{page:m,limit:_,search:E}=V(u),k=c(localStorage.getItem("organizationId"));x(()=>{b("")});const p=c(""),h=G(E,500),I=c([{id:1,label:"blockName",width:185},{id:2,label:"blockObject",width:205},{id:3,label:"blockOrganization",width:260},{id:4,label:"blockFloors",width:230},{id:5,label:"blockRooms",width:235},{id:6,label:"blockAddress",width:150},{id:7,label:"blockState",width:140},{id:8,label:"blockAction",width:125}]),{data:o,isLoading:q,isSuccess:l,isError:A}=([s,r]=F(()=>U({queryKey:["blocks",{page:m,limit:_,debouncedSearch:h,organizationId:k}],queryFn:()=>W("building_block",m.value,_.value,h.value,{organizationId:k.value})})),s=await s,r(),s),{mutate:O}=j({mutationFn:t=>$("building_block",t),onSuccess:()=>{d.invalidateQueries({queryKey:["blocks"]}),d.invalidateQueries({queryKey:["blocksById",p]})}}),z=async t=>{p.value=t,O(t)};return(t,y)=>{var g,S,f,v;const D=a("HeadPage"),K=a("Table"),L=a("Pagination"),P=a("Spinner");return n(),w("section",J,[H("div",X,[B(D,{title:"blockTitle",to:e(C).CREATE_BLOCKS.path,onOnSearch:y[0]||(y[0]=N=>e(b)(N))},null,8,["to"]),e(l)&&((g=e(o))!=null&&g.count)?(n(),T(K,{key:0,headers:I.value,table:(S=e(o))==null?void 0:S.blocks,to:e(C).UPDATE_BLOCKS.name,onOnActionDelete:z},null,8,["headers","table","to"])):i("",!0),B(L,{count:(f=e(o))==null?void 0:f.count,isSucces:e(l),isEmpty:!!((v=e(o))!=null&&v.count)},null,8,["count","isSucces","isEmpty"]),e(q)?(n(),T(P,{key:1})):i("",!0),e(l)&&!e(o).count||e(A)?(n(),w("div",Y,R(t.$t("emptyTableTitle")),1)):i("",!0)])])}}};export{ne as default};
//# sourceMappingURL=index-mLC7O3dc.js.map
