import{n as V,s as x,r as u,q as H,x as F,y as J,b as E,d as M,f as C,k as e,z as k,l as d,t as R,h as s,o as n,A as q}from"./index-8-F5s4j3.js";import{a as U,u as W}from"./generic.services-CQjHStj7.js";import{u as $}from"./useQuery-KERFi8ks.js";import{g as G,d as X}from"./crud.services-Xs683v05.js";import{r as Y}from"./index-stR_uWnS.js";const Z={class:"object"},ee={class:"object__inner section-padding"},te={key:2,class:"empty-table shadowed"},re={__name:"index",async setup(oe){let a,b;const i=U(),m=V(),{setSearchValue:p,setPagePagination:A}=m,{page:c,limit:r,search:_}=x(m),y=u(localStorage.getItem("organizationId"));H(()=>{p("")}),F(_,()=>{A(1)});const g=u(""),h=Y(_,500),B=u([{id:1,label:"objectName",width:385},{id:2,label:"objectOrganization",width:480},{id:3,label:"objectAddress",width:185},{id:4,label:"objectState",width:255},{id:5,label:"objectAction",width:255}]),{data:o,isLoading:I,isSuccess:l,isError:O}=([a,b]=J(()=>$({queryKey:["objects",{page:c,limit:r,debouncedSearch:h,organizationId:y}],queryFn:()=>G("building_object",c.value,r.value,h.value,{organizationId:y.value})})),a=await a,b(),a),{mutate:P}=W({mutationFn:t=>X("building_object",t),onSuccess:()=>{i.invalidateQueries({queryKey:["objects"]}),i.invalidateQueries({queryKey:["objectById",g]}),i.invalidateQueries({queryKey:["objectsList"]})}}),z=async t=>{g.value=t,P(t)};return(t,j)=>{var S,f,v,T,w;const D=s("HeadPage"),Q=s("Table"),K=s("Pagination"),L=s("Spinner");return n(),E("section",Z,[M("div",ee,[C(D,{title:"objectTitle",to:e(q).CREATE_OBJECTS.path,onOnSearch:j[0]||(j[0]=N=>e(p)(N))},null,8,["to"]),e(l)&&((S=e(o))!=null&&S.count)?(n(),k(Q,{key:0,headers:B.value,table:(f=e(o))==null?void 0:f.objects,to:e(q).UPDATE_OBJECTS.name,options:{page:e(c),limit:e(r)},onOnActionDelete:z},null,8,["headers","table","to","options"])):d("",!0),C(K,{count:(v=e(o))==null?void 0:v.count,isSucces:e(l),isEmpty:!!((T=e(o))!=null&&T.count)},null,8,["count","isSucces","isEmpty"]),e(I)?(n(),k(L,{key:1})):d("",!0),e(l)&&!((w=e(o))!=null&&w.count)||e(O)?(n(),E("div",te,R(t.$t("emptyTableTitle")),1)):d("",!0)])])}}};export{re as default};
//# sourceMappingURL=index-_MbK2lAK.js.map
