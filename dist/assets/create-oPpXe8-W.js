import{u as H,a as Y,y as v,r as b,c as j,b as N,d as L,f as K,B as y,w as J,F as I,e as V,k as u,g as W,h as g,o as c,i as h,t as _,z,A as X}from"./index-TqTqIbHh.js";import{u as Z,r as l,m as ee}from"./i18n-validators-zAZPYeBJ.js";import{a as oe,u as re}from"./generic.services-wmG985Iz.js";import{u as F}from"./useQuery-ZuTrOc-G.js";import{c as ae}from"./crud.services-ChiVIUDS.js";import{c as se,d as le}from"./manual.services-2IlJk8n9.js";const ne={class:"manage section-height shadowed"},te={class:"manage__inner section-padding"},he={__name:"create",async setup(ie){let o,p;const S=oe(),E=W();H(),Y();const{data:P,isSuccess:B,isLoading:q}=([o,p]=v(()=>F({queryKey:["organizations"],queryFn:()=>se()})),o=await o,p(),o),{data:C,isSuccess:k,isLoading:O}=([o,p]=v(()=>F({queryKey:["roles"],queryFn:()=>le()})),o=await o,p(),o),s=b({fullName:"",userName:"",password:"",phoneNumber:"",organizationId:"",roleId:""}),R=j(()=>({fullName:{required:l},userName:{required:l},password:{required:l,minLength:ee},phoneNumber:{required:l},organizationId:{required:l},roleId:{required:l}})),r=Z(R,s),T=b([{id:1,model:"fullName",label:"employeesFullNameLabel",placeholder:"employeesFullNamePlaceholder",icon:"person",errorKey:"fullName"},{id:2,model:"userName",label:"employeesLoginLabel",placeholder:"employeesLoginPlaceholder",icon:"login",errorKey:"userName"},{id:3,model:"password",label:"employeesPasswordLabel",placeholder:"employeesPasswordPlaceholder",icon:"password",errorKey:"password"},{id:4,model:"phoneNumber",label:"employeesPhoneLabel",placeholder:"employeesPhonePlaceholder",icon:"phone",errorKey:"phoneNumber"}]),x=b([{id:1,model:"organizationId",label:"employeesOrganizationLabel",options:P,errorKey:"organizationId",success:B,loading:q},{id:2,model:"roleId",label:"employeesRoleLabel",options:C,errorKey:"roleId",success:k,loading:O}]),{mutate:M}=re({mutationFn:a=>ae("user",a),onSuccess:()=>{S.invalidateQueries({queryKey:["employees"]}),E.push(X.EMPLOYEES.path)}}),U=()=>{r.value.$validate(),!r.value.$errors.length&&(M(s.value),r.value.$reset())};return(a,de)=>{var $,w;const Q=g("Title"),A=g("FormInput"),G=g("FormSelect"),D=g("CustomButton");return c(),N("section",ne,[L("div",te,[K(Q,null,{default:y(()=>[h(`\r
                `+_(a.$t("addNewEmployeesTitle"))+`\r
            `,1)]),_:1}),L("form",{class:"manage__form form-manage",onSubmit:J(U,["prevent"])},[(c(!0),N(I,null,V(T.value,e=>{var n,t,i,d,m;return c(),z(A,{key:e.id,modelValue:s.value[e.model],"onUpdate:modelValue":f=>s.value[e.model]=f,width:500,placeholder:a.$t(e.placeholder),name:e.icon,error:(t=(n=u(r))==null?void 0:n[e.errorKey])==null?void 0:t.$error,textError:(m=(d=(i=u(r))==null?void 0:i[e.errorKey])==null?void 0:d.$errors[0])==null?void 0:m.$message},{default:y(()=>[h(_(a.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),(c(!0),N(I,null,V(x.value,e=>{var n,t,i,d,m;return c(),z(G,{key:e.id,modelValue:s.value[e.model],"onUpdate:modelValue":f=>s.value[e.model]=f,width:500,options:e.options,error:(t=(n=u(r))==null?void 0:n[e==null?void 0:e.errorKey])==null?void 0:t.$error,textError:(m=(d=(i=u(r))==null?void 0:i[e==null?void 0:e.errorKey])==null?void 0:d.$errors[0])==null?void 0:m.$message,success:e.success,loading:e.loading},{default:y(()=>[h(_(a.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","options","error","textError","success","loading"])}),128)),K(D,{className:`form__submit ${(w=($=u(r))==null?void 0:$.roleId.$errors[0])!=null&&w.$message?"centered":""}`},{default:y(()=>[h(_(a.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{he as default};
//# sourceMappingURL=create-oPpXe8-W.js.map
