import{u as T,a as A,r as p,y as O,c as j,b as g,d as w,j as I,g as l,w as D,F as V,B as K,C as _,k as J,l as h,o as i,A as L,z as F,e as f,t as N}from"./index-u_2KKI46.js";import{u as W,r as s,m as X}from"./i18n-validators-SGtCpuoI.js";import{a as Y,u as Z}from"./generic.services-Zkt5ZkSV.js";import{u as ee}from"./useQuery-n3W-mpu_.js";import{c as oe}from"./crud.services-WcX_HSPp.js";import{d as re}from"./manual.services-W9iJUjqa.js";const ae={class:"manage section-height shadowed"},le={class:"manage__inner section-padding"},pe={__name:"create",async setup(se){let c,b;const R=Y(),S=J();T(),A();const P=p(localStorage.getItem("organizationId")),{data:B,isSuccess:C,isLoading:E}=([c,b]=O(()=>ee({queryKey:["roles"],queryFn:()=>re()})),c=await c,b(),c),a=p({fullName:"",userName:"",password:"",phoneNumber:"",organizationId:P.value,roleId:[]}),U=j(()=>({fullName:{required:s},userName:{required:s},password:{required:s,minLength:X},phoneNumber:{required:s},organizationId:{required:s},roleId:{required:s}})),r=W(U,a),k=p([{id:1,model:"fullName",label:"employeesFullNameLabel",placeholder:"employeesFullNamePlaceholder",icon:"person",errorKey:"fullName"},{id:2,model:"userName",label:"employeesLoginLabel",placeholder:"employeesLoginPlaceholder",icon:"login",errorKey:"userName"},{id:3,model:"password",label:"employeesPasswordLabel",placeholder:"employeesPasswordPlaceholder",icon:"password",errorKey:"password"},{id:4,model:"phoneNumber",label:"employeesPhoneLabel",placeholder:"employeesPhonePlaceholder",icon:"phone",errorKey:"phoneNumber"}]),M=p([{id:1,model:"roleId",label:"employeesRoleLabel",placeholder:"employeesRolePlaceholder",errorKey:"roleId",options:B,success:C,loading:E}]),{mutate:q}=Z({onMutate:o=>{o.roleId=o.roleId[0]},mutationFn:o=>oe("user",o),onSuccess:()=>{R.invalidateQueries({queryKey:["orgUser"]}),S.push(L.ORG_USER.path)}}),x=()=>{r.value.$validate(),!r.value.$errors.length&&(q(a.value),r.value.$reset())};return(o,te)=>{var v,$;const z=h("ManageHead"),G=h("FormInput"),H=h("FormSelect"),Q=h("CustomButton");return i(),g("section",ae,[w("div",le,[I(z,{title:"addNewEmployeesTitle",to:l(L).ORG_USER.path},null,8,["to"]),w("form",{class:"manage__form form-manage",onSubmit:D(x,["prevent"])},[(i(!0),g(V,null,K(k.value,e=>{var t,n,d,m,u;return i(),F(G,{key:e.id,modelValue:a.value[e.model],"onUpdate:modelValue":y=>a.value[e.model]=y,width:500,placeholder:o.$t(e.placeholder),name:e.icon,error:(n=(t=l(r))==null?void 0:t[e.errorKey])==null?void 0:n.$error,textError:(u=(m=(d=l(r))==null?void 0:d[e.errorKey])==null?void 0:m.$errors[0])==null?void 0:u.$message},{default:_(()=>[f(N(o.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),(i(!0),g(V,null,K(M.value,e=>{var t,n,d,m,u;return i(),F(H,{key:e.id,modelValue:a.value[e.model],"onUpdate:modelValue":y=>a.value[e.model]=y,width:500,options:e.options,error:(n=(t=l(r))==null?void 0:t[e==null?void 0:e.errorKey])==null?void 0:n.$error,placeholder:e==null?void 0:e.placeholder,textError:(u=(m=(d=l(r))==null?void 0:d[e==null?void 0:e.errorKey])==null?void 0:m.$errors[0])==null?void 0:u.$message,success:e.success,loading:e.loading},{default:_(()=>[f(N(o.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","options","error","placeholder","textError","success","loading"])}),128)),I(Q,{className:`form__submit ${($=(v=l(r))==null?void 0:v.roleId.$errors[0])!=null&&$.$message?"centered":""}`},{default:_(()=>[f(N(o.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{pe as default};
//# sourceMappingURL=create-Gu99ABDE.js.map
