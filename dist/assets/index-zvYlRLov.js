import{n as H,s as K,r as c,q as L,x as F,y as M,b as v,d as O,f as P,k as e,z as T,l as r,t as R,h as a,o,A as k}from"./index-VQIUi_yG.js";import{a as X,u as U}from"./generic.services-qeqkLGxM.js";import{u as W}from"./useQuery-p6XK-aiu.js";import{g as $,d as j}from"./crud.services-xidt0Eez.js";import{r as G}from"./index-3HKo3yQn.js";const J={class:"expenses"},Y={class:"expenses__inner section-padding"},Z={key:2,class:"empty-table shadowed"},ie={__name:"index",async setup(ee){let s,l;const u=X(),d=H(),{setSearchValue:p,setPagePagination:w}=d,{page:m,limit:_,search:y}=K(d),S=c(localStorage.getItem("organizationId"));L(()=>{p("")}),F(y,()=>{w(1)});const g=c(""),h=G(y,500),I=c([{id:1,label:"expensesName",width:635},{id:7,label:"expensesState",width:440},{id:8,label:"expensesAction",width:455}]),{data:n,isLoading:q,isSuccess:i,isError:A}=([s,l]=M(()=>W({queryKey:["expenses",{page:m,limit:_,debouncedSearch:h,organizationId:S}],queryFn:()=>$("cost",m.value,_.value,h.value,{organizationId:S.value})})),s=await s,l(),s),{mutate:C}=U({mutationFn:t=>j("cost",t),onSuccess:()=>{u.invalidateQueries({queryKey:["expenses"]}),u.invalidateQueries({queryKey:["expensesById",g]})}}),N=async t=>{g.value=t,C(t)};return(t,x)=>{var b,E,f;const B=a("HeadPage"),D=a("Table"),z=a("Pagination"),Q=a("Spinner");return o(),v("section",J,[O("div",Y,[P(B,{title:"expensesTitle",to:e(k).CREATE_EXPENSES.path,onOnSearch:x[0]||(x[0]=V=>e(p)(V))},null,8,["to"]),e(i)&&((b=e(n))!=null&&b.count)?(o(),T(D,{key:0,headers:I.value,table:(E=e(n))==null?void 0:E.cost,to:e(k).UPDATE_EXPENSES.name,onOnActionDelete:N},null,8,["headers","table","to"])):r("",!0),P(z,{count:(f=e(n))==null?void 0:f.count,isSucces:e(i)},null,8,["count","isSucces"]),e(q)?(o(),T(Q,{key:1})):r("",!0),e(i)&&!e(n).count||e(A)?(o(),v("div",Z,R(t.$t("emptyTableTitle")),1)):r("",!0)])])}}};export{ie as default};
//# sourceMappingURL=index-zvYlRLov.js.map
