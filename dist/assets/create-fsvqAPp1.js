import{u as H,a as I,b as L,s as Q,c as E,r as v,d as N,e as y,k as g,h as o,w as R,F as U,B as X,C as $,i as z,l as A,m as l,o as u,z as S,y as D,f as C,t as V,E as j}from"./index--8tqH1cI.js";import{u as G,r as J}from"./i18n-validators-ifF63VWe.js";import{a as O,u as W}from"./generic.services-lNDsx7jF.js";import{c as Y}from"./crud.services-U-Ys9NO0.js";const Z={key:0,class:"manage section-height shadowed"},ee={class:"manage__inner section-padding"},ne={__name:"create",setup(ae){const m=O(),B=A();H(),I();const b=L(),{user:r}=Q(b),w=E(()=>{var e,n;return!!((n=(e=r==null?void 0:r.value.user)==null?void 0:e.modules)!=null&&n.includes(j.EXPENS.CREATE))}),t=v({fullName:""}),x=E(()=>({fullName:{required:J}})),s=G(x,t),k=v([{id:1,model:"fullName",label:"nameExpensesLabel",placeholder:"nameExpensesPlaceholder",icon:"input-company",errorKey:"fullName"}]),{mutate:M}=W({mutationFn:e=>Y("cost",e),onSuccess:()=>{m.invalidateQueries({queryKey:["expenses"]}),m.invalidateQueries({queryKey:["costsList"]}),B.push(S.EXPENSES.path)}}),F=()=>{s.value.$validate(),!s.value.$errors.length&&(M(t.value),s.value.$reset())};return(e,n)=>{var c,d;const K=l("ManageHead"),T=l("FormInput"),q=l("CustomButton");return w.value?(u(),N("section",Z,[y("div",ee,[g(K,{title:"addNewExpensesTitle",to:o(S).EXPENSES.path},null,8,["to"]),y("form",{class:"manage__form form-manage",onSubmit:R(F,["prevent"])},[(u(!0),N(U,null,X(k.value,a=>{var i,p,f,_,h;return u(),D(T,{key:a.id,modelValue:t.value[a.model],"onUpdate:modelValue":P=>t.value[a.model]=P,width:500,placeholder:e.$t(a.placeholder),name:a.icon,error:(p=(i=o(s))==null?void 0:i[a.errorKey])==null?void 0:p.$error,textError:(h=(_=(f=o(s))==null?void 0:f[a.errorKey])==null?void 0:_.$errors[0])==null?void 0:h.$message},{default:$(()=>[C(V(e.$t(a.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),g(q,{className:`form__submit ${(d=(c=o(s))==null?void 0:c.fullName.$errors[0])!=null&&d.$message?"centered":""}`},{default:$(()=>[C(V(e.$t("formButton")),1)]),_:1},8,["className"])],32)])])):z("",!0)}}};export{ne as default};
//# sourceMappingURL=create-fsvqAPp1.js.map
