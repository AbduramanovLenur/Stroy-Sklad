import{u as j,a as G,r as y,y as b,c as J,b as $,d as w,f as V,B as p,w as X,F as S,e as F,k as d,g as Y,h as g,o as m,i as _,t as h,z as B,A as Z}from"./index-TqTqIbHh.js";import{u as ee,r as f}from"./i18n-validators-zAZPYeBJ.js";import{a as ae,u as te}from"./generic.services-wmG985Iz.js";import{u as C}from"./useQuery-ZuTrOc-G.js";import{c as oe}from"./crud.services-ChiVIUDS.js";import{f as re,g as se}from"./manual.services-2IlJk8n9.js";const ne={class:"manage section-height shadowed"},ue={class:"manage__inner section-padding"},_e={__name:"create",async setup(ie){let a,c;const K=ae(),L=Y();j(),G();const q=y(localStorage.getItem("organizationId")),{data:E,isSuccess:k,isLoading:z}=([a,c]=b(()=>C({queryKey:["types"],queryFn:()=>re()})),a=await a,c(),a),{data:M,isSuccess:N,isLoading:Q}=([a,c]=b(()=>C({queryKey:["materials",{organizationId:q}],queryFn:()=>se(q.value)})),a=await a,c(),a),o=y({materialId:"",quantity:"",quantityTypeId:"",organizationId:""}),U=J(()=>({materialId:{required:f},quantity:{required:f},quantityTypeId:{required:f},organizationId:{required:f}})),t=ee(U,o),W=y([{id:1,model:"quantity",label:"quantityWarehouseLabel",placeholder:"quantityWarehousePlaceholder",icon:"list",errorKey:"quantity"}]),x=y([{id:1,model:"materialId",label:"materialsWarehouseLabel",options:M,success:N,loading:Q},{id:2,model:"quantityTypeId",label:"qunatityTypesWarehouseLabel",options:E,success:k,loading:z}]),{mutate:A}=te({mutationFn:r=>oe("warehouse",r),onSuccess:()=>{K.invalidateQueries({queryKey:["warehouse"]}),L.push(Z.WAREHOUSE.path)}}),H=()=>{o.value.organizationId=q.value,t.value.$validate(),!t.value.$errors.length&&(A(o.value),t.value.$reset())};return(r,le)=>{var I,T;const P=g("Title"),R=g("FormInput"),D=g("FormSelect"),O=g("CustomButton");return m(),$("section",ne,[w("div",ue,[V(P,null,{default:p(()=>[_(`\r
                `+h(r.$t("addNewProductTitle"))+`\r
            `,1)]),_:1}),w("form",{class:"manage__form form-manage",onSubmit:X(H,["prevent"])},[(m(!0),$(S,null,F(W.value,e=>{var s,n,u,i,l;return m(),B(R,{key:e.id,modelValue:o.value[e.model],"onUpdate:modelValue":v=>o.value[e.model]=v,width:500,placeholder:r.$t(e.placeholder),name:e.icon,error:(n=(s=d(t))==null?void 0:s[e.errorKey])==null?void 0:n.$error,textError:(l=(i=(u=d(t))==null?void 0:u[e.errorKey])==null?void 0:i.$errors[0])==null?void 0:l.$message},{default:p(()=>[_(h(r.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),(m(!0),$(S,null,F(x.value,e=>{var s,n,u,i,l;return m(),B(D,{key:e.id,modelValue:o.value[e.model],"onUpdate:modelValue":v=>o.value[e.model]=v,width:500,options:e.options,error:(n=(s=d(t))==null?void 0:s[e==null?void 0:e.errorKey])==null?void 0:n.$error,textError:(l=(i=(u=d(t))==null?void 0:u[e==null?void 0:e.errorKey])==null?void 0:i.$errors[0])==null?void 0:l.$message,success:e.success,loading:e.loading},{default:p(()=>[_(h(r.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","options","error","textError","success","loading"])}),128)),V(O,{className:`form__submit ${(T=(I=d(t))==null?void 0:I.quantityTypeId.$errors[0])!=null&&T.$message?"centered":""}`},{default:p(()=>[_(h(r.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{_e as default};
//# sourceMappingURL=create-Beb1SAxr.js.map
