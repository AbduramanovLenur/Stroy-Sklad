import{u as H,a as I,b as L,x as Q,c as v,r as N,d as E,e as g,k as y,h as o,w as R,F as U,C as X,D as $,i as A,l as D,m as l,o as u,A as C,z,f as S,t as V,G}from"./index-PETUmaAP.js";import{u as j,r as J}from"./i18n-validators-2l0qbyJV.js";import{a as O,u as W}from"./generic.services-keg-kLkd.js";import{c as Y}from"./crud.services-B84SRtCm.js";const Z={key:0,class:"manage section-height shadowed"},ee={class:"manage__inner section-padding"},ne={__name:"create",setup(ae){const m=O(),x=D();H(),I();const b=L(),{user:r}=Q(b),w=v(()=>{var e,n;return!!((n=(e=r==null?void 0:r.value.user)==null?void 0:e.modules)!=null&&n.includes(G.EXPENS.CREATE))}),t=N({fullName:""}),B=v(()=>({fullName:{required:J}})),s=j(B,t),k=N([{id:1,model:"fullName",label:"nameExpensesLabel",placeholder:"nameExpensesPlaceholder",icon:"input-company",errorKey:"fullName"}]),{mutate:M}=W({mutationFn:e=>Y("cost",e),onSuccess:()=>{m.invalidateQueries({queryKey:["expenses"]}),m.invalidateQueries({queryKey:["costsList"]}),x.push(C.EXPENS.path)}}),F=()=>{s.value.$validate(),!s.value.$errors.length&&(M(t.value),s.value.$reset())};return(e,n)=>{var c,d;const K=l("ManageHead"),T=l("FormInput"),q=l("CustomButton");return w.value?(u(),E("section",Z,[g("div",ee,[y(K,{title:"addNewExpensesTitle",to:o(C).EXPENS.path},null,8,["to"]),g("form",{class:"manage__form form-manage",onSubmit:R(F,["prevent"])},[(u(!0),E(U,null,X(k.value,a=>{var i,p,f,_,h;return u(),z(T,{key:a.id,modelValue:t.value[a.model],"onUpdate:modelValue":P=>t.value[a.model]=P,width:500,placeholder:e.$t(a.placeholder),name:a.icon,error:(p=(i=o(s))==null?void 0:i[a.errorKey])==null?void 0:p.$error,textError:(h=(_=(f=o(s))==null?void 0:f[a.errorKey])==null?void 0:_.$errors[0])==null?void 0:h.$message},{default:$(()=>[S(V(e.$t(a.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),y(q,{className:`form__submit ${(d=(c=o(s))==null?void 0:c.fullName.$errors[0])!=null&&d.$message?"centered":""}`},{default:$(()=>[S(V(e.$t("formButton")),1)]),_:1},8,["className"])],32)])])):A("",!0)}}};export{ne as default};
//# sourceMappingURL=create-F-G4Jnzb.js.map
