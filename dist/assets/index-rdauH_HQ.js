import{x as j,y as W,b as J,c as X,r as k,z as Y,d as O,e as Z,k as P,h as e,A as Q,i as n,t as ee,m as r,o as u,s as q,G as i}from"./index-0QVwumwK.js";import{a as se,u as te}from"./generic.services-MiG8bmru.js";import{u as oe}from"./useQuery-pQbev7C6.js";import{g as ae,d as ne}from"./crud.services-E8qyVQZH.js";import{r as re}from"./index-7HbIS0Uu.js";const ue={key:0,class:"warehouse"},ie={class:"warehouse__inner section-padding"},ce={key:2,class:"empty-table shadowed"},we={__name:"index",async setup(le){let o,m;const p=se(),B=j(),{page:c,limit:l,search:I}=W(B),L=J(),{user:t}=W(L),_=X(()=>{var s,h;return!!((h=(s=t==null?void 0:t.value.user)==null?void 0:s.modules)!=null&&h.includes(i.WAREHOUSE.READ))}),w=k(""),S=re(I,500),N=k([{id:1,label:"warehouseName",width:540},{id:2,label:"warehouseQuantity",width:445},{id:3,label:"warehouseQuantityType",width:305}]),{data:a,isLoading:x,isSuccess:d,isError:z}=([o,m]=Y(()=>oe({queryKey:["warehouse",{page:c,limit:l,debouncedSearch:S,organizationId:t.value.user.organizationId}],queryFn:()=>ae("warehouse",c.value,l.value,S.value),enabled:_})),o=await o,m(),o),{mutate:K}=te({mutationFn:s=>ne("warehouse",s),onSuccess:s=>{p.invalidateQueries({queryKey:["warehouse"]}),p.invalidateQueries({queryKey:["warehouseById",w]})}}),V=async s=>{w.value=s,K(s)};return(s,h)=>{var y,E,b,g,A,v,T,f,U,D,R,C,H;const F=r("HeadPage"),M=r("Table"),G=r("Pagination"),$=r("Spinner");return _.value?(u(),O("section",ue,[Z("div",ie,[P(F,{title:"warehouseTitle",to:e(q).CREATE_WAREHOUSE.path,isShowCreate:(b=(E=(y=e(t))==null?void 0:y.user)==null?void 0:E.modules)==null?void 0:b.includes(e(i).WAREHOUSE.CREATE)},null,8,["to","isShowCreate"]),e(d)&&((g=e(a))!=null&&g.count)?(u(),Q(M,{key:0,headers:N.value,table:(A=e(a))==null?void 0:A.warehouse,to:e(q).UPDATE_WAREHOUSE.name,options:{page:e(c),limit:e(l)},isShowUpdate:(f=(T=(v=e(t))==null?void 0:v.user)==null?void 0:T.modules)==null?void 0:f.includes(e(i).WAREHOUSE.UPDATE),isShowDelete:(R=(D=(U=e(t))==null?void 0:U.user)==null?void 0:D.modules)==null?void 0:R.includes(e(i).WAREHOUSE.DELETE),onOnActionDelete:V},null,8,["headers","table","to","options","isShowUpdate","isShowDelete"])):n("",!0),P(G,{count:(C=e(a))==null?void 0:C.count,isSucces:e(d)},null,8,["count","isSucces"]),e(x)?(u(),Q($,{key:1})):n("",!0),e(d)&&!((H=e(a))!=null&&H.count)||e(z)?(u(),O("div",ce,ee(s.$t("emptyTableTitle")),1)):n("",!0)])])):n("",!0)}}};export{we as default};
