import{a as T,u as q}from"./generic.services-zAUdS-UM.js";import{u as C,g as P,d as A}from"./crud.services-AVFHJS4I.js";import{_ as B,r as i,n as L,b as y,d as O,f as x,k as e,q as _,l as r,t as I,h as c,o as n,s as h}from"./index-uEOOChHm.js";const M={class:"employees section-height"},Q={class:"employees__inner section-padding"},z={key:2,class:"empty-table"},D={__name:"index",async setup(F){let a,d;const p=T(),b=i(""),m=i(""),g=i([{id:1,label:"employeesFullName",width:300},{id:2,label:"employeesOrganization",width:320},{id:3,label:"employeesPhone",width:255},{id:4,label:"employeesRole",width:195},{id:5,label:"employeesState",width:250},{id:8,label:"employeesAction",width:190}]),{data:l,isLoading:E,isSuccess:u,isError:f}=([a,d]=L(()=>C({queryKey:["employees"],queryFn:()=>P("user"),select:t=>t.map(s=>{const o={...s,phone:s.phoneNumber,company:s.organizationName};return delete o.phoneNumber,delete o.organizationName,o})})),a=await a,d(),a),{mutate:S}=q({mutationFn:t=>A("user",t),onSuccess:()=>{p.invalidateQueries({queryKey:["employees"]}),p.invalidateQueries({queryKey:["employeesById",m]})}}),v=t=>{m.value=t,S(t)};return(t,s)=>{const o=c("HeadPage"),w=c("Table"),N=c("Spinner");return n(),y("section",M,[O("div",Q,[x(o,{title:"employeesTitle",to:e(h).CREATE_EMPLOYEES.path,onOnSearch:s[0]||(s[0]=k=>b.value=k)},null,8,["to"]),e(u)&&e(l).length?(n(),_(w,{key:0,headers:g.value,table:e(l),to:e(h).UPDATE_EMPLOYEES.name,onOnActionDelete:v},null,8,["headers","table","to"])):r("",!0),e(E)?(n(),_(N,{key:1})):r("",!0),e(u)&&!e(l).length||e(f)?(n(),y("div",z,I(t.$t("emptyTableTitle")),1)):r("",!0)])])}}},R=B(D,[["__scopeId","data-v-c008f9aa"]]);export{R as default};
//# sourceMappingURL=index-1mbEpS3U.js.map
