import{_ as N,u as k,a as V,b as L,r as h,c as D,d as B,o as c,e as u,f as a,t as d,w as F,F as K,g as M,h as T,i as z,v as P,j as p,k as U,l as q,p as C,m as H}from"./index-lIBmWoQk.js";import{r as O,u as j,a as x,b as g,m as A,c as E}from"./generic.services-wyHkLZNP.js";const R="/assets/logo-auth-H25DvOh-.svg",G=t=>O({url:"api/Account",method:"POST",body:t}),J=t=>(C("data-v-525401e6"),t=t(),H(),t),Q={class:"auth"},W={class:"container"},X={class:"auth__inner"},Y={class:"auth__wrapper"},Z=J(()=>a("div",{class:"auth__logo"},[a("img",{src:R,alt:"logo",width:"415",height:"80",loading:"lazy"})],-1)),ee={class:"auth__title"},ae=["type","onUpdate:modelValue","name","placeholder"],se={key:0,class:"error-white"},te={class:"auth__submit",type:"submit"},oe={__name:"auth",setup(t){const v=k(),w=V(),{t:y}=L(),o=h({userName:"",password:""}),f=D(()=>({userName:{required:g},password:{required:g,minLength:A}})),r=j(f,o),S=h([{id:1,label:"loginLabel",type:"text",model:"userName",name:"login",placeholder:"loginPlaceholder",errorKey:"userName"},{id:2,label:"passwordLabel",type:"password",model:"password",name:"password",placeholder:"passwordPlaceholder",errorKey:"password"}]),{mutate:b}=x({mutationFn:s=>G(s),onSuccess:s=>{const{token:m,user:{role:i,fullname:e,organizationName:l,roleId:n}}=s;localStorage.setItem("token",m),localStorage.setItem("name",e),localStorage.setItem("role",i),localStorage.setItem("organization",l),localStorage.setItem("roleId",n),v.push("/"),w.success(y("signInToast")),o.value=E(o.value),r.value.$reset()}}),I=()=>{r.value.$validate(),!r.value.$errors.length&&b(o.value)};return(s,m)=>{const i=B("SwitcherLang");return c(),u("section",Q,[a("div",W,[a("div",X,[a("div",Y,[Z,a("h2",ee,d(s.$t("login")),1),a("form",{class:"auth__form",onSubmit:F(I,["prevent"])},[(c(!0),u(K,null,M(S.value,e=>{var l,n,_;return c(),u("label",{key:e.id,class:"auth__label"},[T(d(s.$t(e.label))+" ",1),z(a("input",{class:"auth__input",type:e.type,"onUpdate:modelValue":$=>o.value[e.model]=$,name:e.name,placeholder:s.$t(e.placeholder)},null,8,ae),[[P,o.value[e.model]]]),(l=p(r))!=null&&l[e.errorKey].$error?(c(),u("span",se,d((_=(n=p(r))==null?void 0:n[e.errorKey].$errors[0])==null?void 0:_.$message),1)):U("",!0)])}),128)),a("button",te,d(s.$t("loginButton")),1)],32),q(i)])])])])}}},ne=N(oe,[["__scopeId","data-v-525401e6"]]);export{ne as default};
//# sourceMappingURL=auth-qe1nVEKb.js.map
