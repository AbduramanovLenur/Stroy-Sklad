import{q as H,s as K,r as l,x as L,y as F,z as M,d as f,e as O,k as v,h as e,A as P,i as u,t as R,m as o,o as a,B as T}from"./index-8f2nY-tA.js";import{a as X,u as U}from"./generic.services-2-3LJT-B.js";import{u as W}from"./useQuery-eGcy0OjN.js";import{g as $,d as j}from"./crud.services-swolhUoO.js";import{r as G}from"./index-N_tz-29j.js";const J={class:"expenses"},Y={class:"expenses__inner section-padding"},Z={key:2,class:"empty-table shadowed"},ie={__name:"index",async setup(ee){let s,d;const p=X(),m=H(),{setSearchValue:_,setPagePagination:k}=m,{page:i,limit:c,search:y}=K(m),q=l(localStorage.getItem("organizationId"));L(()=>{_("")}),F(y,()=>{k(1)});const S=l(""),g=G(y,500),A=l([{id:1,label:"expensesName",width:635},{id:2,label:"expensesState"},{id:3,label:"expensesAction"}]),{data:n,isLoading:B,isSuccess:r,isError:C}=([s,d]=M(()=>W({queryKey:["expenses",{page:i,limit:c,debouncedSearch:g,organizationId:q}],queryFn:()=>$("cost",i.value,c.value,g.value)})),s=await s,d(),s),{mutate:I}=U({mutationFn:t=>j("cost",t),onSuccess:()=>{p.invalidateQueries({queryKey:["expenses"]}),p.invalidateQueries({queryKey:["expensesById",S]})}}),N=async t=>{S.value=t,I(t)};return(t,h)=>{var x,b,E;const w=o("HeadPage"),D=o("Table"),Q=o("Pagination"),V=o("Spinner");return a(),f("section",J,[O("div",Y,[v(w,{title:"expensesTitle",to:e(T).CREATE_EXPENSES.path,onOnSearch:h[0]||(h[0]=z=>e(_)(z))},null,8,["to"]),e(r)&&((x=e(n))!=null&&x.count)?(a(),P(D,{key:0,headers:A.value,table:(b=e(n))==null?void 0:b.cost,to:e(T).UPDATE_EXPENSES.name,options:{page:e(i),limit:e(c)},onOnActionDelete:N},null,8,["headers","table","to","options"])):u("",!0),v(Q,{count:(E=e(n))==null?void 0:E.count,isSucces:e(r)},null,8,["count","isSucces"]),e(B)?(a(),P(V,{key:1})):u("",!0),e(r)&&!e(n).count||e(C)?(a(),f("div",Z,R(t.$t("emptyTableTitle")),1)):u("",!0)])])}}};export{ie as default};
//# sourceMappingURL=index-8w6zII6l.js.map
