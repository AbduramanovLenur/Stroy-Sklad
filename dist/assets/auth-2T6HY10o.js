import{_ as O,u as j,a as x,b as R,r as I,c as A,d as u,e as t,t as n,w as G,f as k,g as V,v as J,h as l,i as _,j as K,k as p,F as Q,l as W,m as h,o as i,p as X,n as Y,q as Z,s as ss}from"./index--ASsptNz.js";import{u as ts,r as L,m as es}from"./i18n-validators-hHlX57Cz.js";import{u as as}from"./useMutation-KDcbY73c.js";import{r as os}from"./generic.services-OmFX1-7T.js";const rs="/assets/logo-b--53z4u.svg",ns=o=>os({url:"account/Login",method:"POST",body:o}),ls=o=>(X("data-v-ff4b8db4"),o=o(),Y(),o),us={class:"auth"},is={class:"container"},cs={class:"auth__inner"},ds={class:"auth__wrapper"},_s=ls(()=>t("div",{class:"auth__logo"},[t("img",{src:rs,alt:"logo",width:"200",height:"65",loading:"lazy"})],-1)),ps={class:"auth__title"},hs={class:"auth__label"},ms=["placeholder"],vs={key:0,class:"error-white"},gs={class:"auth__label"},fs={class:"auth__label-wrapper"},ws=["type","placeholder"],bs={key:0,class:"error-white"},$s={class:"auth__submit",type:"submit"},Ss={key:0,class:"loading"},ys={__name:"auth",setup(o){const M=W(),T=j(),{t:U}=x(),B=R(),{setUser:D}=B,c=I(!1),e=I({userName:"",password:""}),F=A(()=>({userName:{required:L},password:{required:L,minLength:es}})),a=ts(F,e),{status:q,mutate:C}=as({mutationFn:s=>ns(s),onSuccess:s=>{s!=null&&s.success&&(D(s==null?void 0:s.data),e.value=Z(e.value),a.value.$reset(),M.push(ss.HOME.path),setTimeout(()=>T.success(U("signInToast")),150))}}),P=()=>{a.value.$validate(),!a.value.$errors.length&&C(e.value)};return(s,r)=>{var m,v,g,f,w,b,$,S,y,N;const z=h("Icon"),E=h("SwitcherLang"),H=h("Spinner");return i(),u(Q,null,[t("section",us,[t("div",is,[t("div",cs,[t("div",ds,[_s,t("h2",ps,n(s.$t("login")),1),t("form",{class:"auth__form",onSubmit:G(P,["prevent"])},[t("label",hs,[k(n(s.$t("loginLabel"))+" ",1),V(t("input",{class:"auth__input",type:"text","onUpdate:modelValue":r[0]||(r[0]=d=>e.value.userName=d),placeholder:s.$t("loginPlaceholder")},null,8,ms),[[J,e.value.userName,void 0,{trim:!0}]]),(v=(m=l(a))==null?void 0:m.userName)!=null&&v.$error?(i(),u("span",vs,n((w=(f=(g=l(a))==null?void 0:g.userName)==null?void 0:f.$errors[0])==null?void 0:w.$message),1)):_("",!0)]),t("label",gs,[k(n(s.$t("passwordLabel"))+" ",1),t("span",fs,[V(t("input",{class:"auth__input",type:c.value?"text":"password","onUpdate:modelValue":r[1]||(r[1]=d=>e.value.password=d),placeholder:s.$t("passwordPlaceholder")},null,8,ws),[[K,e.value.password,void 0,{trim:!0}]]),t("span",{class:"auth__label-icon",onClick:r[2]||(r[2]=()=>c.value=!c.value)},[p(z,{name:"eye"})])]),($=(b=l(a))==null?void 0:b.password)!=null&&$.$error?(i(),u("span",bs,n((N=(y=(S=l(a))==null?void 0:S.password)==null?void 0:y.$errors[0])==null?void 0:N.$message),1)):_("",!0)]),t("button",$s,n(s.$t("loginButton")),1)],32),p(E)])])])]),l(q)==="pending"?(i(),u("div",Ss,[p(H)])):_("",!0)],64)}}},Ls=O(ys,[["__scopeId","data-v-ff4b8db4"]]);export{Ls as default};
