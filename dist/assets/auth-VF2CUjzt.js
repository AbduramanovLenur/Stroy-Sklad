import{_ as q,u as x,a as F,r as w,c as H,b as I,d as e,t as l,w as K,e as L,f as V,v as O,g as p,h as z,i as j,j as D,k as E,l as M,o as f,p as R,m as A}from"./index-90cmhfpq.js";import{u as G,r as P,m as J}from"./i18n-validators-82Vw9KIo.js";import{r as Q,u as W}from"./generic.services-UXrdyhxI.js";const X="/assets/logo-auth-H25DvOh-.svg",Y=o=>{const n={...o};for(const _ in n)n[_]="";return n},Z=o=>Q({url:"account/Login",method:"POST",body:o}),ee=o=>(R("data-v-d14c753a"),o=o(),A(),o),se={class:"auth"},oe={class:"container"},ae={class:"auth__inner"},te={class:"auth__wrapper"},re=ee(()=>e("div",{class:"auth__logo"},[e("img",{src:X,alt:"logo",width:"415",height:"80",loading:"lazy"})],-1)),le={class:"auth__title"},ne={class:"auth__label"},ce=["placeholder"],ie={key:0,class:"error-white"},ue={class:"auth__label"},de={class:"auth__label-wrapper"},pe=["type","placeholder"],_e={key:0,class:"error-white"},me={class:"auth__submit",type:"submit"},he={__name:"auth",setup(o){const n=E(),_=x(),{t:T}=F(),m=w(!1),a=w({userName:"",password:""}),B=H(()=>({userName:{required:P},password:{required:P,minLength:J}})),r=G(B,a);w([{id:1,label:"loginLabel",type:"text",model:"userName",name:"login",placeholder:"loginPlaceholder",errorKey:"userName"},{id:2,label:"passwordLabel",type:"password",model:"password",name:"password",placeholder:"passwordPlaceholder",errorKey:"password"}]);const{mutate:C}=W({mutationFn:s=>Z(s),onSuccess:s=>{const{token:t,user:{id:h,role:g,fullName:c,organizationName:i,organizationId:u,roleId:d}}=s;localStorage.setItem("id",h),localStorage.setItem("token",t),localStorage.setItem("name",c),localStorage.setItem("role",g),localStorage.setItem("organization",i),localStorage.setItem("organizationId",u),localStorage.setItem("roleId",d),n.push("/"),_.success(T("signInToast")),a.value=Y(a.value),r.value.$reset()}}),U=()=>{r.value.$validate(),!r.value.$errors.length&&C(a.value)};return(s,t)=>{var c,i,u,d,b,S,$,y,N,k;const h=M("Icon"),g=M("SwitcherLang");return f(),I("section",se,[e("div",oe,[e("div",ae,[e("div",te,[re,e("h2",le,l(s.$t("login")),1),e("form",{class:"auth__form",onSubmit:K(U,["prevent"])},[e("label",ne,[L(l(s.$t("loginLabel"))+" ",1),V(e("input",{class:"auth__input",type:"text","onUpdate:modelValue":t[0]||(t[0]=v=>a.value.userName=v),placeholder:s.$t("loginPlaceholder")},null,8,ce),[[O,a.value.userName]]),(i=(c=p(r))==null?void 0:c.userName)!=null&&i.$error?(f(),I("span",ie,l((b=(d=(u=p(r))==null?void 0:u.userName)==null?void 0:d.$errors[0])==null?void 0:b.$message),1)):z("",!0)]),e("label",ue,[L(l(s.$t("passwordLabel"))+" ",1),e("span",de,[V(e("input",{class:"auth__input",type:m.value?"text":"password","onUpdate:modelValue":t[1]||(t[1]=v=>a.value.password=v),placeholder:s.$t("passwordPlaceholder")},null,8,pe),[[j,a.value.password]]),e("span",{class:"auth__label-icon",onClick:t[2]||(t[2]=()=>m.value=!m.value)},[D(h,{name:"eye"})])]),($=(S=p(r))==null?void 0:S.password)!=null&&$.$error?(f(),I("span",_e,l((k=(N=(y=p(r))==null?void 0:y.password)==null?void 0:N.$errors[0])==null?void 0:k.$message),1)):z("",!0)]),e("button",me,l(s.$t("loginButton")),1)],32),D(g)])])])])}}},Ie=q(he,[["__scopeId","data-v-d14c753a"]]);export{Ie as default};
//# sourceMappingURL=auth-VF2CUjzt.js.map
