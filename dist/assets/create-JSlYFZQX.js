import{u as F,a as M,r as f,c as K,b as _,d as g,f as h,k as r,w as q,F as H,e as P,B as v,g as T,h as s,o as n,A as N,z as L,i as $,t as E}from"./index-xEhNh2bJ.js";import{u as Q,r as y}from"./i18n-validators-6dxtFobU.js";import{a as U,u as X}from"./generic.services-cTEduup6.js";import{c as A}from"./crud.services-QxvbF8R1.js";const D={class:"manage section-height shadowed"},R={class:"manage__inner section-padding"},Z={__name:"create",setup(j){const I=U(),B=T();F(),M();const t=f({fullName:"",organizationId:""}),S=K(()=>({fullName:{required:y},organizationId:{required:y}})),o=Q(S,t),V=f([{id:1,model:"fullName",label:"nameExpensesLabel",placeholder:"nameExpensesPlaceholder",icon:"input-company",errorKey:"fullName"}]),{mutate:b}=X({mutationFn:a=>A("cost",a),onSuccess:()=>{I.invalidateQueries({queryKey:["expenses"]}),B.push(N.EXPENSES.path)}}),x=()=>{const a=localStorage.getItem("organizationId");t.value.organizationId=a,o.value.$validate(),!o.value.$errors.length&&(b(t.value),o.value.$reset())};return(a,G)=>{var l,u;const w=s("ManageHead"),z=s("FormInput"),C=s("CustomButton");return n(),_("section",D,[g("div",R,[h(w,{title:"addNewExpensesTitle",to:r(N).EXPENSES.path},null,8,["to"]),g("form",{class:"manage__form form-manage",onSubmit:q(x,["prevent"])},[(n(!0),_(H,null,P(V.value,e=>{var m,c,d,i,p;return n(),L(z,{key:e.id,modelValue:t.value[e.model],"onUpdate:modelValue":k=>t.value[e.model]=k,width:500,placeholder:a.$t(e.placeholder),name:e.icon,error:(c=(m=r(o))==null?void 0:m[e.errorKey])==null?void 0:c.$error,textError:(p=(i=(d=r(o))==null?void 0:d[e.errorKey])==null?void 0:i.$errors[0])==null?void 0:p.$message},{default:v(()=>[$(E(a.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),h(C,{className:`form__submit ${(u=(l=r(o))==null?void 0:l.fullName.$errors[0])!=null&&u.$message?"centered":""}`},{default:v(()=>[$(E(a.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{Z as default};
//# sourceMappingURL=create-JSlYFZQX.js.map
