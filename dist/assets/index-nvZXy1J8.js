import{n as N,s as V,r as u,q as x,x as H,y as F,b as T,d as J,j as C,g as e,z as q,h as d,t as M,l as s,o as n,A as w}from"./index-u_2KKI46.js";import{a as R,u as U}from"./generic.services-Zkt5ZkSV.js";import{u as W}from"./useQuery-n3W-mpu_.js";import{g as $,d as G}from"./crud.services-WcX_HSPp.js";import{r as X}from"./index-qMmDNxy9.js";const Y={class:"object"},Z={class:"object__inner section-padding"},ee={key:2,class:"empty-table shadowed"},ie={__name:"index",async setup(te){let o,b;const c=R(),m=N(),{setSearchValue:_,setPagePagination:A}=m,{page:i,limit:r,search:p}=V(m),B=u(localStorage.getItem("organizationId"));x(()=>{_("")}),H(p,()=>{A(1)});const y=u(""),g=X(p,500),E=u([{id:1,label:"objectName",width:385},{id:2,label:"objectOrganization",width:480},{id:3,label:"objectAddress",width:185},{id:4,label:"objectState"},{id:5,label:"objectAction"}]),{data:a,isLoading:O,isSuccess:l,isError:P}=([o,b]=F(()=>W({queryKey:["objects",{page:i,limit:r,debouncedSearch:g,organizationId:B}],queryFn:()=>$("building_object",i.value,r.value,g.value)})),o=await o,b(),o),{mutate:k}=U({mutationFn:t=>G("building_object",t),onSuccess:t=>{c.invalidateQueries({queryKey:["objects"]}),c.invalidateQueries({queryKey:["objectById",y]}),c.invalidateQueries({queryKey:["objectsList"]})}}),I=async t=>{y.value=t,k(t)};return(t,j)=>{var h,S,f,v;const D=s("HeadPage"),Q=s("Table"),z=s("Pagination"),K=s("Spinner");return n(),T("section",Y,[J("div",Z,[C(D,{title:"objectTitle",to:e(w).CREATE_OBJECTS.path,onOnSearch:j[0]||(j[0]=L=>e(_)(L))},null,8,["to"]),e(l)&&((h=e(a))!=null&&h.count)?(n(),q(Q,{key:0,headers:E.value,table:(S=e(a))==null?void 0:S.objects,to:e(w).UPDATE_OBJECTS.name,options:{page:e(i),limit:e(r)},onOnActionDelete:I},null,8,["headers","table","to","options"])):d("",!0),C(z,{count:(f=e(a))==null?void 0:f.count,isSucces:e(l)},null,8,["count","isSucces"]),e(O)?(n(),q(K,{key:1})):d("",!0),e(l)&&!((v=e(a))!=null&&v.count)||e(P)?(n(),T("div",ee,M(t.$t("emptyTableTitle")),1)):d("",!0)])])}}};export{ie as default};
//# sourceMappingURL=index-nvZXy1J8.js.map
