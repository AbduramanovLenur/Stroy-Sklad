import{n as V,s as x,q as F,r as f,x as H,b as v,d as I,f as w,k as e,y as B,l as c,t as R,h as a,o as n,z as T}from"./index-zT54aL9e.js";import{a as z,u as M}from"./generic.services-n35efQMQ.js";import{u as j}from"./useQuery-sYQ1vWUH.js";import{g as U,d as W}from"./crud.services-9ETkeD4Q.js";import{r as $}from"./index-Z2pyjMVz.js";const G={class:"blocks section-height"},J={class:"blocks__inner section-padding"},X={key:2,class:"empty-table"},ae={__name:"index",async setup(Y){let s,i;const r=z(),d=V(),{setSearchValue:u}=d,{page:b,limit:m,search:C}=x(d);F(()=>{u("")});const _=f(""),k=$(C,500),E=f([{id:1,label:"blockName",width:185},{id:2,label:"blockObject",width:205},{id:3,label:"blockOrganization",width:260},{id:4,label:"blockFloors",width:230},{id:5,label:"blockRooms",width:235},{id:6,label:"blockAddress",width:150},{id:7,label:"blockState",width:140},{id:8,label:"blockAction",width:125}]),{data:o,isLoading:q,isSuccess:l,isError:A}=([s,i]=H(()=>j({queryKey:["blocks",{page:b,limit:m,debouncedSearch:k}],queryFn:()=>U("building_block",b.value,m.value,k.value)})),s=await s,i(),s),{mutate:O}=M({mutationFn:t=>W("building_block",t),onSuccess:()=>{r.invalidateQueries({queryKey:["blocks"]}),r.invalidateQueries({queryKey:["blocksById",_]})}}),D=async t=>{_.value=t,O(t)};return(t,p)=>{var h,y,S,g;const K=a("HeadPage"),L=a("Table"),P=a("Pagination"),N=a("Spinner");return n(),v("section",G,[I("div",J,[w(K,{title:"blockTitle",to:e(T).CREATE_BLOCKS.path,onOnSearch:p[0]||(p[0]=Q=>e(u)(Q))},null,8,["to"]),e(l)&&((h=e(o))!=null&&h.count)?(n(),B(L,{key:0,headers:E.value,table:(y=e(o))==null?void 0:y.blocks,to:e(T).UPDATE_BLOCKS.name,onOnActionDelete:D},null,8,["headers","table","to"])):c("",!0),w(P,{count:(S=e(o))==null?void 0:S.count,isSucces:e(l),isEmpty:!!((g=e(o))!=null&&g.count)},null,8,["count","isSucces","isEmpty"]),e(q)?(n(),B(N,{key:1})):c("",!0),e(l)&&!e(o).count||e(A)?(n(),v("div",X,R(t.$t("emptyTableTitle")),1)):c("",!0)])])}}};export{ae as default};
//# sourceMappingURL=index-tf6nNqqH.js.map
