import{a as D,u as q}from"./generic.services-_wmr52k_.js";import{u as w}from"./useQuery-pyMv0qYl.js";import{g as A,d as B}from"./crud.services-oazsYCL2.js";import{r as c,x as E,b as _,d as N,f as O,k as e,y,l as i,t as Q,h as u,o as n,z as h}from"./index-_BFdtwee.js";const x={class:"products section-height"},H={class:"products__inner section-padding"},I={key:2,class:"empty-table"},z={__name:"index",async setup(K){let s,d;const l=D(),g=c(""),p=c(""),b=c([{id:1,label:"productsName",width:725},{id:4,label:"productsState",width:365},{id:5,label:"productsAction",width:440}]),{data:r,isLoading:S,isSuccess:m,isError:f}=([s,d]=E(()=>w({queryKey:["products"],queryFn:()=>A("construction_material"),select:t=>t.map(o=>{const a={...o};return delete a.organizationName,a})})),s=await s,d(),s),{mutate:T}=q({mutationFn:t=>B("construction_material",t),onSuccess:()=>{l.invalidateQueries({queryKey:["products"]}),l.invalidateQueries({queryKey:["productsById",p]})}}),v=async t=>{p.value=t,T(t)};return(t,o)=>{const a=u("HeadPage"),C=u("Table"),k=u("Spinner");return n(),_("section",x,[N("div",H,[O(a,{title:"productsTitle",to:e(h).CREATE_PRODUCTS.path,onOnSearch:o[0]||(o[0]=P=>g.value=P)},null,8,["to"]),e(m)&&e(r).length?(n(),y(C,{key:0,headers:b.value,table:e(r),to:e(h).UPDATE_PRODUCTS.name,onOnActionDelete:v},null,8,["headers","table","to"])):i("",!0),e(S)?(n(),y(k,{key:1})):i("",!0),e(m)&&!e(r).length||e(f)?(n(),_("div",I,Q(t.$t("emptyTableTitle")),1)):i("",!0)])])}}};export{z as default};
//# sourceMappingURL=index-APE_nv2y.js.map
