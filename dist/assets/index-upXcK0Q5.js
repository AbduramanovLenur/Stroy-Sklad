import{n as K,s as L,q as F,r as f,x as M,b as g,d as v,f as T,k as e,y as k,l as i,t as O,h as o,o as a,z as P}from"./index-F4UHGcq2.js";import{a as R,u as X}from"./generic.services-wQ89JmWC.js";import{u as z}from"./useQuery-ccCSBUF5.js";import{g as U,d as W}from"./crud.services-rreQBCQx.js";import{r as $}from"./index-V-M1nI8H.js";const j={class:"expenses section-height"},G={class:"expenses__inner section-padding"},J={class:"shadowed"},Y={key:2,class:"empty-table"},ae={__name:"index",async setup(Z){let n,r;const l=R(),u=K(),{setSearchValue:d}=u,{page:p,limit:m,search:q}=L(u);F(()=>{d("")});const _=f(""),y=$(q,500),w=f([{id:1,label:"expensesName",width:635},{id:7,label:"expensesState",width:440},{id:8,label:"expensesAction",width:455}]),{data:t,isLoading:C,isSuccess:c,isError:N}=([n,r]=M(()=>z({queryKey:["expenses",{page:p,limit:m,debouncedSearch:y}],queryFn:()=>U("cost",p.value,m.value,y.value)})),n=await n,r(),n),{mutate:A}=X({mutationFn:s=>W("cost",s),onSuccess:()=>{l.invalidateQueries({queryKey:["expenses"]}),l.invalidateQueries({queryKey:["expensesById",_]})}}),B=async s=>{_.value=s,A(s)};return(s,h)=>{var S,x,E,b;const D=o("HeadPage"),Q=o("Table"),V=o("Pagination"),H=o("Spinner");return a(),g("section",j,[v("div",G,[T(D,{title:"expensesTitle",to:e(P).CREATE_EXPENSES.path,onOnSearch:h[0]||(h[0]=I=>e(d)(I))},null,8,["to"]),v("div",J,[e(c)&&((S=e(t))!=null&&S.count)?(a(),k(Q,{key:0,headers:w.value,table:(x=e(t))==null?void 0:x.cost,to:e(P).UPDATE_EXPENSES.name,onOnActionDelete:B},null,8,["headers","table","to"])):i("",!0),T(V,{count:(E=e(t))==null?void 0:E.count,isSucces:e(c),isEmpty:!!((b=e(t))!=null&&b.count)},null,8,["count","isSucces","isEmpty"]),e(C)?(a(),k(H,{key:1})):i("",!0),e(c)&&!e(t).count||e(N)?(a(),g("div",Y,O(s.$t("emptyTableTitle")),1)):i("",!0)])])])}}};export{ae as default};
//# sourceMappingURL=index-upXcK0Q5.js.map
