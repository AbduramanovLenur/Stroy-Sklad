import{_ as N,u as k,a as V,r as g,c as L,b as u,d as s,t as d,w as D,F as B,e as F,f as K,g as M,h as T,o as i,i as z,j as P,v as U,k as v,l as q,p as C,m as H}from"./index-W4j50O3a.js";import{u as O,r as f,m as j}from"./i18n-validators-wfnkgHY1.js";import{r as x,u as A}from"./generic.services-ZP-K_-d6.js";const E="/assets/logo-auth-H25DvOh-.svg",R=a=>{const r={...a};for(const m in r)r[m]="";return r},G=a=>x({url:"api/Account",method:"POST",body:a}),J=a=>(C("data-v-21f93b22"),a=a(),H(),a),Q={class:"auth"},W={class:"container"},X={class:"auth__inner"},Y={class:"auth__wrapper"},Z=J(()=>s("div",{class:"auth__logo"},[s("img",{src:E,alt:"logo",width:"415",height:"80",loading:"lazy"})],-1)),ee={class:"auth__title"},se=["type","onUpdate:modelValue","name","placeholder"],ae={key:0,class:"error-white"},oe={class:"auth__submit",type:"submit"},te={__name:"auth",setup(a){const r=M(),m=k(),{t:w}=V(),t=g({userName:"",password:""}),y=L(()=>({userName:{required:f},password:{required:f,minLength:j}})),l=O(y,t),b=g([{id:1,label:"loginLabel",type:"text",model:"userName",name:"login",placeholder:"loginPlaceholder",errorKey:"userName"},{id:2,label:"passwordLabel",type:"password",model:"password",name:"password",placeholder:"passwordPlaceholder",errorKey:"password"}]),{mutate:S}=A({mutationFn:o=>G(o),onSuccess:o=>{const{token:h,user:{role:_,fullName:e,organizationName:n,roleId:c}}=o;localStorage.setItem("token",h),localStorage.setItem("name",e),localStorage.setItem("role",_),localStorage.setItem("organization",n),localStorage.setItem("roleId",c),r.push("/"),m.success(w("signInToast")),t.value=R(t.value),l.value.$reset()}}),I=()=>{l.value.$validate(),!l.value.$errors.length&&S(t.value)};return(o,h)=>{const _=T("SwitcherLang");return i(),u("section",Q,[s("div",W,[s("div",X,[s("div",Y,[Z,s("h2",ee,d(o.$t("login")),1),s("form",{class:"auth__form",onSubmit:D(I,["prevent"])},[(i(!0),u(B,null,F(b.value,e=>{var n,c,p;return i(),u("label",{key:e.id,class:"auth__label"},[z(d(o.$t(e.label))+" ",1),P(s("input",{class:"auth__input",type:e.type,"onUpdate:modelValue":$=>t.value[e.model]=$,name:e.name,placeholder:o.$t(e.placeholder)},null,8,se),[[U,t.value[e.model]]]),(n=v(l))!=null&&n[e.errorKey].$error?(i(),u("span",ae,d((p=(c=v(l))==null?void 0:c[e.errorKey].$errors[0])==null?void 0:p.$message),1)):q("",!0)])}),128)),s("button",oe,d(o.$t("loginButton")),1)],32),K(_)])])])])}}},ce=N(te,[["__scopeId","data-v-21f93b22"]]);export{ce as default};
//# sourceMappingURL=auth-I9TLfIIM.js.map
