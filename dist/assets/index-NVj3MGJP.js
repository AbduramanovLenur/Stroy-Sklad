import{n as x,s as H,q as K,x as L,r as v,y as R,b as C,d as F,f as P,k as e,z as A,l,t as U,h as n,o as i,A as E}from"./index-8-F5s4j3.js";import{a as W,u as $}from"./generic.services-CQjHStj7.js";import{u as j}from"./useQuery-KERFi8ks.js";import{g as G,d as J}from"./crud.services-Xs683v05.js";import{r as X}from"./index-stR_uWnS.js";const Y={class:"company section-height"},Z={class:"company__inner section-padding"},ee={key:2,class:"empty-table shadowed"},re={__name:"index",async setup(te){let o,d;const u=W(),m=x(),{setSearchValue:p,setPagePagination:T}=m,{page:s,limit:r,search:g}=H(m);K(()=>{p("")}),L(g,()=>{T(1)});const h=v(""),y=X(g,500),k=v([{id:1,label:"organizationName",width:220},{id:2,label:"organizationInn",width:115},{id:3,label:"organizationRegion",width:200},{id:4,label:"organizationDistrict",width:155},{id:5,label:"organizationAddress",width:200},{id:6,label:"organizationPhone",width:170},{id:7,label:"organizationDirector",width:230},{id:7,label:"organizationState",width:130},{id:8,label:"organizationAction",width:130}]),{data:a,isLoading:D,isSuccess:c,isError:q}=([o,d]=R(()=>j({queryKey:["companies",{page:s,limit:r,debouncedSearch:y}],queryFn:()=>G("organization",s.value,r.value,y.value)})),o=await o,d(),o),{mutate:I}=$({mutationFn:t=>J("organization",t),onSuccess:async()=>{await u.invalidateQueries({queryKey:["companies"]}),await u.invalidateQueries({queryKey:["companiesById",h]})}}),N=t=>{h.value=t,I(t)};return(t,_)=>{var b,S,w,z,f;const B=n("HeadPage"),M=n("Table"),O=n("Pagination"),Q=n("Spinner");return i(),C("section",Y,[F("div",Z,[P(B,{title:"comapnyTitle",to:e(E).CREATE_COMPANIES.path,onOnSearch:_[0]||(_[0]=V=>e(p)(V))},null,8,["to"]),e(c)&&((b=e(a))!=null&&b.count)?(i(),A(M,{key:0,headers:k.value,table:(S=e(a))==null?void 0:S.organizations,to:e(E).UPDATE_COMPANIES.name,options:{page:e(s),limit:e(r)},onOnActionDelete:N},null,8,["headers","table","to","options"])):l("",!0),P(O,{count:(w=e(a))==null?void 0:w.count,isSucces:e(c),isEmpty:!!((z=e(a))!=null&&z.count)},null,8,["count","isSucces","isEmpty"]),e(D)?(i(),A(Q,{key:1})):l("",!0),e(c)&&!((f=e(a))!=null&&f.count)||e(q)?(i(),C("div",ee,U(t.$t("emptyTableTitle")),1)):l("",!0)])])}}};export{re as default};
//# sourceMappingURL=index-NVj3MGJP.js.map
