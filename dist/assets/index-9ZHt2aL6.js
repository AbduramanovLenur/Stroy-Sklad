import{u as X,a as Y,x as Z,y as W,b as ee,c as se,r as k,z as te,d as O,e as ae,k as I,h as e,A as P,i as n,t as oe,m as u,o as r,s as Q,H as i}from"./index-BTOQ0EkA.js";import{a as ne,u as ue}from"./generic.services-aA1xp-Zb.js";import{u as re}from"./useQuery-0j72TF6v.js";import{g as ie,d as ce}from"./crud.services-omo8rLXB.js";import{r as le}from"./index-jSmiWUHg.js";const de={key:0,class:"warehouse"},he={class:"warehouse__inner section-padding"},me={key:2,class:"empty-table shadowed"},Te={__name:"index",async setup(_e){let a,m;const _=ne(),q=X(),{t:B}=Y(),L=Z(),{page:c,limit:l,search:N}=W(L),x=ee(),{user:t}=W(x),p=se(()=>{var s,h;return!!((h=(s=t==null?void 0:t.value.user)==null?void 0:s.modules)!=null&&h.includes(i.WAREHOUSE.READ))}),w=k(""),S=le(N,500),z=k([{id:1,label:"warehouseName",width:35},{id:2,label:"warehouseQuantity",width:20},{id:3,label:"warehouseQuantityType",width:20}]),{data:o,isLoading:K,isSuccess:d,isError:V}=([a,m]=te(()=>re({queryKey:["warehouse",{page:c,limit:l,debouncedSearch:S,organizationId:t.value.user.organizationId}],queryFn:()=>ie("warehouse",c.value,l.value,S.value),enabled:p})),a=await a,m(),a),{mutate:F}=ue({mutationFn:s=>ce("warehouse",s),onSuccess:s=>{s!=null&&s.success&&(_.invalidateQueries({queryKey:["warehouse"]}),_.invalidateQueries({queryKey:["warehouseById",w]}),setTimeout(()=>q.success(B("deleteToast")),150))}}),M=async s=>{w.value=s,F(s)};return(s,h)=>{var y,E,T,b,g,A,v,f,U,D,H,R,C;const $=u("HeadPage"),j=u("Table"),G=u("Pagination"),J=u("Spinner");return p.value?(r(),O("section",de,[ae("div",he,[I($,{title:"warehouseTitle",to:e(Q).CREATE_WAREHOUSE.path,isShowCreate:(T=(E=(y=e(t))==null?void 0:y.user)==null?void 0:E.modules)==null?void 0:T.includes(e(i).WAREHOUSE.CREATE)},null,8,["to","isShowCreate"]),e(d)&&((b=e(o))!=null&&b.count)?(r(),P(j,{key:0,headers:z.value,table:(g=e(o))==null?void 0:g.warehouse,to:e(Q).UPDATE_WAREHOUSE.name,options:{page:e(c),limit:e(l)},isShowUpdate:(f=(v=(A=e(t))==null?void 0:A.user)==null?void 0:v.modules)==null?void 0:f.includes(e(i).WAREHOUSE.UPDATE),isShowDelete:(H=(D=(U=e(t))==null?void 0:U.user)==null?void 0:D.modules)==null?void 0:H.includes(e(i).WAREHOUSE.DELETE),onOnActionDelete:M},null,8,["headers","table","to","options","isShowUpdate","isShowDelete"])):n("",!0),I(G,{count:(R=e(o))==null?void 0:R.count,isSucces:e(d)},null,8,["count","isSucces"]),e(K)?(r(),P(J,{key:1})):n("",!0),e(d)&&!((C=e(o))!=null&&C.count)||e(V)?(r(),O("div",me,oe(s.$t("emptyTableTitle")),1)):n("",!0)])])):n("",!0)}}};export{Te as default};
