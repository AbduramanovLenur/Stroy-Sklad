import{n as V,s as x,q as H,r as f,x as K,b as v,d as L,f as C,k as e,y as E,l as r,t as R,h as o,o as i,z as T}from"./index-zT54aL9e.js";import{a as F,u as U}from"./generic.services-n35efQMQ.js";import{u as W}from"./useQuery-sYQ1vWUH.js";import{g as $,d as j}from"./crud.services-9ETkeD4Q.js";import{r as G}from"./index-Z2pyjMVz.js";const J={class:"company section-height"},X={class:"company__inner section-padding"},Y={key:2,class:"empty-table"},ie={__name:"index",async setup(Z){let n,c;const l=F(),d=V(),{setSearchValue:u}=d,{page:m,limit:p,search:A}=x(d);H(()=>{u("")});const y=f(""),_=G(A,500),P=f([{id:1,label:"organizationName",width:220},{id:2,label:"organizationInn",width:115},{id:3,label:"organizationRegion",width:215},{id:4,label:"organizationDistrict",width:155},{id:5,label:"organizationAddress",width:200},{id:6,label:"organizationPhone",width:170},{id:7,label:"organizationDirector",width:245},{id:7,label:"organizationState",width:100},{id:8,label:"organizationAction",width:130}]),{data:a,isLoading:k,isSuccess:s,isError:D}=([n,c]=K(()=>W({queryKey:["companies",{page:m,limit:p,debouncedSearch:_}],queryFn:()=>$("organization",m.value,p.value,_.value)})),n=await n,c(),n),{mutate:q}=U({mutationFn:t=>j("organization",t),onSuccess:async()=>{await l.invalidateQueries({queryKey:["companies"]}),await l.invalidateQueries({queryKey:["companiesById",y]})}}),I=t=>{y.value=t,q(t)};return(t,g)=>{var h,b,S,w,z;const N=o("HeadPage"),B=o("Table"),M=o("Pagination"),O=o("Spinner");return i(),v("section",J,[L("div",X,[C(N,{title:"comapnyTitle",to:e(T).CREATE_COMPANIES.path,onOnSearch:g[0]||(g[0]=Q=>e(u)(Q))},null,8,["to"]),e(s)&&((h=e(a))!=null&&h.count)?(i(),E(B,{key:0,headers:P.value,table:(b=e(a))==null?void 0:b.organizations,to:e(T).UPDATE_COMPANIES.name,onOnActionDelete:I},null,8,["headers","table","to"])):r("",!0),C(M,{count:(S=e(a))==null?void 0:S.count,isSucces:e(s),isEmpty:!!((w=e(a))!=null&&w.count)},null,8,["count","isSucces","isEmpty"]),e(k)?(i(),E(O,{key:1})):r("",!0),e(s)&&!((z=e(a))!=null&&z.count)||e(D)?(i(),v("div",Y,R(t.$t("emptyTableTitle")),1)):r("",!0)])])}}};export{ie as default};
//# sourceMappingURL=index-zg-upYym.js.map
