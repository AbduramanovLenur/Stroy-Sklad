import{n as H,s as K,r as l,q as L,x as F,y as M,b as v,d as O,f as P,k as e,z as T,l as u,t as R,h as a,o,A as k}from"./index-TqTqIbHh.js";import{a as X,u as U}from"./generic.services-wmG985Iz.js";import{u as W}from"./useQuery-ZuTrOc-G.js";import{g as $,d as j}from"./crud.services-ChiVIUDS.js";import{r as G}from"./index-YBbMQLr8.js";const J={class:"expenses"},Y={class:"expenses__inner section-padding"},Z={key:2,class:"empty-table shadowed"},ie={__name:"index",async setup(ee){let s,d;const p=X(),m=H(),{setSearchValue:_,setPagePagination:w}=m,{page:i,limit:c,search:y}=K(m),g=l(localStorage.getItem("organizationId"));L(()=>{_("")}),F(y,()=>{w(1)});const S=l(""),h=G(y,500),I=l([{id:1,label:"expensesName",width:635},{id:7,label:"expensesState",width:440},{id:8,label:"expensesAction",width:455}]),{data:n,isLoading:q,isSuccess:r,isError:A}=([s,d]=M(()=>W({queryKey:["expenses",{page:i,limit:c,debouncedSearch:h,organizationId:g}],queryFn:()=>$("cost",i.value,c.value,h.value,{organizationId:g.value})})),s=await s,d(),s),{mutate:C}=U({mutationFn:t=>j("cost",t),onSuccess:()=>{p.invalidateQueries({queryKey:["expenses"]}),p.invalidateQueries({queryKey:["expensesById",S]})}}),N=async t=>{S.value=t,C(t)};return(t,x)=>{var b,E,f;const B=a("HeadPage"),D=a("Table"),z=a("Pagination"),Q=a("Spinner");return o(),v("section",J,[O("div",Y,[P(B,{title:"expensesTitle",to:e(k).CREATE_EXPENSES.path,onOnSearch:x[0]||(x[0]=V=>e(_)(V))},null,8,["to"]),e(r)&&((b=e(n))!=null&&b.count)?(o(),T(D,{key:0,headers:I.value,table:(E=e(n))==null?void 0:E.cost,to:e(k).UPDATE_EXPENSES.name,options:{page:e(i),limit:e(c)},onOnActionDelete:N},null,8,["headers","table","to","options"])):u("",!0),P(z,{count:(f=e(n))==null?void 0:f.count,isSucces:e(r)},null,8,["count","isSucces"]),e(q)?(o(),T(Q,{key:1})):u("",!0),e(r)&&!e(n).count||e(A)?(o(),v("div",Z,R(t.$t("emptyTableTitle")),1)):u("",!0)])])}}};export{ie as default};
//# sourceMappingURL=index-PGXAdHJk.js.map
