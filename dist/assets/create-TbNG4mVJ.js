import{u as P,a as S,r as h,c as K,b as v,d as $,f as y,B as r,w as q,F as E,e as M,k as s,g as U,h as n,o as l,i as u,t as c,z as x,A as D}from"./index-VQIUi_yG.js";import{u as L,r as I}from"./i18n-validators-yInBhSOi.js";import{a as Q,u as R}from"./generic.services-qeqkLGxM.js";import{c as A}from"./crud.services-xidt0Eez.js";const H={class:"manage section-height shadowed"},O={class:"manage__inner section-padding"},Z={__name:"create",setup(j){const B=Q(),V=U();P(),S();const t=h({fullname:"",organizationId:""}),b=K(()=>({fullname:{required:I},organizationId:{required:I}})),o=L(b,t),C=h([{id:1,model:"fullname",label:"nameProductsLabel",placeholder:"nameProductsPlaceholder",icon:"pen",errorKey:"fullname"}]),{mutate:w}=R({mutationFn:e=>A("construction_material",e),onSuccess:()=>{B.invalidateQueries({queryKey:["products"]}),V.push(D.PRODUCTS.path)}}),z=()=>{const e=localStorage.getItem("organizationId");t.value.organizationId=e,o.value.$validate(),!o.value.$errors.length&&(w(t.value),o.value.$reset())};return(e,G)=>{var m,d;const N=n("Title"),T=n("FormInput"),k=n("CustomButton");return l(),v("section",H,[$("div",O,[y(N,null,{default:r(()=>[u(`\r
                `+c(e.$t("addNewProductTitle"))+`\r
            `,1)]),_:1}),$("form",{class:"manage__form form-manage",onSubmit:q(z,["prevent"])},[(l(!0),v(E,null,M(C.value,a=>{var i,f,_,p,g;return l(),x(T,{key:a.id,modelValue:t.value[a.model],"onUpdate:modelValue":F=>t.value[a.model]=F,width:500,placeholder:e.$t(a.placeholder),name:a.icon,error:(f=(i=s(o))==null?void 0:i[a.errorKey])==null?void 0:f.$error,textError:(g=(p=(_=s(o))==null?void 0:_[a.errorKey])==null?void 0:p.$errors[0])==null?void 0:g.$message},{default:r(()=>[u(c(e.$t(a.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),y(k,{className:`form__submit ${(d=(m=s(o))==null?void 0:m.fullname.$errors[0])!=null&&d.$message?"centered":""}`},{default:r(()=>[u(c(e.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{Z as default};
//# sourceMappingURL=create-TbNG4mVJ.js.map
