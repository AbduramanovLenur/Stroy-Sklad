import{u as H,a as z,n as v,r as h,c as J,b as k,d as I,f as K,x as g,w as W,F as L,e as B,k as c,g as X,h as p,o as m,i as f,t as _,q as O,s as Y}from"./index-uEOOChHm.js";import{u as Z,r as l}from"./i18n-validators-Zycmru6O.js";import{a as ee,u as oe}from"./generic.services-zAUdS-UM.js";import{u as V,c as re}from"./crud.services-AVFHJS4I.js";import{m as se,a as ae}from"./manual.services-OPim9ts4.js";const le={class:"manage section-height"},te={class:"manage__inner section-padding"},ge={__name:"create",async setup(ne){let o,b;const N=ee(),S=X();H(),z();const{data:w,isSuccess:q,isLoading:C}=([o,b]=v(()=>V({queryKey:["regions"],queryFn:()=>se()})),o=await o,b(),o),{data:R,isSuccess:x,isLoading:E}=([o,b]=v(()=>V({queryKey:["districts"],queryFn:()=>ae()})),o=await o,b(),o),a=h({fullname:"",numberOfFloors:"",roomsOnFloor:"",address:"",buildingObjectId:1,regionId:"",districtId:""}),T=J(()=>({fullname:{required:l},numberOfFloors:{required:l},roomsOnFloor:{required:l},address:{required:l},regionId:{required:l},districtId:{required:l}})),r=Z(T,a),D=h([{id:1,model:"fullname",label:"blocksFullNameLabel",placeholder:"blocksFullNamePlaceholder",icon:"input-company",errorKey:"fullname"},{id:2,model:"numberOfFloors",label:"blocksNumberLabel",placeholder:"blocksNumberPlaceholder",icon:"signature",errorKey:"numberOfFloors"},{id:3,model:"roomsOnFloor",label:"blocksRoomsLabel",placeholder:"blocksRoomsPlaceholder",icon:"door",errorKey:"roomsOnFloor"},{id:4,model:"address",label:"blocksAddressLabel",placeholder:"blocksAddressPlaceholder",icon:"address",errorKey:"address"}]),P=h([{id:1,model:"buildingObjectId",label:"buildIdBlocksLabel",options:[],errorKey:"buildingObjectId",success:!0,loading:!1},{id:2,model:"regionId",label:"regionBlocksLabel",options:w,errorKey:"regionId",success:q,loading:C},{id:3,model:"districtId",label:"districtBlocksLabel",options:R,errorKey:"districtId",success:x,loading:E}]),{mutate:U}=oe({mutationFn:s=>re("building_block",s),onSuccess:()=>{N.invalidateQueries({queryKey:["blocks"]}),S.push(Y.BLOCKS.path)}}),j=()=>{r.value.$validate(),!r.value.$errors.length&&(U(a.value),r.value.$reset())};return(s,de)=>{var F,$;const A=p("Title"),M=p("FormInput"),Q=p("FormSelect"),G=p("CustomButton");return m(),k("section",le,[I("div",te,[K(A,null,{default:g(()=>[f(`\r
                `+_(s.$t("addNewBlocksTitle"))+`\r
            `,1)]),_:1}),I("form",{class:"manage__form form-manage",onSubmit:W(j,["prevent"])},[(m(!0),k(L,null,B(D.value,e=>{var t,n,d,i,u;return m(),O(M,{key:e.id,modelValue:a.value[e.model],"onUpdate:modelValue":y=>a.value[e.model]=y,width:500,placeholder:s.$t(e.placeholder),name:e.icon,error:(n=(t=c(r))==null?void 0:t[e.errorKey])==null?void 0:n.$error,textError:(u=(i=(d=c(r))==null?void 0:d[e.errorKey])==null?void 0:i.$errors[0])==null?void 0:u.$message},{default:g(()=>[f(_(s.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","name","error","textError"])}),128)),(m(!0),k(L,null,B(P.value,e=>{var t,n,d,i,u;return m(),O(Q,{key:e.id,modelValue:a.value[e.model],"onUpdate:modelValue":y=>a.value[e.model]=y,width:500,options:e.options,error:(n=(t=c(r))==null?void 0:t[e==null?void 0:e.errorKey])==null?void 0:n.$error,textError:(u=(i=(d=c(r))==null?void 0:d[e==null?void 0:e.errorKey])==null?void 0:i.$errors[0])==null?void 0:u.$message,success:e.success,loading:e.loading},{default:g(()=>[f(_(s.$t(e.label)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","options","error","textError","success","loading"])}),128)),K(G,{className:`form__submit ${($=(F=c(r))==null?void 0:F.districtId.$errors[0])!=null&&$.$message?"centered":""}`},{default:g(()=>[f(_(s.$t("formButton")),1)]),_:1},8,["className"])],32)])])}}};export{ge as default};
//# sourceMappingURL=create-wx2wZpd5.js.map
