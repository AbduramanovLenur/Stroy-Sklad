import{n as x,s as H,q as K,x as L,r as v,y as R,b as C,d as F,f as P,k as e,z as A,l as r,t as U,h as o,o as i,A as E}from"./index-qu9jH8U4.js";import{a as W,u as $}from"./generic.services-TvKn_bvi.js";import{u as j}from"./useQuery-HXp8dDXQ.js";import{g as G,d as J}from"./crud.services-RAdlH-I4.js";import{r as X}from"./index-r1nzloiF.js";const Y={class:"company section-height"},Z={class:"company__inner section-padding"},ee={key:2,class:"empty-table"},re={__name:"index",async setup(te){let n,c;const l=W(),d=x(),{setSearchValue:u,setPagePagination:T}=d,{page:m,limit:p,search:g}=H(d);K(()=>{u("")}),L(g,()=>{T(1)});const y=v(""),_=X(g,500),k=v([{id:1,label:"organizationName",width:220},{id:2,label:"organizationInn",width:115},{id:3,label:"organizationRegion",width:200},{id:4,label:"organizationDistrict",width:155},{id:5,label:"organizationAddress",width:200},{id:6,label:"organizationPhone",width:170},{id:7,label:"organizationDirector",width:230},{id:7,label:"organizationState",width:130},{id:8,label:"organizationAction",width:130}]),{data:a,isLoading:D,isSuccess:s,isError:q}=([n,c]=R(()=>j({queryKey:["companies",{page:m,limit:p,debouncedSearch:_}],queryFn:()=>G("organization",m.value,p.value,_.value)})),n=await n,c(),n),{mutate:I}=$({mutationFn:t=>J("organization",t),onSuccess:async()=>{await l.invalidateQueries({queryKey:["companies"]}),await l.invalidateQueries({queryKey:["companiesById",y]})}}),N=t=>{y.value=t,I(t)};return(t,h)=>{var b,S,w,z,f;const B=o("HeadPage"),M=o("Table"),O=o("Pagination"),Q=o("Spinner");return i(),C("section",Y,[F("div",Z,[P(B,{title:"comapnyTitle",to:e(E).CREATE_COMPANIES.path,onOnSearch:h[0]||(h[0]=V=>e(u)(V))},null,8,["to"]),e(s)&&((b=e(a))!=null&&b.count)?(i(),A(M,{key:0,headers:k.value,table:(S=e(a))==null?void 0:S.organizations,to:e(E).UPDATE_COMPANIES.name,onOnActionDelete:N},null,8,["headers","table","to"])):r("",!0),P(O,{count:(w=e(a))==null?void 0:w.count,isSucces:e(s),isEmpty:!!((z=e(a))!=null&&z.count)},null,8,["count","isSucces","isEmpty"]),e(D)?(i(),A(Q,{key:1})):r("",!0),e(s)&&!((f=e(a))!=null&&f.count)||e(q)?(i(),C("div",ee,U(t.$t("emptyTableTitle")),1)):r("",!0)])])}}};export{re as default};
//# sourceMappingURL=index-Yw0Z7ltu.js.map
